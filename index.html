<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Shader Lab Pro 2.6.0</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Orbitron:wght@400;700;900&family=Rajdhani:wght@400;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin:0; padding:0; box-sizing:border-box; }
    :root {
      --bg-void:#050508;
      --bg-panel:#0a0a12;
      --bg-card:#0f0f1a;
      --accent-primary:#00ff88;
      --accent-secondary:#ff3366;
      --accent-tertiary:#ffaa00;
      --accent-cyan:#00e5ff;
      --accent-purple:#aa44ff;
      --text-dim:#5a5a7a;
      --text-mid:#8a8aaa;
      --text-light:#d0d0f0;
      --border:#1a1a2a;
      --glow-green:rgba(0,255,136,0.3);
      --glow-red:rgba(255,51,102,0.3);
      --glow-cyan:rgba(0,229,255,0.3);
    }
    body {
      font-family:'Rajdhani',sans-serif;
      background:var(--bg-void);
      color:var(--text-light);
      min-height:100vh;
      overflow:hidden;
    }
    .container {
      display:grid;
      grid-template-columns:1fr 420px;
      height:100vh;
    }
    .shader-view {
      position:relative;
      background:#000;
    }
    canvas {
      width:100%;
      height:100%;
      display:block;
    }
    .overlay-info {
      position:absolute;
      top:16px;
      left:16px;
      display:flex;
      gap:12px;
      align-items:center;
      flex-wrap:wrap;
    }
    .info-badge {
      background:rgba(0,0,0,0.85);
      backdrop-filter:blur(10px);
      padding:8px 14px;
      border-radius:8px;
      font-size:12px;
      font-weight:600;
      color:var(--accent-primary);
      border:1px solid var(--border);
      display:flex;
      align-items:center;
      gap:6px;
    }
    .info-badge .dot {
      width:8px;
      height:8px;
      border-radius:50%;
      background:var(--accent-primary);
      animation:pulse 1.5s infinite;
    }
    @keyframes pulse {
      0%,100%{opacity:1;transform:scale(1);}
      50%{opacity:0.5;transform:scale(1.2);}
    }
    .preset-indicator {
      position:absolute;
      bottom:20px;
      left:20px;
      background:rgba(0,0,0,0.9);
      backdrop-filter:blur(10px);
      padding:14px 24px;
      border-radius:12px;
      border:1px solid var(--accent-primary);
      box-shadow:0 0 30px var(--glow-green);
    }
    .shader-type {
      font-family:'Orbitron',monospace;
      font-size:11px;
      color:var(--accent-cyan);
      letter-spacing:2px;
      margin-bottom:4px;
    }
    .preset-name {
      font-family:'Orbitron',monospace;
      font-size:20px;
      font-weight:700;
      color:var(--accent-primary);
      text-transform:uppercase;
      letter-spacing:2px;
    }
    .control-panel {
      background:var(--bg-panel);
      border-left:1px solid var(--border);
      display:flex;
      flex-direction:column;
      overflow:hidden;
    }
    .panel-header {
      padding:14px 20px;
      background:linear-gradient(180deg,var(--bg-card),transparent);
      border-bottom:1px solid var(--border);
    }
    .panel-title {
      font-family:'Orbitron',monospace;
      font-size:18px;
      font-weight:900;
      letter-spacing:3px;
      background:linear-gradient(135deg,var(--accent-primary),var(--accent-secondary),var(--accent-cyan));
      -webkit-background-clip:text;
      -webkit-text-fill-color:transparent;
      background-clip:text;
    }
    .panel-subtitle {
      font-size:10px;
      color:var(--text-dim);
      margin-top:3px;
      letter-spacing:1px;
    }
    .shader-selector {
      margin-top:10px;
      position:relative;
    }
    .shader-dropdown {
      width:100%;
      padding:12px 40px 12px 16px;
      background:var(--bg-card);
      border:1px solid var(--border);
      border-radius:8px;
      font-family:'Rajdhani',sans-serif;
      font-size:14px;
      font-weight:600;
      color:var(--text-light);
      cursor:pointer;
      transition:all 0.2s ease;
      appearance:none;
      -webkit-appearance:none;
      -moz-appearance:none;
      background-image:url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%2300e5ff' d='M2 4l4 4 4-4'/%3E%3C/svg%3E");
      background-repeat:no-repeat;
      background-position:right 14px center;
    }
    .shader-dropdown:hover {
      border-color:var(--accent-cyan);
      box-shadow:0 0 15px var(--glow-cyan);
    }
    .shader-dropdown:focus {
      outline:none;
      border-color:var(--accent-primary);
      box-shadow:0 0 20px var(--glow-green);
    }
    .shader-dropdown option {
      background:var(--bg-panel);
      color:var(--text-light);
      padding:10px;
      font-size:14px;
    }
    .randomize-btn {
      margin-top:10px;
      width:100%;
      padding:10px;
      background:linear-gradient(135deg,#ff6b9d,#c44dff);
      border:none;
      border-radius:8px;
      font-family:'Rajdhani',sans-serif;
      font-size:12px;
      font-weight:700;
      color:#fff;
      cursor:pointer;
      text-transform:uppercase;
      letter-spacing:1px;
      transition:all 0.2s;
    }
    .randomize-btn:hover {
      box-shadow:0 0 25px rgba(196,77,255,0.6);
      transform:translateY(-1px);
    }
    .export-btn {
      margin-top:10px;
      width:100%;
      padding:10px;
      background:linear-gradient(135deg,var(--accent-primary),var(--accent-cyan));
      border:none;
      border-radius:8px;
      font-family:'Rajdhani',sans-serif;
      font-size:12px;
      font-weight:700;
      color:#000;
      cursor:pointer;
      text-transform:uppercase;
      letter-spacing:1px;
      transition:all 0.2s;
    }
    .export-btn:hover {
      box-shadow:0 0 25px var(--glow-green);
      transform:translateY(-1px);
    }
    .panel-scroll {
      flex:1;
      overflow-y:auto;
      padding:14px 18px;
    }
    .panel-scroll::-webkit-scrollbar {
      width:6px;
    }
    .panel-scroll::-webkit-scrollbar-track {
      background:var(--bg-void);
    }
    .panel-scroll::-webkit-scrollbar-thumb {
      background:var(--border);
      border-radius:3px;
    }
    .presets-grid {
      display:grid;
      grid-template-columns:repeat(3,1fr);
      gap:5px;
      margin-bottom:14px;
    }
    .preset-btn {
      background:var(--bg-card);
      border:1px solid var(--border);
      border-radius:5px;
      padding:7px 4px;
      font-family:'Rajdhani',sans-serif;
      font-size:8px;
      font-weight:600;
      color:var(--text-mid);
      cursor:pointer;
      transition:all 0.2s ease;
      text-transform:uppercase;
      letter-spacing:0.2px;
    }
    .preset-btn:hover {
      background:var(--bg-void);
      border-color:var(--accent-primary);
      color:var(--accent-primary);
    }
    .preset-btn.active {
      background:linear-gradient(135deg,rgba(0,255,136,0.15),rgba(255,51,102,0.15));
      border-color:var(--accent-primary);
      color:var(--accent-primary);
      box-shadow:0 0 12px var(--glow-green);
    }
    .section-title {
      font-family:'Orbitron',monospace;
      font-size:8px;
      text-transform:uppercase;
      letter-spacing:2px;
      margin:14px 0 8px;
      color:var(--accent-secondary);
      display:flex;
      align-items:center;
      gap:8px;
    }
    .section-title::before {
      content:"â—†";
      font-size:6px;
    }
    .section-title::after {
      content:"";
      flex:1;
      height:1px;
      background:linear-gradient(90deg,var(--accent-secondary),transparent);
    }
    .control-group {
      margin-bottom:10px;
    }
    .control-label {
      display:flex;
      justify-content:space-between;
      align-items:center;
      font-size:10px;
      font-weight:600;
      margin-bottom:4px;
      color:var(--text-mid);
    }
    .control-value {
      font-family:'JetBrains Mono',monospace;
      font-size:9px;
      color:var(--accent-primary);
      min-width:40px;
      text-align:right;
    }
    .slider-track {
      position:relative;
      height:4px;
      background:var(--bg-void);
      border-radius:2px;
    }
    .slider-fill {
      position:absolute;
      left:0;top:0;
      height:100%;
      background:linear-gradient(90deg,var(--accent-primary),var(--accent-secondary));
      border-radius:2px;
      pointer-events:none;
    }
    input[type="range"] {
      -webkit-appearance:none;
      width:100%;
      height:4px;
      background:transparent;
      position:relative;
      z-index:2;
      cursor:pointer;
      margin:0;
    }
    input[type="range"]::-webkit-slider-thumb {
      -webkit-appearance:none;
      width:14px;
      height:14px;
      border-radius:50%;
      background:var(--text-light);
      border:2px solid var(--accent-primary);
      box-shadow:0 0 8px var(--glow-green);
      cursor:grab;
    }
    .controls-section {
      display:none;
    }
    .controls-section.active {
      display:block;
    }
    .tip-box {
      margin-top:14px;
      padding:10px;
      background:var(--bg-card);
      border:1px solid var(--border);
      border-radius:6px;
      font-size:9px;
      color:var(--text-dim);
      line-height:1.4;
    }
    .tip-box strong {
      color:var(--accent-tertiary);
    }
    /* Modal */
    .modal-overlay {
      display:none;
      position:fixed;
      top:0;left:0;right:0;bottom:0;
      background:rgba(0,0,0,0.9);
      z-index:1000;
      align-items:center;
      justify-content:center;
      padding:20px;
    }
    .modal-overlay.active {
      display:flex;
    }
    .modal-content {
      background:var(--bg-panel);
      border:1px solid var(--accent-primary);
      border-radius:16px;
      max-width:800px;
      width:100%;
      max-height:80vh;
      display:flex;
      flex-direction:column;
      box-shadow:0 0 60px var(--glow-green);
    }
    .modal-header {
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:16px 20px;
      border-bottom:1px solid var(--border);
    }
    .modal-title {
      font-family:'Orbitron',monospace;
      font-size:16px;
      font-weight:700;
      color:var(--accent-primary);
      letter-spacing:2px;
    }
    .modal-close {
      background:none;
      border:none;
      color:var(--text-dim);
      font-size:24px;
      cursor:pointer;
      padding:0 8px;
      transition:color 0.2s;
    }
    .modal-close:hover {
      color:var(--accent-secondary);
    }
    .modal-body {
      flex:1;
      overflow:auto;
    }
    .code-preview {
      background:var(--bg-void);
      color:#a0ffa0;
      font-family:'JetBrains Mono',monospace;
      font-size:10px;
      line-height:1.4;
      padding:16px;
      margin:0;
      white-space:pre;
      overflow:auto;
      min-height:250px;
    }
    .modal-footer {
      display:flex;
      gap:12px;
      padding:16px 20px;
      border-top:1px solid var(--border);
    }
    .modal-btn {
      flex:1;
      padding:12px 20px;
      border:none;
      border-radius:8px;
      font-family:'Rajdhani',sans-serif;
      font-size:13px;
      font-weight:700;
      cursor:pointer;
      transition:all 0.2s;
      text-transform:uppercase;
      letter-spacing:1px;
    }
    .modal-btn.primary {
      background:linear-gradient(135deg,var(--accent-primary),var(--accent-cyan));
      color:#000;
    }
    .modal-btn.primary:hover {
      box-shadow:0 0 20px var(--glow-green);
    }
    .modal-btn.secondary {
      background:var(--bg-card);
      color:var(--text-light);
      border:1px solid var(--border);
    }
    .modal-btn.secondary:hover {
      border-color:var(--accent-primary);
    }
    .copy-success {
      background:var(--accent-cyan) !important;
    }
    @media (max-width:900px){
      .container { 
        grid-template-columns:1fr; 
        grid-template-rows:40vh 1fr;
        height:100vh;
      }
      .control-panel { 
        border-left:none; 
        border-top:1px solid var(--border);
        overflow-y:auto;
      }
      .shader-view {
        min-height:200px;
      }
      .preset-indicator {
        bottom:10px;
        left:10px;
        padding:10px 16px;
      }
      .preset-name {
        font-size:16px;
      }
      .shader-type {
        font-size:9px;
      }
      .panel-header {
        padding:12px 16px;
      }
      .panel-title {
        font-size:16px;
      }
      .shader-selector {
        margin-top:8px;
      }
      .shader-dropdown {
        padding:10px 36px 10px 12px;
        font-size:13px;
      }
      .randomize-btn {
        margin-top:8px;
        padding:8px;
        font-size:10px;
      }
      .export-btn {
        margin-top:8px;
        padding:8px;
        font-size:10px;
      }
      .panel-scroll {
        padding:10px 14px;
      }
      .overlay-info {
        top:10px;
        left:10px;
        gap:8px;
      }
      .info-badge {
        padding:6px 10px;
        font-size:10px;
      }
    }
    @media (max-width:500px){
      .container { 
        grid-template-rows:35vh 1fr;
      }
      .shader-dropdown {
        padding:10px 32px 10px 10px;
        font-size:12px;
      }
      .presets-grid {
        grid-template-columns:repeat(3,1fr);
        gap:3px;
      }
      .preset-btn {
        padding:5px 2px;
        font-size:7px;
      }
      .control-group {
        margin-bottom:8px;
      }
      .section-title {
        margin:10px 0 6px;
        font-size:7px;
      }
    }
    /* Audio Player */
    .audio-controls {
      position:absolute;
      bottom:16px;
      right:16px;
      display:flex;
      align-items:center;
      gap:8px;
      background:rgba(10,10,18,0.85);
      padding:8px 12px;
      border-radius:20px;
      border:1px solid var(--border);
      z-index:100;
      backdrop-filter:blur(8px);
      opacity:0.6;
      transition:opacity 0.3s;
    }
    .audio-controls:hover {
      opacity:1;
    }
    .audio-btn {
      background:none;
      border:none;
      color:var(--text-mid);
      cursor:pointer;
      font-size:16px;
      padding:4px;
      transition:color 0.2s;
    }
    .audio-btn:hover {
      color:var(--accent-primary);
    }
    .audio-btn.playing {
      color:var(--accent-primary);
    }
    .volume-slider {
      width:60px;
      height:4px;
      -webkit-appearance:none;
      background:var(--border);
      border-radius:2px;
      cursor:pointer;
    }
    .volume-slider::-webkit-slider-thumb {
      -webkit-appearance:none;
      width:12px;
      height:12px;
      background:var(--accent-primary);
      border-radius:50%;
      cursor:pointer;
    }
    .volume-slider::-moz-range-thumb {
      width:12px;
      height:12px;
      background:var(--accent-primary);
      border-radius:50%;
      cursor:pointer;
      border:none;
    }
  </style>
</head>
<body>
<div class="container">
  <div class="shader-view">
    <canvas id="glCanvas"></canvas>
    <div class="overlay-info">
      <div class="info-badge"><span class="dot"></span> LIVE</div>
      <div class="info-badge">FPS: <span id="fps">60</span></div>
      <div class="info-badge" id="res-badge">1920Ã—1080</div>
    </div>
    <div class="preset-indicator">
      <div class="shader-type" id="shader-type">PLASMA VORTEX</div>
      <div class="preset-name" id="current-preset">ENERGY BURST</div>
    </div>
    <div class="audio-controls" id="audio-controls">
      <button class="audio-btn" id="audio-toggle" title="Play/Pause">ðŸ”‡</button>
      <input type="range" class="volume-slider" id="volume-slider" min="0" max="1" step="0.05" value="0.4">
    </div>
  </div>
  
  <div class="control-panel">
    <div class="panel-header">
      <h1 class="panel-title">SHADER LAB PRO</h1>
      <p class="panel-subtitle">Version 2.6.0 â€¢ 17 Epic Shaders</p>
      <div class="shader-selector">
        <select class="shader-dropdown" id="shader-dropdown">
          <option value="0">Plasma Vortex</option>
          <option value="1">Cosmic Mandala</option>
          <option value="2">Dark Transit</option>
          <option value="3">Neon Grid</option>
          <option value="4">Electric Arcs</option>
          <option value="5">Neon Spokes</option>
          <option value="6">Crystal Lattice</option>
          <option value="7">Rainbow Nebula</option>
          <option value="8">Inferno Fire</option>
          <option value="9">Wormhole</option>
          <option value="10" selected>Neon Lines</option>
          <option value="11">Cyber Waves</option>
          <option value="12">Spiral</option>
          <option value="13">Starfield</option>
          <option value="14">Fractal</option>
          <option value="15">Maze Lattice</option>
          <option value="16">Floral Thorns</option>
          <option value="17">Cosmic Distortion</option>
        </select>
      </div>
      <button class="randomize-btn" id="randomize-btn">Randomize Shader</button>
      <button class="export-btn" id="export-btn">Export to Shadertoy</button>
    </div>
    
    <div class="panel-scroll">
      <!-- â˜… PLASMA VORTEX CONTROLS (FIRST!) -->
      <div class="controls-section active" id="controls-0">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-0"></div>
        
        <div class="section-title">Vortex</div>
        <div class="control-group">
          <div class="control-label"><span>Vortex Arms</span><span class="control-value" id="val-pv-arms">4</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-pv-arms"></div>
          <input type="range" id="pv-arms" min="1" max="12" step="1" value="4"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Spin Speed</span><span class="control-value" id="val-pv-spin">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-pv-spin"></div>
          <input type="range" id="pv-spin" min="0" max="3" step="0.02" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Spiral Tightness</span><span class="control-value" id="val-pv-tightness">3.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-pv-tightness"></div>
          <input type="range" id="pv-tightness" min="0.5" max="8" step="0.1" value="3"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Core Size</span><span class="control-value" id="val-pv-coresize">0.20</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-pv-coresize"></div>
          <input type="range" id="pv-coresize" min="0.05" max="0.8" step="0.01" value="0.2"></div>
        </div>
        
        <div class="section-title">Plasma</div>
        <div class="control-group">
          <div class="control-label"><span>Plasma Intensity</span><span class="control-value" id="val-pv-plasma">1.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-pv-plasma"></div>
          <input type="range" id="pv-plasma" min="0.5" max="4" step="0.05" value="1.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Electric Tendrils</span><span class="control-value" id="val-pv-tendrils">0.80</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-pv-tendrils"></div>
          <input type="range" id="pv-tendrils" min="0" max="2" step="0.02" value="0.8"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Noise Scale</span><span class="control-value" id="val-pv-noisescale">4.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-pv-noisescale"></div>
          <input type="range" id="pv-noisescale" min="1" max="12" step="0.2" value="4"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Turbulence</span><span class="control-value" id="val-pv-turbulence">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-pv-turbulence"></div>
          <input type="range" id="pv-turbulence" min="0" max="2" step="0.02" value="0.5"></div>
        </div>
        
        <div class="section-title">Energy</div>
        <div class="control-group">
          <div class="control-label"><span>Pulse Rate</span><span class="control-value" id="val-pv-pulserate">2.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-pv-pulserate"></div>
          <input type="range" id="pv-pulserate" min="0" max="6" step="0.1" value="2"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Energy Waves</span><span class="control-value" id="val-pv-waves">3.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-pv-waves"></div>
          <input type="range" id="pv-waves" min="0" max="8" step="0.2" value="3"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Wave Speed</span><span class="control-value" id="val-pv-wavespeed">1.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-pv-wavespeed"></div>
          <input type="range" id="pv-wavespeed" min="0" max="4" step="0.05" value="1.5"></div>
        </div>
        
        <div class="section-title">Color</div>
        <div class="control-group">
          <div class="control-label"><span>Color Mode</span><span class="control-value" id="val-pv-colormode">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-pv-colormode"></div>
          <input type="range" id="pv-colormode" min="0" max="3" step="0.1" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Hue Shift</span><span class="control-value" id="val-pv-hue">0.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-pv-hue"></div>
          <input type="range" id="pv-hue" min="0" max="6.28" step="0.05" value="0"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Core Glow</span><span class="control-value" id="val-pv-coreglow">2.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-pv-coreglow"></div>
          <input type="range" id="pv-coreglow" min="0" max="5" step="0.1" value="2"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Bloom</span><span class="control-value" id="val-pv-bloom">0.40</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-pv-bloom"></div>
          <input type="range" id="pv-bloom" min="0" max="1" step="0.02" value="0.4"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Zoom</span><span class="control-value" id="val-pv-zoom">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-pv-zoom"></div>
          <input type="range" id="pv-zoom" min="0.3" max="3" step="0.05" value="1"></div>
        </div>
      </div>

      <!-- â˜… COSMIC MANDALA CONTROLS -->
      <div class="controls-section" id="controls-1">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-1"></div>
        
        <div class="section-title">Geometry</div>
        <div class="control-group">
          <div class="control-label"><span>Symmetry</span><span class="control-value" id="val-cm-symmetry">6</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cm-symmetry"></div>
          <input type="range" id="cm-symmetry" min="3" max="16" step="1" value="6"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Layers</span><span class="control-value" id="val-cm-layers">5</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cm-layers"></div>
          <input type="range" id="cm-layers" min="2" max="10" step="1" value="5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Complexity</span><span class="control-value" id="val-cm-complexity">3.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cm-complexity"></div>
          <input type="range" id="cm-complexity" min="1" max="8" step="0.1" value="3"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Ring Scale</span><span class="control-value" id="val-cm-ringscale">1.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cm-ringscale"></div>
          <input type="range" id="cm-ringscale" min="0.5" max="4" step="0.05" value="1.5"></div>
        </div>
        
        <div class="section-title">Motion</div>
        <div class="control-group">
          <div class="control-label"><span>Rotation Speed</span><span class="control-value" id="val-cm-rotspeed">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cm-rotspeed"></div>
          <input type="range" id="cm-rotspeed" min="0" max="2" step="0.02" value="0.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Pulse Speed</span><span class="control-value" id="val-cm-pulsespeed">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cm-pulsespeed"></div>
          <input type="range" id="cm-pulsespeed" min="0" max="4" step="0.05" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Pulse Amount</span><span class="control-value" id="val-cm-pulseamt">0.30</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cm-pulseamt"></div>
          <input type="range" id="cm-pulseamt" min="0" max="1" step="0.02" value="0.3"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Spiral Twist</span><span class="control-value" id="val-cm-spiral">0.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cm-spiral"></div>
          <input type="range" id="cm-spiral" min="-2" max="2" step="0.05" value="0"></div>
        </div>
        
        <div class="section-title">Glow &amp; Color</div>
        <div class="control-group">
          <div class="control-label"><span>Glow Intensity</span><span class="control-value" id="val-cm-glow">1.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cm-glow"></div>
          <input type="range" id="cm-glow" min="0.5" max="4" step="0.05" value="1.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Glow Falloff</span><span class="control-value" id="val-cm-falloff">2.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cm-falloff"></div>
          <input type="range" id="cm-falloff" min="0.5" max="5" step="0.1" value="2"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Color Cycle</span><span class="control-value" id="val-cm-colorcycle">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cm-colorcycle"></div>
          <input type="range" id="cm-colorcycle" min="0" max="2" step="0.02" value="0.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Hue Offset</span><span class="control-value" id="val-cm-hue">0.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cm-hue"></div>
          <input type="range" id="cm-hue" min="0" max="6.28" step="0.05" value="0"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Saturation</span><span class="control-value" id="val-cm-saturation">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cm-saturation"></div>
          <input type="range" id="cm-saturation" min="0" max="2" step="0.02" value="1"></div>
        </div>
        
        <div class="section-title">Effects</div>
        <div class="control-group">
          <div class="control-label"><span>Edge Glow</span><span class="control-value" id="val-cm-edgeglow">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cm-edgeglow"></div>
          <input type="range" id="cm-edgeglow" min="0" max="2" step="0.02" value="0.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Bloom</span><span class="control-value" id="val-cm-bloom">0.30</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cm-bloom"></div>
          <input type="range" id="cm-bloom" min="0" max="1" step="0.02" value="0.3"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Zoom</span><span class="control-value" id="val-cm-zoom">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cm-zoom"></div>
          <input type="range" id="cm-zoom" min="0.3" max="3" step="0.05" value="1"></div>
        </div>
      </div>

      <!-- â˜… DARK TRANSIT CONTROLS (NEW!) -->
      <div class="controls-section" id="controls-2">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-2"></div>
        
        <div class="section-title">Tunnel</div>
        <div class="control-group">
          <div class="control-label"><span>Speed</span><span class="control-value" id="val-dt-speed">4.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-dt-speed"></div>
          <input type="range" id="dt-speed" min="0.5" max="12" step="0.1" value="4"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Radius</span><span class="control-value" id="val-dt-radius">4.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-dt-radius"></div>
          <input type="range" id="dt-radius" min="2" max="8" step="0.1" value="4"></div>
        </div>
        
        <div class="section-title">Detail</div>
        <div class="control-group">
          <div class="control-label"><span>Scoops</span><span class="control-value" id="val-dt-scoops">0.25</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-dt-scoops"></div>
          <input type="range" id="dt-scoops" min="0.05" max="0.6" step="0.01" value="0.25"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Detail</span><span class="control-value" id="val-dt-detail">0.22</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-dt-detail"></div>
          <input type="range" id="dt-detail" min="0.05" max="0.5" step="0.01" value="0.22"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Orb Glow</span><span class="control-value" id="val-dt-orb">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-dt-orb"></div>
          <input type="range" id="dt-orb" min="0" max="3" step="0.05" value="1"></div>
        </div>
        
        <div class="section-title">Color</div>
        <div class="control-group">
          <div class="control-label"><span>Brightness</span><span class="control-value" id="val-dt-brightness">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-dt-brightness"></div>
          <input type="range" id="dt-brightness" min="0.3" max="2.5" step="0.05" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Saturation</span><span class="control-value" id="val-dt-saturation">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-dt-saturation"></div>
          <input type="range" id="dt-saturation" min="0.2" max="2" step="0.05" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>BG Darkness</span><span class="control-value" id="val-dt-bgdark">0.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-dt-bgdark"></div>
          <input type="range" id="dt-bgdark" min="0" max="1" step="0.02" value="0"></div>
        </div>
      </div>

      <!-- â˜… NEON GRID CONTROLS (NEW!) -->
      <div class="controls-section" id="controls-3">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-3"></div>
        
        <div class="section-title">Grid</div>
        <div class="control-group">
          <div class="control-label"><span>Speed</span><span class="control-value" id="val-ng-speed">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ng-speed"></div>
          <input type="range" id="ng-speed" min="0.1" max="3" step="0.05" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Grid Size</span><span class="control-value" id="val-ng-gridsize">0.10</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ng-gridsize"></div>
          <input type="range" id="ng-gridsize" min="0.03" max="0.3" step="0.005" value="0.1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Line Thickness</span><span class="control-value" id="val-ng-linethick">0.02</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ng-linethick"></div>
          <input type="range" id="ng-linethick" min="0.003" max="0.05" step="0.001" value="0.02"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Glow</span><span class="control-value" id="val-ng-glow">1.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ng-glow"></div>
          <input type="range" id="ng-glow" min="0.5" max="4" step="0.1" value="1.5"></div>
        </div>
        
        <div class="section-title">Animation</div>
        <div class="control-group">
          <div class="control-label"><span>Pulse</span><span class="control-value" id="val-ng-pulse">2.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ng-pulse"></div>
          <input type="range" id="ng-pulse" min="0" max="6" step="0.1" value="2"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Depth</span><span class="control-value" id="val-ng-depth">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ng-depth"></div>
          <input type="range" id="ng-depth" min="0.3" max="4" step="0.1" value="1"></div>
        </div>
        
        <div class="section-title">Color</div>
        <div class="control-group">
          <div class="control-label"><span>Hue</span><span class="control-value" id="val-ng-hue">0.85</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ng-hue"></div>
          <input type="range" id="ng-hue" min="0" max="1" step="0.01" value="0.85"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Saturation</span><span class="control-value" id="val-ng-saturation">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ng-saturation"></div>
          <input type="range" id="ng-saturation" min="0.2" max="2" step="0.05" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>BG Darkness</span><span class="control-value" id="val-ng-bgdark">0.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ng-bgdark"></div>
          <input type="range" id="ng-bgdark" min="0" max="1" step="0.02" value="0"></div>
        </div>
        
        <div class="section-title">Effects</div>
        <div class="control-group">
          <div class="control-label"><span>Scanlines</span><span class="control-value" id="val-ng-scanlines">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ng-scanlines"></div>
          <input type="range" id="ng-scanlines" min="0" max="1" step="0.05" value="0.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Chromatic</span><span class="control-value" id="val-ng-chromatic">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ng-chromatic"></div>
          <input type="range" id="ng-chromatic" min="0" max="2" step="0.05" value="0.5"></div>
        </div>
      </div>

      <!-- â˜… ELECTRIC ARCS CONTROLS (NEW!) -->
      <div class="controls-section" id="controls-4">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-4"></div>
        
        <div class="section-title">Arcs</div>
        <div class="control-group">
          <div class="control-label"><span>Num Arcs</span><span class="control-value" id="val-ea-arcs">5</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ea-arcs"></div>
          <input type="range" id="ea-arcs" min="1" max="8" step="1" value="5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Speed</span><span class="control-value" id="val-ea-speed">2.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ea-speed"></div>
          <input type="range" id="ea-speed" min="0.2" max="5" step="0.1" value="2"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Thickness</span><span class="control-value" id="val-ea-thickness">0.02</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ea-thickness"></div>
          <input type="range" id="ea-thickness" min="0.005" max="0.05" step="0.001" value="0.02"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Glow</span><span class="control-value" id="val-ea-glow">1.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ea-glow"></div>
          <input type="range" id="ea-glow" min="0.5" max="4" step="0.1" value="1.5"></div>
        </div>
        
        <div class="section-title">Detail</div>
        <div class="control-group">
          <div class="control-label"><span>Branching</span><span class="control-value" id="val-ea-branch">0.80</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ea-branch"></div>
          <input type="range" id="ea-branch" min="0" max="1.5" step="0.05" value="0.8"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Jitter</span><span class="control-value" id="val-ea-jitter">0.30</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ea-jitter"></div>
          <input type="range" id="ea-jitter" min="0.05" max="0.6" step="0.01" value="0.3"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Spread</span><span class="control-value" id="val-ea-spread">0.30</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ea-spread"></div>
          <input type="range" id="ea-spread" min="0.1" max="0.6" step="0.02" value="0.3"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Pulse</span><span class="control-value" id="val-ea-pulse">3.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ea-pulse"></div>
          <input type="range" id="ea-pulse" min="0" max="10" step="0.2" value="3"></div>
        </div>
        
        <div class="section-title">Color</div>
        <div class="control-group">
          <div class="control-label"><span>Hue</span><span class="control-value" id="val-ea-hue">0.60</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ea-hue"></div>
          <input type="range" id="ea-hue" min="0" max="1" step="0.01" value="0.6"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Saturation</span><span class="control-value" id="val-ea-saturation">0.80</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ea-saturation"></div>
          <input type="range" id="ea-saturation" min="0.2" max="2" step="0.05" value="0.8"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>BG Darkness</span><span class="control-value" id="val-ea-bgdark">0.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ea-bgdark"></div>
          <input type="range" id="ea-bgdark" min="0" max="1" step="0.02" value="0"></div>
        </div>
      </div>

      <!-- NEON SPOKES CONTROLS -->
      <div class="controls-section" id="controls-5">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-5"></div>
        
        <div class="section-title">Motion</div>
        <div class="control-group">
          <div class="control-label"><span>Speed</span><span class="control-value" id="val-ns-speed">3.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ns-speed"></div>
          <input type="range" id="ns-speed" min="0" max="8" step="0.1" value="3"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Zoom</span><span class="control-value" id="val-ns-zoom">1.10</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ns-zoom"></div>
          <input type="range" id="ns-zoom" min="0.5" max="3" step="0.05" value="1.1"></div>
        </div>
        
        <div class="section-title">Structure</div>
        <div class="control-group">
          <div class="control-label"><span>Iterations</span><span class="control-value" id="val-ns-iterations">40</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ns-iterations"></div>
          <input type="range" id="ns-iterations" min="10" max="80" step="1" value="40"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Complexity</span><span class="control-value" id="val-ns-complexity">0.20</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ns-complexity"></div>
          <input type="range" id="ns-complexity" min="0.05" max="0.5" step="0.01" value="0.2"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Step Size</span><span class="control-value" id="val-ns-stepsize">0.60</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ns-stepsize"></div>
          <input type="range" id="ns-stepsize" min="0.2" max="1.2" step="0.02" value="0.6"></div>
        </div>
        
        <div class="section-title">Color</div>
        <div class="control-group">
          <div class="control-label"><span>Saturation</span><span class="control-value" id="val-ns-saturation">0.60</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ns-saturation"></div>
          <input type="range" id="ns-saturation" min="0" max="2" step="0.02" value="0.6"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Exposure</span><span class="control-value" id="val-ns-exposure">1000</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ns-exposure"></div>
          <input type="range" id="ns-exposure" min="100" max="3000" step="50" value="1000"></div>
        </div>
      </div>

      <!-- CRYSTAL LATTICE CONTROLS -->
      <div class="controls-section" id="controls-6">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-6"></div>
        
        <div class="section-title">Camera &amp; Motion</div>
        <div class="control-group">
          <div class="control-label"><span>Speed</span><span class="control-value" id="val-cl-speed">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cl-speed"></div>
          <input type="range" id="cl-speed" min="0" max="4" step="0.05" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Path Curve</span><span class="control-value" id="val-cl-pathcurve">0.20</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cl-pathcurve"></div>
          <input type="range" id="cl-pathcurve" min="0" max="1" step="0.01" value="0.2"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Step Scale</span><span class="control-value" id="val-cl-stepscale">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cl-stepscale"></div>
          <input type="range" id="cl-stepscale" min="0.1" max="1.5" step="0.02" value="0.5"></div>
        </div>
        
        <div class="section-title">Swirl</div>
        <div class="control-group">
          <div class="control-label"><span>Swirl Intensity</span><span class="control-value" id="val-cl-swirl">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cl-swirl"></div>
          <input type="range" id="cl-swirl" min="0" max="2" step="0.02" value="0.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Swirl Frequency</span><span class="control-value" id="val-cl-swirlfreq">0.20</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cl-swirlfreq"></div>
          <input type="range" id="cl-swirlfreq" min="0.05" max="1" step="0.01" value="0.2"></div>
        </div>
        
        <div class="section-title">Geometry</div>
        <div class="control-group">
          <div class="control-label"><span>Shape Size</span><span class="control-value" id="val-cl-shapesize">0.30</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cl-shapesize"></div>
          <input type="range" id="cl-shapesize" min="0.05" max="0.6" step="0.01" value="0.3"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Shape Mod</span><span class="control-value" id="val-cl-shapemod">0.65</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cl-shapemod"></div>
          <input type="range" id="cl-shapemod" min="0" max="2" step="0.02" value="0.65"></div>
        </div>
        
        <div class="section-title">Color</div>
        <div class="control-group">
          <div class="control-label"><span>Glow</span><span class="control-value" id="val-cl-glow">0.90</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cl-glow"></div>
          <input type="range" id="cl-glow" min="0.1" max="2" step="0.02" value="0.9"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Color R</span><span class="control-value" id="val-cl-colorr">0.30</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cl-colorr"></div>
          <input type="range" id="cl-colorr" min="0" max="6.28" step="0.05" value="0.3"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Color G</span><span class="control-value" id="val-cl-colorg">1.30</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cl-colorg"></div>
          <input type="range" id="cl-colorg" min="0" max="6.28" step="0.05" value="1.3"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Color B</span><span class="control-value" id="val-cl-colorb">1.83</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cl-colorb"></div>
          <input type="range" id="cl-colorb" min="0" max="6.28" step="0.05" value="1.83"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Exposure</span><span class="control-value" id="val-cl-exposure">40000</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cl-exposure"></div>
          <input type="range" id="cl-exposure" min="5000" max="100000" step="1000" value="40000"></div>
        </div>
      </div>

      <!-- RAINBOW NEBULA CONTROLS -->
      <div class="controls-section" id="controls-7">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-7"></div>
        
        <div class="section-title">Motion</div>
        <div class="control-group">
          <div class="control-label"><span>Speed</span><span class="control-value" id="val-rn-speed">4.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-rn-speed"></div>
          <input type="range" id="rn-speed" min="0" max="10" step="0.1" value="4"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Turbulence</span><span class="control-value" id="val-rn-turbulence">0.80</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-rn-turbulence"></div>
          <input type="range" id="rn-turbulence" min="0" max="2" step="0.02" value="0.8"></div>
        </div>
        
        <div class="section-title">Structure</div>
        <div class="control-group">
          <div class="control-label"><span>Iterations</span><span class="control-value" id="val-rn-iterations">2.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-rn-iterations"></div>
          <input type="range" id="rn-iterations" min="0.5" max="4" step="0.1" value="2"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Scale</span><span class="control-value" id="val-rn-scale">5.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-rn-scale"></div>
          <input type="range" id="rn-scale" min="1" max="15" step="0.2" value="5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Detail</span><span class="control-value" id="val-rn-detail">0.08</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-rn-detail"></div>
          <input type="range" id="rn-detail" min="0.01" max="0.2" step="0.005" value="0.08"></div>
        </div>
        
        <div class="section-title">Color</div>
        <div class="control-group">
          <div class="control-label"><span>Saturation</span><span class="control-value" id="val-rn-saturation">1.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-rn-saturation"></div>
          <input type="range" id="rn-saturation" min="0" max="3" step="0.05" value="1.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Brightness</span><span class="control-value" id="val-rn-brightness">0.05</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-rn-brightness"></div>
          <input type="range" id="rn-brightness" min="0.01" max="0.15" step="0.005" value="0.05"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Hue Shift</span><span class="control-value" id="val-rn-hue">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-rn-hue"></div>
          <input type="range" id="rn-hue" min="0" max="6.28" step="0.05" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Exposure</span><span class="control-value" id="val-rn-exposure">1000</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-rn-exposure"></div>
          <input type="range" id="rn-exposure" min="100" max="5000" step="50" value="1000"></div>
        </div>
      </div>

      <!-- INFERNO FIRE CONTROLS -->
      <div class="controls-section" id="controls-8">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-8"></div>
        
        <div class="section-title">Flame</div>
        <div class="control-group">
          <div class="control-label"><span>Height</span><span class="control-value" id="val-fire-height">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-fire-height"></div>
          <input type="range" id="fire-height" min="0.3" max="2" step="0.05" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Width</span><span class="control-value" id="val-fire-width">1.20</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-fire-width"></div>
          <input type="range" id="fire-width" min="0.3" max="3" step="0.05" value="1.2"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Intensity</span><span class="control-value" id="val-fire-intensity">2.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-fire-intensity"></div>
          <input type="range" id="fire-intensity" min="0.5" max="5" step="0.1" value="2"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Time Scale</span><span class="control-value" id="val-fire-timescale">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-fire-timescale"></div>
          <input type="range" id="fire-timescale" min="0.1" max="2" step="0.05" value="0.5"></div>
        </div>
        
        <div class="section-title">Effects</div>
        <div class="control-group">
          <div class="control-label"><span>Spark Count</span><span class="control-value" id="val-fire-sparks">100</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-fire-sparks"></div>
          <input type="range" id="fire-sparks" min="20" max="200" step="5" value="100"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Smoke Opacity</span><span class="control-value" id="val-fire-smoke">0.80</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-fire-smoke"></div>
          <input type="range" id="fire-smoke" min="0" max="1.5" step="0.05" value="0.8"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Noise Detail</span><span class="control-value" id="val-fire-noise">5</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-fire-noise"></div>
          <input type="range" id="fire-noise" min="1" max="8" step="1" value="5"></div>
        </div>
      </div>

      <!-- â˜… WORMHOLE CONTROLS -->
      <div class="controls-section" id="controls-9">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-9"></div>

        <div class="section-title">Motion</div>
        <div class="control-group">
          <div class="control-label"><span>Speed</span><span class="control-value" id="val-wh-speed">2.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-speed"></div>
          <input type="range" id="wh-speed" min="0.5" max="6" step="0.1" value="2"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Sway</span><span class="control-value" id="val-wh-sway">0.80</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-sway"></div>
          <input type="range" id="wh-sway" min="0" max="3" step="0.05" value="0.8"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Twist</span><span class="control-value" id="val-wh-twist">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-twist"></div>
          <input type="range" id="wh-twist" min="0" max="3" step="0.05" value="1"></div>
        </div>

        <div class="section-title">Stars</div>
        <div class="control-group">
          <div class="control-label"><span>Star Strength</span><span class="control-value" id="val-wh-starStrength">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-starStrength"></div>
          <input type="range" id="wh-starStrength" min="0.1" max="4" step="0.05" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Star Density</span><span class="control-value" id="val-wh-starDensity">4.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-starDensity"></div>
          <input type="range" id="wh-starDensity" min="1" max="10" step="0.2" value="4"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Star Size</span><span class="control-value" id="val-wh-starSize">0.06</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-starSize"></div>
          <input type="range" id="wh-starSize" min="0.01" max="0.2" step="0.005" value="0.06"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Twinkle</span><span class="control-value" id="val-wh-twinkle">0.20</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-twinkle"></div>
          <input type="range" id="wh-twinkle" min="0" max="0.5" step="0.02" value="0.2"></div>
        </div>

        <div class="section-title">Tunnel</div>
        <div class="control-group">
          <div class="control-label"><span>Tunnel Radius</span><span class="control-value" id="val-wh-tunnelRadius">4.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-tunnelRadius"></div>
          <input type="range" id="wh-tunnelRadius" min="2" max="10" step="0.2" value="4"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Cave Noise</span><span class="control-value" id="val-wh-caveNoise">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-caveNoise"></div>
          <input type="range" id="wh-caveNoise" min="0" max="4" step="0.1" value="0.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Wall Glow</span><span class="control-value" id="val-wh-wallGlow">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-wallGlow"></div>
          <input type="range" id="wh-wallGlow" min="0" max="3" step="0.05" value="0.5"></div>
        </div>

        <div class="section-title">Color</div>
        <div class="control-group">
          <div class="control-label"><span>Hue Shift</span><span class="control-value" id="val-wh-hueShift">0.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-hueShift"></div>
          <input type="range" id="wh-hueShift" min="0" max="6.28" step="0.05" value="0"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Saturation</span><span class="control-value" id="val-wh-saturation">1.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-saturation"></div>
          <input type="range" id="wh-saturation" min="0.2" max="3" step="0.05" value="1.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Color Cycle</span><span class="control-value" id="val-wh-colorCycle">0.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-colorCycle"></div>
          <input type="range" id="wh-colorCycle" min="0" max="0.5" step="0.02" value="0"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Exposure</span><span class="control-value" id="val-wh-exposure">2.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-exposure"></div>
          <input type="range" id="wh-exposure" min="0.5" max="4" step="0.05" value="2"></div>
        </div>

        <div class="section-title">Effects</div>
        <div class="control-group">
          <div class="control-label"><span>Bloom</span><span class="control-value" id="val-wh-bloom">0.40</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-bloom"></div>
          <input type="range" id="wh-bloom" min="0" max="1" step="0.02" value="0.4"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Vignette</span><span class="control-value" id="val-wh-vignette">0.35</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-vignette"></div>
          <input type="range" id="wh-vignette" min="0" max="1" step="0.02" value="0.35"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Grain</span><span class="control-value" id="val-wh-grain">0.10</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-wh-grain"></div>
          <input type="range" id="wh-grain" min="0" max="0.5" step="0.02" value="0.1"></div>
        </div>
      </div>

      <!-- â˜… NEON LINES CONTROLS -->
      <div class="controls-section" id="controls-10">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-10"></div>

        <div class="section-title">Lines</div>
        <div class="control-group">
          <div class="control-label"><span>Speed</span><span class="control-value" id="val-nl-speed">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-nl-speed"></div>
          <input type="range" id="nl-speed" min="0.1" max="3" step="0.05" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Line Count</span><span class="control-value" id="val-nl-lineCount">10</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-nl-lineCount"></div>
          <input type="range" id="nl-lineCount" min="3" max="20" step="1" value="10"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Line Width</span><span class="control-value" id="val-nl-lineWidth">0.02</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-nl-lineWidth"></div>
          <input type="range" id="nl-lineWidth" min="0.005" max="0.05" step="0.002" value="0.02"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Glow</span><span class="control-value" id="val-nl-glow">1.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-nl-glow"></div>
          <input type="range" id="nl-glow" min="0.5" max="4" step="0.1" value="1.5"></div>
        </div>

        <div class="section-title">Wave</div>
        <div class="control-group">
          <div class="control-label"><span>Wave Amplitude</span><span class="control-value" id="val-nl-waveAmp">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-nl-waveAmp"></div>
          <input type="range" id="nl-waveAmp" min="0.1" max="1.5" step="0.05" value="0.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Wave Frequency</span><span class="control-value" id="val-nl-waveFreq">3.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-nl-waveFreq"></div>
          <input type="range" id="nl-waveFreq" min="1" max="8" step="0.2" value="3"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Pulse</span><span class="control-value" id="val-nl-pulse">2.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-nl-pulse"></div>
          <input type="range" id="nl-pulse" min="0" max="5" step="0.2" value="2"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Trail</span><span class="control-value" id="val-nl-trail">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-nl-trail"></div>
          <input type="range" id="nl-trail" min="0" max="2" step="0.1" value="0.5"></div>
        </div>

        <div class="section-title">Color</div>
        <div class="control-group">
          <div class="control-label"><span>Hue</span><span class="control-value" id="val-nl-hue">0.60</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-nl-hue"></div>
          <input type="range" id="nl-hue" min="0" max="1" step="0.02" value="0.6"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Saturation</span><span class="control-value" id="val-nl-saturation">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-nl-saturation"></div>
          <input type="range" id="nl-saturation" min="0.2" max="2" step="0.05" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>BG Darkness</span><span class="control-value" id="val-nl-bgdark">0.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-nl-bgdark"></div>
          <input type="range" id="nl-bgdark" min="0" max="1" step="0.05" value="0"></div>
        </div>
      </div>

      <!-- â˜… CYBER WAVES CONTROLS -->
      <div class="controls-section" id="controls-11">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-11"></div>

        <div class="section-title">Waves</div>
        <div class="control-group">
          <div class="control-label"><span>Speed</span><span class="control-value" id="val-cw-speed">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cw-speed"></div>
          <input type="range" id="cw-speed" min="0.2" max="3" step="0.05" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Wave Height</span><span class="control-value" id="val-cw-waveHeight">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cw-waveHeight"></div>
          <input type="range" id="cw-waveHeight" min="0" max="2" step="0.05" value="0.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Wave Scale</span><span class="control-value" id="val-cw-waveScale">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cw-waveScale"></div>
          <input type="range" id="cw-waveScale" min="0.2" max="3" step="0.1" value="1"></div>
        </div>

        <div class="section-title">Grid</div>
        <div class="control-group">
          <div class="control-label"><span>Grid Size</span><span class="control-value" id="val-cw-gridSize">0.10</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cw-gridSize"></div>
          <input type="range" id="cw-gridSize" min="0.02" max="0.3" step="0.01" value="0.1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Grid Glow</span><span class="control-value" id="val-cw-gridGlow">1.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cw-gridGlow"></div>
          <input type="range" id="cw-gridGlow" min="0.5" max="4" step="0.1" value="1.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Perspective</span><span class="control-value" id="val-cw-perspective">0.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cw-perspective"></div>
          <input type="range" id="cw-perspective" min="-2" max="3" step="0.1" value="0"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Fog Density</span><span class="control-value" id="val-cw-fogDensity">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cw-fogDensity"></div>
          <input type="range" id="cw-fogDensity" min="0" max="3" step="0.1" value="1"></div>
        </div>

        <div class="section-title">Color &amp; Effects</div>
        <div class="control-group">
          <div class="control-label"><span>Hue</span><span class="control-value" id="val-cw-hue">0.55</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cw-hue"></div>
          <input type="range" id="cw-hue" min="0" max="1" step="0.02" value="0.55"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Saturation</span><span class="control-value" id="val-cw-saturation">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cw-saturation"></div>
          <input type="range" id="cw-saturation" min="0.2" max="2" step="0.05" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Scanlines</span><span class="control-value" id="val-cw-scanlines">0.30</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cw-scanlines"></div>
          <input type="range" id="cw-scanlines" min="0" max="1" step="0.05" value="0.3"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Chromatic</span><span class="control-value" id="val-cw-chromatic">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cw-chromatic"></div>
          <input type="range" id="cw-chromatic" min="0" max="2" step="0.1" value="0.5"></div>
        </div>
      </div>

      <!-- â˜… SPIRAL CONTROLS -->
      <div class="controls-section" id="controls-12">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-12"></div>

        <div class="section-title">Geometry</div>
        <div class="control-group">
          <div class="control-label"><span>Spiral Arms</span><span class="control-value" id="val-sp-arms">5</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sp-arms"></div>
          <input type="range" id="sp-arms" min="1" max="12" step="1" value="5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Twist</span><span class="control-value" id="val-sp-twist">3.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sp-twist"></div>
          <input type="range" id="sp-twist" min="0" max="10" step="0.1" value="3"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Scale</span><span class="control-value" id="val-sp-scale">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sp-scale"></div>
          <input type="range" id="sp-scale" min="0.2" max="2" step="0.05" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Sharpness</span><span class="control-value" id="val-sp-sharpness">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sp-sharpness"></div>
          <input type="range" id="sp-sharpness" min="0.2" max="4" step="0.1" value="1"></div>
        </div>

        <div class="section-title">Animation</div>
        <div class="control-group">
          <div class="control-label"><span>Speed</span><span class="control-value" id="val-sp-speed">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sp-speed"></div>
          <input type="range" id="sp-speed" min="0" max="2" step="0.05" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Pulse</span><span class="control-value" id="val-sp-pulse">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sp-pulse"></div>
          <input type="range" id="sp-pulse" min="0" max="1" step="0.01" value="0.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Turbulence</span><span class="control-value" id="val-sp-turbulence">0.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sp-turbulence"></div>
          <input type="range" id="sp-turbulence" min="0" max="1" step="0.01" value="0"></div>
        </div>

        <div class="section-title">Color &amp; Effects</div>
        <div class="control-group">
          <div class="control-label"><span>Hue</span><span class="control-value" id="val-sp-hue">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sp-hue"></div>
          <input type="range" id="sp-hue" min="0" max="1" step="0.01" value="0.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Noise</span><span class="control-value" id="val-sp-noise">0.30</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sp-noise"></div>
          <input type="range" id="sp-noise" min="0" max="1" step="0.01" value="0.3"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Vignette</span><span class="control-value" id="val-sp-vignette">0.40</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sp-vignette"></div>
          <input type="range" id="sp-vignette" min="0" max="1" step="0.01" value="0.4"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Glow</span><span class="control-value" id="val-sp-glow">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sp-glow"></div>
          <input type="range" id="sp-glow" min="0" max="1" step="0.1" value="1"></div>
        </div>
      </div>

      <!-- â˜… STARFIELD CONTROLS -->
      <div class="controls-section" id="controls-13">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-13"></div>

        <div class="section-title">Volumetric</div>
        <div class="control-group">
          <div class="control-label"><span>Volume Steps</span><span class="control-value" id="val-sf-volSteps">18</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sf-volSteps"></div>
          <input type="range" id="sf-volSteps" min="5" max="30" step="1" value="18"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Step Size</span><span class="control-value" id="val-sf-stepSize">0.15</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sf-stepSize"></div>
          <input type="range" id="sf-stepSize" min="0.05" max="0.5" step="0.01" value="0.15"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Iterations</span><span class="control-value" id="val-sf-iterations">15</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sf-iterations"></div>
          <input type="range" id="sf-iterations" min="5" max="25" step="1" value="15"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Brightness</span><span class="control-value" id="val-sf-brightness">0.0020</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sf-brightness"></div>
          <input type="range" id="sf-brightness" min="0.0005" max="0.01" step="0.0005" value="0.002"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Dist Fading</span><span class="control-value" id="val-sf-distFading">0.78</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sf-distFading"></div>
          <input type="range" id="sf-distFading" min="0.3" max="1" step="0.01" value="0.78"></div>
        </div>

        <div class="section-title">Trails</div>
        <div class="control-group">
          <div class="control-label"><span>Trail Layers</span><span class="control-value" id="val-sf-trailLayers">8</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sf-trailLayers"></div>
          <input type="range" id="sf-trailLayers" min="0" max="15" step="1" value="8"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Trail Intensity</span><span class="control-value" id="val-sf-trailIntensity">0.80</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sf-trailIntensity"></div>
          <input type="range" id="sf-trailIntensity" min="0" max="1.5" step="0.05" value="0.8"></div>
        </div>

        <div class="section-title">Animation</div>
        <div class="control-group">
          <div class="control-label"><span>Flow Speed</span><span class="control-value" id="val-sf-flowSpeed">0.60</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sf-flowSpeed"></div>
          <input type="range" id="sf-flowSpeed" min="0" max="2" step="0.05" value="0.6"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Rotation</span><span class="control-value" id="val-sf-rotSpeed">0.030</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sf-rotSpeed"></div>
          <input type="range" id="sf-rotSpeed" min="0" max="0.1" step="0.005" value="0.03"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Center Glow</span><span class="control-value" id="val-sf-centerGlow">0.40</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sf-centerGlow"></div>
          <input type="range" id="sf-centerGlow" min="0" max="1" step="0.05" value="0.4"></div>
        </div>

        <div class="section-title">Color</div>
        <div class="control-group">
          <div class="control-label"><span>Saturation</span><span class="control-value" id="val-sf-saturation">0.92</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sf-saturation"></div>
          <input type="range" id="sf-saturation" min="0" max="1" step="0.01" value="0.92"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Hue Shift</span><span class="control-value" id="val-sf-hue">0.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-sf-hue"></div>
          <input type="range" id="sf-hue" min="0" max="1" step="0.01" value="0"></div>
        </div>
      </div>

      <!-- â˜… FRACTAL CONTROLS -->
      <div class="controls-section" id="controls-14">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-14"></div>

        <div class="section-title">Geometry</div>
        <div class="control-group">
          <div class="control-label"><span>Iterations</span><span class="control-value" id="val-fr-iterations">4</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-fr-iterations"></div>
          <input type="range" id="fr-iterations" min="1" max="8" step="1" value="4"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Fract Scale</span><span class="control-value" id="val-fr-fractScale">1.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-fr-fractScale"></div>
          <input type="range" id="fr-fractScale" min="1.1" max="3" step="0.1" value="1.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Zoom</span><span class="control-value" id="val-fr-zoom">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-fr-zoom"></div>
          <input type="range" id="fr-zoom" min="0.5" max="2" step="0.1" value="1"></div>
        </div>

        <div class="section-title">Rings</div>
        <div class="control-group">
          <div class="control-label"><span>Ring Frequency</span><span class="control-value" id="val-fr-ringFreq">8</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-fr-ringFreq"></div>
          <input type="range" id="fr-ringFreq" min="2" max="16" step="1" value="8"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Ring Speed</span><span class="control-value" id="val-fr-ringSpeed">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-fr-ringSpeed"></div>
          <input type="range" id="fr-ringSpeed" min="0" max="3" step="0.1" value="1"></div>
        </div>

        <div class="section-title">Color</div>
        <div class="control-group">
          <div class="control-label"><span>Color Speed</span><span class="control-value" id="val-fr-colorSpeed">0.40</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-fr-colorSpeed"></div>
          <input type="range" id="fr-colorSpeed" min="0" max="1" step="0.05" value="0.4"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Brightness</span><span class="control-value" id="val-fr-brightness">1.20</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-fr-brightness"></div>
          <input type="range" id="fr-brightness" min="0.5" max="3" step="0.1" value="1.2"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Falloff</span><span class="control-value" id="val-fr-falloff">1.20</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-fr-falloff"></div>
          <input type="range" id="fr-falloff" min="0.5" max="2" step="0.1" value="1.2"></div>
        </div>
      </div>

      <!-- â˜… MAZE LATTICE CONTROLS (Full version) -->
      <div class="controls-section" id="controls-15">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-15"></div>

        <div class="section-title">Maze Geometry</div>
        <div class="control-group">
          <div class="control-label"><span>Tube Width</span><span class="control-value" id="val-ml-tubeWidth">0.20</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ml-tubeWidth"></div>
          <input type="range" id="ml-tubeWidth" min="0.1" max="0.4" step="0.01" value="0.2"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Pattern Scale</span><span class="control-value" id="val-ml-patternScale">6.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ml-patternScale"></div>
          <input type="range" id="ml-patternScale" min="2" max="15" step="0.5" value="6"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Edge Width</span><span class="control-value" id="val-ml-edgeWidth">0.03</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ml-edgeWidth"></div>
          <input type="range" id="ml-edgeWidth" min="0.01" max="0.1" step="0.005" value="0.034"></div>
        </div>

        <div class="section-title">Animation</div>
        <div class="control-group">
          <div class="control-label"><span>Travel Speed</span><span class="control-value" id="val-ml-speed">0.25</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ml-speed"></div>
          <input type="range" id="ml-speed" min="0" max="1" step="0.01" value="0.25"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Rotation</span><span class="control-value" id="val-ml-rotationSpeed">0.25</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ml-rotationSpeed"></div>
          <input type="range" id="ml-rotationSpeed" min="0" max="0.5" step="0.01" value="0.25"></div>
        </div>

        <div class="section-title">Lighting &amp; Reflection</div>
        <div class="control-group">
          <div class="control-label"><span>Brightness</span><span class="control-value" id="val-ml-brightness">1.20</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ml-brightness"></div>
          <input type="range" id="ml-brightness" min="0.5" max="2" step="0.05" value="1.2"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Reflectivity</span><span class="control-value" id="val-ml-reflectivity">0.25</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ml-reflectivity"></div>
          <input type="range" id="ml-reflectivity" min="0" max="1" step="0.05" value="0.25"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Warmth</span><span class="control-value" id="val-ml-warmth">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ml-warmth"></div>
          <input type="range" id="ml-warmth" min="0" max="1" step="0.05" value="0.5"></div>
        </div>

        <div class="section-title">Effects</div>
        <div class="control-group">
          <div class="control-label"><span>Vignette</span><span class="control-value" id="val-ml-vignette">0.13</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ml-vignette"></div>
          <input type="range" id="ml-vignette" min="0" max="0.4" step="0.005" value="0.125"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Fog Distance</span><span class="control-value" id="val-ml-fogDistance">100</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ml-fogDistance"></div>
          <input type="range" id="ml-fogDistance" min="30" max="200" step="5" value="100"></div>
        </div>

        <div class="section-title">Quality</div>
        <div class="control-group">
          <div class="control-label"><span>Ray Steps</span><span class="control-value" id="val-ml-raySteps">64</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ml-raySteps"></div>
          <input type="range" id="ml-raySteps" min="32" max="128" step="8" value="64"></div>
        </div>

        <div class="section-title">Darkness & Contrast</div>
        <div class="control-group">
          <div class="control-label"><span>Darkness</span><span class="control-value" id="val-ml-darkness">0.60</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ml-darkness"></div>
          <input type="range" id="ml-darkness" min="0" max="1" step="0.05" value="0.6"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Contrast</span><span class="control-value" id="val-ml-contrast">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ml-contrast"></div>
          <input type="range" id="ml-contrast" min="0" max="1.5" step="0.05" value="0.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Ambient Light</span><span class="control-value" id="val-ml-ambient">0.60</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ml-ambient"></div>
          <input type="range" id="ml-ambient" min="0.1" max="1" step="0.05" value="0.6"></div>
        </div>
      </div>

      <!-- â˜… FLORAL THORNS CONTROLS -->
      <div class="controls-section" id="controls-16">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-16"></div>

        <div class="section-title">Mirror</div>
        <div class="control-group">
          <div class="control-label"><span>Mirror Scale</span><span class="control-value" id="val-ft-mirrorScale">0.25</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ft-mirrorScale"></div>
          <input type="range" id="ft-mirrorScale" min="0.1" max="0.5" step="0.01" value="0.25"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Mirror Offset</span><span class="control-value" id="val-ft-mirrorOffset">0.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ft-mirrorOffset"></div>
          <input type="range" id="ft-mirrorOffset" min="0.2" max="1" step="0.05" value="0.5"></div>
        </div>

        <div class="section-title">Animation</div>
        <div class="control-group">
          <div class="control-label"><span>Speed</span><span class="control-value" id="val-ft-speed">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ft-speed"></div>
          <input type="range" id="ft-speed" min="0" max="3" step="0.1" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Rotation Rate</span><span class="control-value" id="val-ft-rotationTime">0.02</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ft-rotationTime"></div>
          <input type="range" id="ft-rotationTime" min="0" max="0.1" step="0.005" value="0.02"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Z Rotation</span><span class="control-value" id="val-ft-rotationDepth">0.20</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ft-rotationDepth"></div>
          <input type="range" id="ft-rotationDepth" min="0" max="0.5" step="0.02" value="0.2"></div>
        </div>

        <div class="section-title">Fractal</div>
        <div class="control-group">
          <div class="control-label"><span>Layers</span><span class="control-value" id="val-ft-fractalLayers">6</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ft-fractalLayers"></div>
          <input type="range" id="ft-fractalLayers" min="3" max="8" step="1" value="6"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Glow</span><span class="control-value" id="val-ft-glowIntensity">0.75</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ft-glowIntensity"></div>
          <input type="range" id="ft-glowIntensity" min="0.3" max="1.5" step="0.05" value="0.75"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Fog Depth</span><span class="control-value" id="val-ft-fogDepth">0.90</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ft-fogDepth"></div>
          <input type="range" id="ft-fogDepth" min="0.5" max="1.5" step="0.1" value="0.9"></div>
        </div>

        <div class="section-title">Tone</div>
        <div class="control-group">
          <div class="control-label"><span>Exposure</span><span class="control-value" id="val-ft-exposure">5.0e7</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ft-exposure"></div>
          <input type="range" id="ft-exposure" min="10000000" max="100000000" step="5000000" value="50000000"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Gamma</span><span class="control-value" id="val-ft-gamma">0.45</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-ft-gamma"></div>
          <input type="range" id="ft-gamma" min="0.3" max="0.6" step="0.01" value="0.45"></div>
        </div>
      </div>

      <!-- â˜… COSMIC DISTORTION CONTROLS -->
      <div class="controls-section" id="controls-17">
        <div class="section-title">Presets</div>
        <div class="presets-grid" id="presets-17"></div>

        <div class="section-title">Animation</div>
        <div class="control-group">
          <div class="control-label"><span>Speed</span><span class="control-value" id="val-cd-speed">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cd-speed"></div>
          <input type="range" id="cd-speed" min="0.1" max="3" step="0.1" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Orbit Speed</span><span class="control-value" id="val-cd-orbitSpeed">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cd-orbitSpeed"></div>
          <input type="range" id="cd-orbitSpeed" min="0.1" max="3" step="0.1" value="1"></div>
        </div>

        <div class="section-title">Grid</div>
        <div class="control-group">
          <div class="control-label"><span>Grid Scale</span><span class="control-value" id="val-cd-gridScale">4.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cd-gridScale"></div>
          <input type="range" id="cd-gridScale" min="1" max="10" step="0.5" value="4"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Grid Threshold</span><span class="control-value" id="val-cd-gridThreshold">0.25</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cd-gridThreshold"></div>
          <input type="range" id="cd-gridThreshold" min="0.1" max="0.5" step="0.02" value="0.25"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Distortion</span><span class="control-value" id="val-cd-distortion">0.25</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cd-distortion"></div>
          <input type="range" id="cd-distortion" min="0.1" max="0.6" step="0.02" value="0.25"></div>
        </div>

        <div class="section-title">Effects</div>
        <div class="control-group">
          <div class="control-label"><span>Glow Intensity</span><span class="control-value" id="val-cd-glowIntensity">2.50</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cd-glowIntensity"></div>
          <input type="range" id="cd-glowIntensity" min="1" max="5" step="0.2" value="2.5"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Ring Frequency</span><span class="control-value" id="val-cd-ringFreq">10.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cd-ringFreq"></div>
          <input type="range" id="cd-ringFreq" min="3" max="25" step="1" value="10"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Angular Frequency</span><span class="control-value" id="val-cd-angularFreq">9.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cd-angularFreq"></div>
          <input type="range" id="cd-angularFreq" min="3" max="20" step="1" value="9"></div>
        </div>

        <div class="section-title">Color</div>
        <div class="control-group">
          <div class="control-label"><span>Hue</span><span class="control-value" id="val-cd-hue">0.05</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cd-hue"></div>
          <input type="range" id="cd-hue" min="0" max="1" step="0.02" value="0.05"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Saturation</span><span class="control-value" id="val-cd-saturation">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cd-saturation"></div>
          <input type="range" id="cd-saturation" min="0.3" max="2" step="0.1" value="1"></div>
        </div>
        <div class="control-group">
          <div class="control-label"><span>Brightness</span><span class="control-value" id="val-cd-brightness">1.00</span></div>
          <div class="slider-track"><div class="slider-fill" id="fill-cd-brightness"></div>
          <input type="range" id="cd-brightness" min="0.5" max="2" step="0.1" value="1"></div>
        </div>
      </div>

      <div class="tip-box">
        <strong>â˜… NEW:</strong> 6 bonus shaders - Spiral, Starfield, Fractal, Maze Lattice, Floral Thorns &amp; Cosmic Distortion! Press SPACE to pause.
      </div>
    </div>
  </div>
</div>

<!-- Export Modal -->
<div class="modal-overlay" id="export-modal">
  <div class="modal-content">
    <div class="modal-header">
      <span class="modal-title">SHADERTOY EXPORT</span>
      <button class="modal-close" id="modal-close">&times;</button>
    </div>
    <div class="modal-body">
      <pre class="code-preview" id="code-preview"></pre>
    </div>
    <div class="modal-footer">
      <button class="modal-btn secondary" id="modal-cancel">Cancel</button>
      <button class="modal-btn primary" id="modal-copy">Copy to Clipboard</button>
    </div>
  </div>
</div>

<!-- Audio Player -->
<audio id="bgm" loop preload="auto">
  <source src="1.mp3" type="audio/mpeg">
</audio>

<script>
// ============== SHADER SOURCES ==============

// â˜… NEW: Cosmic Mandala - Sacred geometry kaleidoscope
const cosmicMandalaShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform float u_symmetry, u_layers, u_complexity, u_ringscale;
uniform float u_rotspeed, u_pulsespeed, u_pulseamt, u_spiral;
uniform float u_glow, u_falloff, u_colorcycle, u_hue, u_saturation;
uniform float u_edgeglow, u_bloom, u_zoom;

#define PI 3.14159265359

vec3 hsv2rgb(vec3 c) {
  vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

float mandalaShape(vec2 p, float t, float layer) {
  float angle = atan(p.y, p.x);
  float radius = length(p);
  
  // Apply spiral twist
  angle += u_spiral * radius;
  
  // Symmetry folding
  float sym = u_symmetry;
  angle = mod(angle, 2.0 * PI / sym);
  angle = abs(angle - PI / sym);
  
  // Reconstruct position
  vec2 q = vec2(cos(angle), sin(angle)) * radius;
  
  // Layer-based pattern
  float pattern = 0.0;
  float scale = u_ringscale * (1.0 + layer * 0.5);
  
  // Rings
  float ring = abs(sin(radius * scale * 5.0 - t * u_pulsespeed));
  ring = pow(ring, u_complexity);
  
  // Petals
  float petals = abs(sin(angle * sym * 2.0 + t * 0.5));
  petals *= smoothstep(0.0, 0.5, radius);
  
  // Combine
  pattern = ring * 0.5 + petals * 0.5;
  pattern *= (1.0 + u_pulseamt * sin(t * u_pulsespeed * 2.0 + radius * 3.0));
  
  return pattern;
}

void mainImage(out vec4 O, vec2 fragCoord) {
  vec2 uv = (fragCoord - iResolution.xy * 0.5) / iResolution.y;
  uv /= u_zoom;
  
  float t = iTime * u_rotspeed;
  
  // Rotate entire mandala
  float c = cos(t * 0.3), s = sin(t * 0.3);
  uv = mat2(c, -s, s, c) * uv;
  
  vec3 col = vec3(0.0);
  float radius = length(uv);
  float angle = atan(uv.y, uv.x);
  
  // Multiple layers
  for (float i = 0.0; i < 10.0; i++) {
    if (i >= u_layers) break;
    
    float layerOffset = i * 0.2;
    vec2 p = uv * (1.0 + i * 0.15);
    
    // Rotate each layer differently
    float lt = t * (1.0 + i * 0.1);
    float lc = cos(lt * 0.2), ls = sin(lt * 0.2);
    p = mat2(lc, -ls, ls, lc) * p;
    
    float pattern = mandalaShape(p, iTime, i);
    
    // Color based on layer and position
    float hue = u_hue + i * 0.1 + radius * 0.2 + iTime * u_colorcycle * 0.1;
    vec3 layerCol = hsv2rgb(vec3(hue, u_saturation, 1.0));
    
    // Glow effect
    float glow = pattern * u_glow / (1.0 + pow(radius * u_falloff, 2.0));
    col += layerCol * glow * (1.0 - i / u_layers * 0.5);
  }
  
  // Edge glow
  float edgeDist = abs(sin(radius * 10.0 - iTime));
  col += vec3(0.5, 0.8, 1.0) * u_edgeglow * exp(-edgeDist * 5.0) / (1.0 + radius * 2.0);
  
  // Center glow
  col += vec3(1.0, 0.9, 0.8) * 0.3 / (1.0 + radius * radius * 20.0);
  
  // Bloom
  col += col * col * u_bloom;
  
  // Tone mapping
  col = col / (col + 1.0);
  col = pow(col, vec3(0.9));
  
  O = vec4(col, 1.0);
}

void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// â˜… NEW: Plasma Vortex - Electric energy swirls
const plasmaVortexShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform float u_arms, u_spin, u_tightness, u_coresize;
uniform float u_plasma, u_tendrils, u_noisescale, u_turbulence;
uniform float u_pulserate, u_waves, u_wavespeed;
uniform float u_colormode, u_hue, u_coreglow, u_bloom, u_zoom;

#define PI 3.14159265359

// Simplex-like noise
float hash(vec2 p) {
  return fract(sin(dot(p, vec2(127.1, 311.7))) * 43758.5453);
}

float noise(vec2 p) {
  vec2 i = floor(p);
  vec2 f = fract(p);
  f = f * f * (3.0 - 2.0 * f);
  return mix(
    mix(hash(i), hash(i + vec2(1.0, 0.0)), f.x),
    mix(hash(i + vec2(0.0, 1.0)), hash(i + vec2(1.0, 1.0)), f.x),
    f.y
  );
}

float fbm(vec2 p) {
  float f = 0.0;
  float amp = 0.5;
  for (int i = 0; i < 5; i++) {
    f += amp * noise(p);
    p *= 2.0;
    amp *= 0.5;
  }
  return f;
}

vec3 hsv2rgb(vec3 c) {
  vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

void mainImage(out vec4 O, vec2 fragCoord) {
  vec2 uv = (fragCoord - iResolution.xy * 0.5) / iResolution.y;
  uv /= u_zoom;
  
  float t = iTime;
  float radius = length(uv);
  float angle = atan(uv.y, uv.x);
  
  // Spinning vortex
  float spin = t * u_spin;
  angle += spin;
  angle += u_tightness * radius; // Spiral
  
  // Vortex arms
  float arms = sin(angle * u_arms + radius * u_tightness * 2.0 - t * u_spin * 3.0);
  arms = pow(abs(arms), 0.5) * sign(arms);
  
  // Plasma noise
  vec2 noiseCoord = uv * u_noisescale;
  noiseCoord += vec2(cos(t * 0.3), sin(t * 0.4)) * u_turbulence;
  float plasmaNoise = fbm(noiseCoord + t * 0.2);
  plasmaNoise += fbm(noiseCoord * 2.0 - t * 0.3) * 0.5;
  
  // Electric tendrils
  float tendrils = 0.0;
  for (float i = 0.0; i < 6.0; i++) {
    float a = angle + i * PI / 3.0 + t * 0.5;
    float tendril = sin(a * 3.0 + radius * 8.0 - t * 2.0);
    tendril *= exp(-radius * 2.0);
    tendrils += abs(tendril);
  }
  tendrils *= u_tendrils;
  
  // Energy waves
  float waves = sin(radius * u_waves * 10.0 - t * u_wavespeed * 3.0);
  waves *= exp(-radius * 1.5);
  waves = abs(waves);
  
  // Pulse
  float pulse = 1.0 + 0.3 * sin(t * u_pulserate);
  
  // Combine effects
  float energy = 0.0;
  energy += arms * u_plasma * (1.0 - radius * 0.5);
  energy += plasmaNoise * 0.5;
  energy += tendrils;
  energy += waves * 0.5;
  energy *= pulse;
  
  // Core glow
  float core = u_coreglow / (1.0 + pow(radius / u_coresize, 2.0) * 10.0);
  energy += core;
  
  // Coloring
  vec3 col;
  float hueShift = u_hue + radius * 0.5 + energy * 0.2;
  
  if (u_colormode < 1.0) {
    // Electric blue/purple
    col = hsv2rgb(vec3(0.6 + hueShift * 0.1, 0.8, energy));
    col += vec3(0.3, 0.5, 1.0) * core;
  } else if (u_colormode < 2.0) {
    // Fire/plasma
    col = hsv2rgb(vec3(0.05 + hueShift * 0.05 - energy * 0.1, 0.9, energy));
    col += vec3(1.0, 0.6, 0.2) * core;
  } else {
    // Rainbow cycle
    col = hsv2rgb(vec3(hueShift + t * 0.1, 0.85, energy));
    col += vec3(1.0, 1.0, 1.0) * core * 0.5;
  }
  
  // Bloom
  col += col * col * u_bloom;
  
  // Tone mapping
  col = col / (col + 0.8);
  col = pow(col, vec3(0.95));
  
  O = vec4(col, 1.0);
}

void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// Neon Spokes
const neonSpokesShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform vec4 iMouse;
uniform float u_speed, u_zoom, u_iterations, u_complexity, u_stepsize;
uniform float u_saturation, u_exposure;

void mainImage(out vec4 O, vec2 u) {
  vec2 p = iResolution.xy;
  vec2 uv = (u - p * .5) / p.y * u_zoom;
  
  vec3 rd = normalize(vec3(uv, 1.));
  float rotY = (iMouse.x / iResolution.x - .5) * 3.1416;
  mat2 rotYmat = mat2(cos(rotY), -sin(rotY), sin(rotY), cos(rotY));
  rd.xz = rotYmat * rd.xz;
  
  float z = 0.;
  O = vec4(0.);
  
  for(float i = 0.; i < 80.; i++) {
    if (i > u_iterations) break;
    vec3 pos = z * rd;
    vec3 v;
    pos.z += u_speed * iTime;
    float d = u_stepsize * length(max(v = cos(pos) - sin(pos).yzx, v.yzx * u_complexity));
    z += d;
    O.rgb += (cos(u_saturation * pos) + 1.) / d;
  }
  O /= O + u_exposure;
  O.a = 1.;
}
void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// Crystal Lattice
const crystalLatticeShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform vec4 iMouse;
uniform float u_speed, u_pathCurve, u_stepScale;
uniform float u_swirl, u_swirlFreq;
uniform float u_shapeSize, u_shapeMod;
uniform float u_glow, u_colorR, u_colorG, u_colorB;
uniform float u_exposure;

vec3 P(float z) { return vec3(cos(u_pathCurve*z), sin(u_pathCurve*z+.5)*.005, z); }
vec4 tanh4(vec4 x) { vec4 e=exp(2.*clamp(x,-10.,10.)); return (e-1.)/(e+1.); }

void mainImage(out vec4 O, vec2 C) {
  O = vec4(0.);
  vec3 p, X, ro, r = iResolution.xyx;
  float z = 0., t = iTime * u_speed, d = 0.1;
  
  for (float i = 0.; i < 60.; i++) {
    z += u_stepScale * d;
    ro = P(t);
    p = ro + z * normalize(vec3(C - .5*r.xy, r.y));
    p.z += t;
    
    float sa = sin(p.z*u_swirlFreq + t*.25) * u_swirl;
    float cs = cos(sa), ss = sin(sa);
    p.xy = mat2(cs,-ss,ss,cs) * p.xy;
    
    X = p;
    
    float xa = sin(t*.055)*.0011;
    float cx = cos(xa), sx = sin(xa);
    p.xz = mat2(cx,-sx,sx,cx) * p.xz;
    
    p = fract(p) - .5;
    
    float shape = (abs(p.x)+abs(p.y)+abs(p.z));
    float modulation = u_shapeSize * sin(X.z*.2+t*.55) * (X.y*u_shapeMod);
    d = max(shape - abs(modulation), 0.002);
    
    vec4 col = vec4(u_colorR, u_colorG, u_colorB, 0.);
    O += u_glow * (0.6 + 0.4*sin(length(X.xy)*0.5 + X.z*0.02 + col)) / (d * d * 50. + d);
  }
  
  O = tanh4(O/u_exposure);
  O = pow(O, vec4(1./2.2));
  O.a = 1.;
}
void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// Rainbow Nebula
const rainbowNebulaShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform vec4 iMouse;
uniform float u_speed, u_turbulence, u_iterations, u_scale;
uniform float u_detail, u_saturation, u_brightness, u_hue, u_exposure;

vec4 tanh4(vec4 x) { vec4 e=exp(2.*clamp(x,-10.,10.)); return (e-1.)/(e+1.); }

void mainImage(out vec4 O, vec2 fragCoord) {
  vec2 R = iResolution.xy;
  vec2 uv = (fragCoord - R * .5) / R.y;
  float t = iTime * u_speed * .25;
  float d = 0.01;
  vec4 o = vec4(0.);
  
  for (float i = 0.; i < 80.; i++) {
    vec3 p = vec3(uv * d, d + t * 4.);
    p -= sin(p.z + t + p.xyz * .5) * u_turbulence;
    float s = u_scale - length(p.xy);
    
    float n = 0.06;
    for (int j = 0; j < 5; j++) {
      if (n >= u_iterations) break;
      p.yx *= mat2(cos(t*.1), -sin(t*.1), sin(t*.1), cos(t*.1));
      s -= abs(dot(sin(p.z + t + p * n * 20.), vec3(.33)));
      n *= 2.;
    }
    
    s = .01 + abs(s) * u_detail;
    d += s;
    
    float len = max(length(uv), 0.01);
    o += d * u_brightness / len / s;
    
    vec4 c = cos(vec4(
      u_hue - t + 1.,
      u_hue * 2. - t * .8 + 5.,
      d * u_saturation + t * 1.4 + 2.,
      d + t * 3. + 4.
    )) + 1.;
    
    o += d * .05 * vec4(4.,1.,1.,0.) / len;
    o.yz += c.xy * vec2(c.z, c.w + .5) * 1.5;
  }
  
  O = tanh4(o / d / u_exposure);
  O.a = 1.;
}
void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// Inferno Fire
const infernoFireShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform float u_flameHeight, u_flameWidth, u_flameIntensity, u_timeScale;
uniform float u_sparkCount, u_smokeOpacity, u_noiseOctaves;

vec3 fmod289(vec3 x){return x-floor(x*(1./289.))*289.;}
vec4 fmod289(vec4 x){return x-floor(x*(1./289.))*289.;}
vec4 permute(vec4 x){return fmod289(((x*34.)+1.)*x);}

float snoise(vec3 v){
  const vec2 C = vec2(1./6.,1./3.); const vec4 D = vec4(0.,.5,1.,2.);
  vec3 i = floor(v + dot(v, C.yyy)); vec3 x0 = v - i + dot(i, C.xxx);
  vec3 g = step(x0.yzx, x0.xyz); vec3 l = 1. - g;
  vec3 i1 = min(g.xyz, l.zxy); vec3 i2 = max(g.xyz, l.zxy);
  vec3 x1 = x0 - i1 + C.xxx; vec3 x2 = x0 - i2 + C.yyy;
  vec3 x3 = x0 - D.yyy; i = fmod289(i);
  vec4 p = permute(permute(permute(i.z + vec4(0., i1.z, i2.z, 1.))
      + i.y + vec4(0., i1.y, i2.y, 1.))+ i.x + vec4(0., i1.x, i2.x, 1.));
  float n_ = .142857142857; vec3 ns = n_ * D.wyz - D.xzx;
  vec4 j = p - 49. * floor(p * ns.z * ns.z);
  vec4 x_ = floor(j * ns.z); vec4 y_ = floor(j - 7. * x_);
  vec4 x = x_ * ns.x + ns.yyyy; vec4 y = y_ * ns.x + ns.yyyy;
  vec4 h = 1. - abs(x) - abs(y);
  vec4 b0 = vec4(x.xy, y.xy); vec4 b1 = vec4(x.zw, y.zw);
  vec4 s0 = floor(b0) * 2. + 1.;vec4 s1 = floor(b1) * 2. + 1.;
  vec4 sh = -step(h, vec4(0.));
  vec4 a0 = b0.xzyw + s0.xzyw * sh.xxyy; vec4 a1 = b1.xzyw + s1.xzyw * sh.zzww;
  vec3 p0 = vec3(a0.xy, h.x); vec3 p1 = vec3(a0.zw, h.y);
  vec3 p2 = vec3(a1.xy, h.z); vec3 p3 = vec3(a1.zw, h.w);
  vec4 norm = 1./sqrt(vec4(dot(p0,p0),dot(p1,p1),dot(p2,p2),dot(p3,p3)));
  p0*=norm.x;p1*=norm.y;p2*=norm.z;p3*=norm.w;
  vec4 m = max(.6-vec4(dot(x0,x0),dot(x1,x1),dot(x2,x2),dot(x3,x3)),0.); m=m*m;
  return 42.*dot(m*m, vec4(dot(p0,x0),dot(p1,x1),dot(p2,x2),dot(p3,x3)));
}

float prng(vec2 seed) {
  seed = fract(seed * vec2(5.3983, 5.4427));
  seed += dot(seed.yx, seed.xy + vec2(21.5351, 14.3137));
  return fract(seed.x * seed.y * 95.4337);
}

float noiseStack(vec3 pos, float octaves, float falloff) {
  float noise = snoise(pos); float off = 1.;
  if (octaves > 1.) {pos *= 2.;off *= falloff; noise = (1.-off)*noise + off*snoise(pos);}
  if (octaves > 2.) {pos *= 2.;off *= falloff; noise = (1.-off)*noise + off*snoise(pos);}
  if (octaves > 3.) {pos *= 2.;off *= falloff; noise = (1.-off)*noise + off*snoise(pos);}
  if (octaves > 4.) {pos *= 2.;off *= falloff; noise = (1.-off)*noise + off*snoise(pos);}
  return (1.+noise)/2.;
}

vec2 noiseStackUV(vec3 pos, float octaves, float falloff) {
  float dA = noiseStack(pos, octaves, falloff);
  float dB = noiseStack(pos + vec3(3984.293, 423.21, 5235.19), octaves, falloff);
  return vec2(dA, dB);
}

void mainImage(out vec4 fragColor, vec2 fragCoord) {
  vec2 uv = fragCoord.xy/iResolution.xy;
  float PI = 3.14159265;
  float ypartClip = uv.y * u_flameHeight;
  float ypartClippedFalloff = clamp(u_flameHeight - ypartClip, 0., 1.);
  float ypartClipped = min(ypartClip, 1.);
  float ypartClippedn = 1.-ypartClipped;
  float xfuel = u_flameWidth * (1.-abs(2.*uv.x-1.));
  float realTime = u_timeScale * iTime;
  vec2 coordScaled = 6.*uv-.2;
  vec3 position = vec3(coordScaled,0.)+vec3(1223.,6434.,8425.);
  vec3 flow = vec3(4.1*(.5-uv.x)*pow(ypartClippedn,4.),-2.*xfuel*pow(ypartClippedn,64.),0.);
  vec3 timing = realTime * vec3(0., -1.7, 1.1) + flow;
  vec3 displacePos = vec3(1.,.5,1.)*2.4*position+realTime*vec3(.01,-.7,1.3);
  vec3 displace3 = vec3(noiseStackUV(displacePos, 2., .4), 0.);
  vec3 noiseCoord = vec3(2.,1.,1.)*position+timing+.4*displace3;
  float noise = noiseStack(noiseCoord, u_noiseOctaves, .4);
  float flames = pow(ypartClipped,.3*xfuel)*pow(noise,.3*xfuel);
  float f = ypartClippedFalloff*pow(1.-flames*flames*flames,8.);
  float fire = u_flameIntensity*(pow(f,3.)+f);
  float smokeNoise = .5+snoise(.4*(position+vec3(0.,1.,0.))+timing*vec3(1.,.8,-.5))/2.;
  float smoke = u_smokeOpacity*pow(xfuel,3.)*pow(uv.y,2.)*(smokeNoise+.4*(1.-noise));
  float sparkGridSize = u_sparkCount;
  vec2 sparkCoord = uv*300.-vec2(.0,190.*realTime);
  sparkCoord -= 30.*noiseStackUV(.01*vec3(sparkCoord,30.*iTime),1.,.4);
  sparkCoord += 100.*flow.xy;
  if (mod(sparkCoord.y/sparkGridSize,2.)<1.) sparkCoord.x +=.5*sparkGridSize;
  vec2 sparkGridIndex = floor(sparkCoord/sparkGridSize);
  float sparkRandom = prng(sparkGridIndex);
  float sparkLife=min(10.*(1.-min((sparkGridIndex.y+(190.*realTime/sparkGridSize))/(24.-20.*sparkRandom),1.)),1.);
  float sparks = 0.;
  if (sparkLife > 0.) {
    float sparkSize = xfuel*xfuel*sparkRandom*.04;
    float sparkRadians = 999.*sparkRandom*2.*PI+2.*iTime;
    vec2 sparkCircular = vec2(sin(sparkRadians), cos(sparkRadians));
    vec2 sparkOffset = (.5-sparkSize)*sparkGridSize*sparkCircular;
    vec2 sparkfmod = mod(sparkCoord+sparkOffset,sparkGridSize)-.5*sparkGridSize;
    float sparksGray = max(0., 1. - length(sparkfmod) / (sparkSize * sparkGridSize));
    sparks = sparkLife * sparksGray;
  }
  float o = max(fire, sparks);
  fragColor = o*vec4(1.,.5,.0,1.)+vec4(.9,.8,.7,1.)*smoke;
  fragColor.a = 1.;
}
void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// â˜… NEW: Wormhole - Cosmic tunnel with stars
const wormholeShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform vec4 iMouse;
uniform float u_speed, u_sway, u_twist, u_starStrength, u_starDensity;
uniform float u_starSize, u_twinkle, u_tunnelRadius, u_caveNoise, u_wallGlow;
uniform float u_hueShift, u_saturation, u_colorCycle, u_exposure;
uniform float u_bloom, u_vignette, u_grain;

#define PI 3.14159265359
const float EPSILON = 1e-5;

vec3 tanh3(vec3 x) {
  vec3 e2x = exp(2.0 * clamp(x, -10.0, 10.0));
  return (e2x - 1.0) / (e2x + 1.0);
}

mat2 rot2(float a) {
  float s = sin(a), c = cos(a);
  return mat2(c, -s, s, c);
}

vec3 path(float v, float sway, float twist) {
  return vec3(
    cos(v * 0.2 * twist + sin(v * 0.1) * 2.0) * 3.0 * sway,
    sin(v * 0.2 * twist + cos(v * 0.3)) * 3.0 * sway,
    v
  );
}

vec3 hash33(vec3 p3) {
  p3 = fract(p3 * vec3(0.1031, 0.1030, 0.0973));
  p3 += dot(p3, p3.yxz + 33.33);
  return fract((p3.xxy + p3.yxx) * p3.zyx);
}

float hash13(vec3 p3) {
  p3 = fract(p3 * 0.1031);
  p3 += dot(p3, p3.zyx + 31.32);
  return fract((p3.x + p3.y) * p3.z);
}

float hash12(vec2 p) {
  vec3 p3 = fract(vec3(p.xyx) * 0.1031);
  p3 += dot(p3, p3.yzx + 33.33);
  return fract((p3.x + p3.y) * p3.z);
}

float fbm(vec3 p) {
  float amp = 1.0, freq = 1.0, n = 0.0;
  for(int i = 0; i < 5; i++) {
    n += amp * abs(dot(cos(p * freq), vec3(0.06)));
    amp *= 0.5; freq *= 2.0;
  }
  return n;
}

vec3 hueShift(vec3 col, float shift) {
  vec3 k = vec3(0.57735);
  float cosAngle = cos(shift);
  return col * cosAngle + cross(k, col) * sin(shift) + k * dot(k, col) * (1.0 - cosAngle);
}

vec3 adjustSaturation(vec3 col, float sat) {
  float grey = dot(col, vec3(0.299, 0.587, 0.114));
  return mix(vec3(grey), col, sat);
}

void mainImage(out vec4 O, in vec2 I) {
  vec2 R = iResolution.xy;
  vec2 uv = (I * 2.0 - R) / R.y;
  vec2 m = iMouse.xy / R * 5.0;
  float t = iTime * u_speed;

  vec3 ro = path(t, u_sway, u_twist);
  vec3 ta = path(t + 1.0, u_sway, u_twist);
  vec3 front = normalize(ta - ro);
  vec3 up = vec3(0.0, 1.0, 0.0);
  vec3 right = normalize(cross(front, up));
  up = cross(right, front);
  vec3 rd = mat3(right, up, front) * normalize(vec3(uv, 1.0));

  float zMax = 60.0, z = 0.1;
  vec3 col = vec3(0.0);
  float starCell = u_starDensity;

  for(int i = 0; i < 100; i++) {
    vec3 p = ro + rd * z;
    if(iMouse.z > 0.0) { p.xz *= rot2(m.x); p.yz *= rot2(m.y); }

    vec3 q = p; q.z += t * 3.0;
    vec3 id = floor(q / starCell);
    vec3 localPos = fract(q / starCell) - 0.5;

    float d = 1e10;
    vec3 starOffset = (hash33(id) - 0.5) * 0.8;
    float twinkle = hash13(id + floor(iTime * (2.0 + hash13(id) * 3.0))) * u_twinkle;
    float starDist = length(localPos * starCell - starOffset * starCell) - u_starSize + twinkle;
    starDist = max(0.001, starDist);
    d = min(d, starDist);

    vec3 pathPos = path(p.z, u_sway, u_twist);
    float caveDist = length(p.xy - pathPos.xy) - u_tunnelRadius;
    caveDist = abs(caveDist) + 0.01;
    caveDist += fbm(p * 2.0 + t * 2.0) * u_caveNoise;
    d = min(d, caveDist);
    d = d * (1.0 - hash12(uv * 100.0 + iTime) * 0.15);

    float k = sin(p.z + p.x * 0.5 + p.y * 0.3) * 0.5 + 0.5;
    vec3 starColor = 1.1 + sin(vec3(3.0, 2.0, 1.0) + p.x + p.z + hash13(id) * 6.28);
    float wallContrib = smoothstep(u_tunnelRadius + 1.0, u_tunnelRadius - 0.5, length(p.xy - pathPos.xy));
    vec3 wallColor = vec3(0.1, 0.3, 0.8) * wallContrib * u_wallGlow;

    col += u_starStrength * k * starColor / max(d, EPSILON);
    col += wallColor / max(caveDist * 10.0, EPSILON) * 0.1;

    if(d < EPSILON || z > zMax) break;
    z += d;
  }

  col = tanh3(col / 100.0);
  float cycleHue = u_hueShift + iTime * u_colorCycle;
  col = hueShift(col, cycleHue);
  col = adjustSaturation(col, u_saturation);
  col *= u_exposure;
  col += col * col * u_bloom;
  float vig = 1.0 - length(uv) * u_vignette;
  col *= smoothstep(0.0, 1.0, vig);
  float grain = (hash12(uv * 1000.0 + iTime * 100.0) - 0.5) * u_grain;
  col += grain;
  col = clamp(col, 0.0, 1.0);
  O = vec4(col, 1.0);
}
void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// â˜… NEW: Neon Lines - Flowing neon lines that move around
const neonLinesShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform float u_speed, u_lineCount, u_lineWidth, u_glow;
uniform float u_waveAmp, u_waveFreq, u_hue, u_saturation;
uniform float u_bgdark, u_pulse, u_trail;

vec3 hsv2rgb(vec3 c) {
  vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

float hash(float n) { return fract(sin(n) * 43758.5453); }

void mainImage(out vec4 fragColor, in vec2 fragCoord) {
  vec2 uv = (fragCoord - 0.5 * iResolution.xy) / iResolution.y;
  float t = iTime * u_speed;
  vec3 col = vec3(u_bgdark * 0.02);

  float numLines = u_lineCount;
  for (float i = 0.0; i < 20.0; i++) {
    if (i >= numLines) break;

    float seed = hash(i * 127.1);
    float seed2 = hash(i * 311.7);

    // Line path - sinusoidal with variation
    float freq = u_waveFreq * (0.5 + seed);
    float amp = u_waveAmp * (0.3 + seed2 * 0.7);
    float phase = seed * 6.28 + t * (0.5 + seed * 0.5);

    // Horizontal moving lines
    float lineY = sin(uv.x * freq + phase) * amp;
    lineY += (seed - 0.5) * 1.5; // Vertical offset

    // Distance to line
    float d = abs(uv.y - lineY);

    // Glow effect
    float lineGlow = u_lineWidth / (d + 0.001);
    lineGlow = pow(lineGlow, 1.5) * u_glow * 0.1;

    // Pulse
    float pulse = 0.5 + 0.5 * sin(t * u_pulse + i * 1.5);
    lineGlow *= 0.5 + pulse * 0.5;

    // Trail effect - fade based on x position
    float trail = smoothstep(-1.5, 0.5, uv.x + sin(t + seed * 6.28) * u_trail);
    lineGlow *= trail;

    // Color
    float hue = u_hue + i * 0.08 + t * 0.05;
    vec3 lineCol = hsv2rgb(vec3(hue, u_saturation, 1.0));

    col += lineCol * lineGlow;
  }

  // Add some bloom
  col = pow(col, vec3(0.9));
  col = clamp(col, 0.0, 1.0);

  fragColor = vec4(col, 1.0);
}
void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// â˜… NEW: Cyber Waves - Digital ocean waves with grid overlay
const cyberWavesShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform float u_speed, u_waveHeight, u_waveScale, u_gridSize;
uniform float u_gridGlow, u_hue, u_saturation, u_perspective;
uniform float u_fogDensity, u_scanlines, u_chromatic;

vec3 hsv2rgb(vec3 c) {
  vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

float wave(vec2 p, float t) {
  float w = 0.0;
  w += sin(p.x * 2.0 + t) * 0.5;
  w += sin(p.x * 3.0 - p.y * 2.0 + t * 1.3) * 0.25;
  w += sin(p.y * 4.0 + t * 0.7) * 0.125;
  w += sin((p.x + p.y) * 5.0 + t * 1.5) * 0.0625;
  return w;
}

void mainImage(out vec4 fragColor, in vec2 fragCoord) {
  vec2 uv = (fragCoord - 0.5 * iResolution.xy) / iResolution.y;
  float t = iTime * u_speed;

  // Perspective transform for ground plane
  vec3 ro = vec3(0.0, 2.0 + u_perspective, 0.0);
  vec3 rd = normalize(vec3(uv.x, uv.y - 0.2, 1.0));

  // Plane intersection
  float d = -ro.y / rd.y;
  vec3 col = vec3(0.0);

  if (d > 0.0 && rd.y < 0.0) {
    vec3 p = ro + rd * d;
    p.z += t * 3.0;

    // Wave displacement
    float w = wave(p.xz * u_waveScale, t) * u_waveHeight;

    // Grid lines
    vec2 grid = abs(fract(p.xz * u_gridSize) - 0.5);
    float gridLine = min(grid.x, grid.y);
    float gridGlow = 0.02 / (gridLine + 0.01) * u_gridGlow;

    // Wave contribution to grid brightness
    gridGlow *= 1.0 + w * 2.0;

    // Distance fog
    float fog = exp(-d * u_fogDensity * 0.05);
    gridGlow *= fog;

    // Color based on wave height and position
    float hue = u_hue + w * 0.2 + p.z * 0.01;
    vec3 gridCol = hsv2rgb(vec3(hue, u_saturation, 1.0));

    col += gridCol * gridGlow * 0.3;

    // Horizon glow
    float horizon = exp(-abs(uv.y + 0.1) * 8.0);
    col += hsv2rgb(vec3(u_hue + 0.1, 0.7, horizon * 0.5));
  }

  // Sky gradient
  float sky = smoothstep(-0.1, 0.3, uv.y);
  col += hsv2rgb(vec3(u_hue + 0.5, 0.3, sky * 0.1));

  // Scanlines
  col *= 1.0 - u_scanlines * 0.2 * sin(fragCoord.y * 3.0);

  // Chromatic aberration
  if (u_chromatic > 0.0) {
    col.r *= 1.0 + length(uv) * u_chromatic * 0.1;
    col.b *= 1.0 - length(uv) * u_chromatic * 0.05;
  }

  col = clamp(col, 0.0, 1.0);
  fragColor = vec4(col, 1.0);
}
void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// â˜… NEW: Dark Transit - Low tech tunnel (by diatribes, golfed by FabriceNeyret2)
const darkTransitShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform float u_speed, u_radius, u_scoops, u_detail, u_orb;
uniform float u_brightness, u_saturation, u_bgdark;

#define T (iTime * u_speed + 5. + 5.*sin(iTime*.3))
#define P(z) vec3(12.* cos((z)*vec2(.1,.12)), z)

float A(float F, float H, float K, vec3 p) {
  return abs(dot(sin(F*p*K), vec3(H))) / K;
}

void mainImage(out vec4 o, in vec2 u) {
  float t,s,i,d,e;
  vec3 c = vec3(0.0);
  vec2 r = iResolution;
  u = (u - r/2.) / r.y;
  
  vec3 p = P(T),
       Z = normalize(P(T+4.) - p),
       X = normalize(vec3(Z.z, 0, -Z.x)),
       D = vec3(u, 1) * mat3(-X, cross(X, Z), Z);
  
  for(float i = 0.; i < 28.; i++) {
    if (d > 30.) break;
    vec3 X2 = P(p.z);
    t = sin(iTime);
    e = length(p - vec3(X2.x + t, X2.y + t*2., 6.+T + t*2.)) - 0.01;
    e *= u_orb;
    s = cos(p.z*.6)*2.+ u_radius
      - min(length(p.xy - X2.x - 6.), length((p-X2).xy))
      + A(4., u_scoops, .1, p)
      + A(T+8., u_detail, 2., p);
    s = min(e, .01 + .3*abs(s));
    p += D * s;
    d += s;
    c += 1./s + 10.*vec3(1, 2, 5)/max(e + .4, .6);
  }
  
  o.rgb = c * c * u_brightness / 1e6;
  o.rgb = mix(vec3(length(o.rgb) * u_bgdark), o.rgb, u_saturation);
  o.a = 1.;
}
void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// â˜… NEW: Neon Grid - Electric cyberpunk grid with glow
const neonGridShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform float u_speed, u_gridsize, u_linethick, u_glow;
uniform float u_pulse, u_depth, u_hue, u_saturation;
uniform float u_bgdark, u_scanlines, u_chromatic;

vec3 hsv2rgb(vec3 c) {
  vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

void mainImage(out vec4 fragColor, in vec2 fragCoord) {
  vec2 uv = (fragCoord - 0.5 * iResolution.xy) / iResolution.y;
  float t = iTime * u_speed;
  
  // Perspective grid
  vec3 ro = vec3(0, 1.5, t * 2.);
  vec3 rd = normalize(vec3(uv.x, uv.y - 0.3, 1.0));
  
  // Ground plane intersection
  float d = -ro.y / rd.y;
  vec3 p = ro + rd * max(d, 0.0);
  
  // Grid pattern
  vec2 grid = abs(fract(p.xz * u_gridsize) - 0.5);
  float line = min(grid.x, grid.y);
  float thick = u_linethick * (1.0 + 0.5 * sin(t * u_pulse));
  
  // Distance fade
  float fade = exp(-d * 0.03 * u_depth);
  
  // Glow effect
  float glow = thick / (line + 0.001);
  glow = pow(glow, 1.5) * u_glow * fade;
  glow *= smoothstep(0.0, 0.1, d);
  
  // Pulse waves
  float wave = sin(p.z * 0.5 - t * 3.) * 0.5 + 0.5;
  glow *= 0.5 + wave * 0.5;
  
  // Color
  float hue = u_hue + p.z * 0.02 + t * 0.1;
  vec3 col = hsv2rgb(vec3(hue, u_saturation, 1.0)) * glow;
  
  // Horizon glow
  float horizon = exp(-abs(uv.y + 0.1) * 5.) * 0.5;
  col += hsv2rgb(vec3(hue + 0.3, 0.8, horizon));
  
  // Scanlines
  col *= 1.0 - u_scanlines * 0.3 * sin(fragCoord.y * 2.0);
  
  // Chromatic aberration
  if (u_chromatic > 0.0) {
    vec2 offset = uv * u_chromatic * 0.02;
    col.r *= 1.0 + length(offset);
    col.b *= 1.0 - length(offset) * 0.5;
  }
  
  // Background
  vec3 bg = vec3(u_bgdark * 0.02);
  col = max(col, bg);
  
  fragColor = vec4(col, 1.0);
}
void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// â˜… NEW: Electric Arcs - Lightning and plasma arcs
const electricArcsShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform float u_arcs, u_speed, u_thickness, u_glow;
uniform float u_branch, u_jitter, u_hue, u_saturation;
uniform float u_bgdark, u_pulse, u_spread;

vec3 hsv2rgb(vec3 c) {
  vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

float hash(vec2 p) {
  return fract(sin(dot(p, vec2(127.1, 311.7))) * 43758.5453);
}

float noise(vec2 p) {
  vec2 i = floor(p);
  vec2 f = fract(p);
  f = f * f * (3.0 - 2.0 * f);
  return mix(mix(hash(i), hash(i + vec2(1,0)), f.x),
             mix(hash(i + vec2(0,1)), hash(i + vec2(1,1)), f.x), f.y);
}

float fbm(vec2 p) {
  float v = 0.0, a = 0.5;
  for (int i = 0; i < 5; i++) {
    v += a * noise(p);
    p *= 2.0;
    a *= 0.5;
  }
  return v;
}

float lightning(vec2 uv, float seed, float t) {
  float y = uv.y;
  float x = uv.x;
  
  // Main arc path with noise displacement
  float path = sin(y * 3.0 + seed * 10.0) * 0.3;
  path += fbm(vec2(y * 5.0 + t * u_speed, seed * 100.0)) * u_jitter;
  
  // Branching
  float branch = 0.0;
  for (float i = 0.0; i < 3.0; i++) {
    float by = y - 0.3 - i * 0.2;
    if (by > 0.0) {
      float bp = path + fbm(vec2(by * 8.0 + t, seed * 50.0 + i)) * 0.4;
      bp += (by * by) * sign(hash(vec2(seed, i)) - 0.5) * u_branch;
      float bd = abs(x - bp);
      branch += u_thickness * 0.3 / (bd + 0.01);
    }
  }
  
  // Main bolt
  float dist = abs(x - path);
  float bolt = u_thickness / (dist + 0.005);
  
  // Glow
  bolt = pow(bolt, 1.2) * u_glow;
  
  return bolt + branch * u_branch;
}

void mainImage(out vec4 fragColor, in vec2 fragCoord) {
  vec2 uv = (fragCoord - 0.5 * iResolution.xy) / iResolution.y;
  float t = iTime;
  
  vec3 col = vec3(u_bgdark * 0.02);
  
  // Multiple arcs
  float numArcs = u_arcs;
  for (float i = 0.0; i < 8.0; i++) {
    if (i >= numArcs) break;
    
    float seed = i * 0.1 + floor(t * 0.5 + i * 0.3);
    float offsetX = (i - numArcs * 0.5) * u_spread;
    vec2 arcUV = uv - vec2(offsetX, 0.0);
    
    // Pulse
    float pulse = 0.5 + 0.5 * sin(t * u_pulse + i * 2.0);
    
    float arc = lightning(arcUV, seed, t) * pulse;
    
    // Color variation per arc
    float hue = u_hue + i * 0.05;
    vec3 arcCol = hsv2rgb(vec3(hue, u_saturation, 1.0));
    
    col += arcCol * arc * 0.15;
  }
  
  // Core brightness boost
  col = pow(col, vec3(0.8));
  
  // Clamp and output
  col = clamp(col, 0.0, 1.0);
  
  fragColor = vec4(col, 1.0);
}
void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// â˜… Spiral - Polar coordinate spirals
const spiralShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform float u_arms, u_twist, u_scale, u_speed, u_pulse;
uniform float u_hue, u_noise, u_vignette, u_sharpness, u_turbulence, u_glow;

float hash(vec2 p){return fract(sin(dot(p,vec2(127.1,311.7)))*43758.5453);}
float noise(vec2 p){vec2 i=floor(p),f=fract(p);f=f*f*(3.-2.*f);return mix(mix(hash(i),hash(i+vec2(1,0)),f.x),mix(hash(i+vec2(0,1)),hash(i+vec2(1,1)),f.x),f.y);}
float fbm(vec2 p){float v=0.,a=.5;for(int i=0;i<5;i++){v+=a*noise(p);p*=2.;a*=.5;}return v;}

vec3 hsv2rgb(vec3 c) {
  vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
  vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
  return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

void mainImage(out vec4 fragColor, vec2 fragCoord){
  vec2 uv=(fragCoord-.5*iResolution)/min(iResolution.x,iResolution.y)*u_scale;
  float time=iTime*u_speed;
  if(u_turbulence>0.0) uv+=(vec2(fbm(uv*2.+time*.3),fbm(uv*2.+time*.3+100.))-.5)*u_turbulence*.5;
  float r=length(uv),angle=atan(uv.y,uv.x);
  float spiral=pow(sin(angle*u_arms+r*u_twist*10.-time*2.)*.5+.5,u_sharpness);
  float rings=pow(sin(r*20.-time*3.)*.5+.5,2.);
  float pattern=mix(spiral,rings,u_pulse);
  pattern=mix(pattern,pattern*(.5+fbm(uv*3.+time*.5)),u_noise);

  vec3 col1 = hsv2rgb(vec3(u_hue, 0.9, 1.0));
  vec3 col2 = hsv2rgb(vec3(u_hue + 0.3, 0.8, 0.9));
  vec3 bgColor = vec3(0.04, 0.04, 0.1);

  vec3 col=mix(bgColor,col1,pattern*.7);
  col=mix(col,col2,pow(pattern,2.)*.5);
  if(u_glow>0.5) col+=col1*exp(-r*2.)*pattern*.5;
  col*=clamp(1.-r*u_vignette,0.,1.);
  fragColor=vec4(pow(col,vec3(.8)),1.);
}
void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// â˜… Starfield - Volumetric cosmic fractals
const starfieldShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform float u_volSteps, u_stepSize, u_iterations, u_brightness, u_distFading;
uniform float u_saturation, u_trailLayers, u_trailIntensity, u_flowSpeed, u_rotSpeed, u_centerGlow, u_hue;

mat2 rot(float a){float c=cos(a),s=sin(a);return mat2(c,-s,s,c);}
vec3 hash33(vec3 p){p=fract(p*vec3(443.897,441.423,437.195));p+=dot(p,p.yzx+19.19);return fract((p.xxy+p.yxx)*p.zyx);}

vec3 cosmicPal(float t, float hueShift){
  vec3 a=vec3(.5,.3,.6),b=vec3(.5,.7,.4),c=vec3(1.,.8,.6),d=vec3(.1,.6,.9)+hueShift;
  return a+b*cos(6.28318*(c*t+d));
}

float streamTrail(vec2 uv,vec2 p1,vec2 p2,float w){
  vec2 pa=uv-p1,ba=p2-p1;
  return exp(-length(pa-ba*clamp(dot(pa,ba)/dot(ba,ba),0.,1.))*w);
}

void mainImage(out vec4 fragColor, vec2 fragCoord){
  vec2 uv=(fragCoord-.5*iResolution)/min(iResolution.x,iResolution.y);
  uv*=1.8+.001*cos(uv.y-.4*iTime);uv.y+=.03*cos(iTime*.8);
  vec3 ro=vec3(.5,.3,.2),rd=normalize(vec3(uv*.7,1.));
  float s=.1,fade=1.;vec3 v=vec3(0.);
  for(int r=0;r<30;r++){
    if(float(r)>=u_volSteps)break;
    vec3 p=ro+s*rd*.5;p=abs(vec3(.8)-mod(p,vec3(1.6)));
    float pa=0.,a=0.;
    for(int i=0;i<25;i++){
      if(float(i)>=u_iterations)break;
      p=abs(p)/dot(p,p)-.52;
      vec2 rxy=rot(iTime*u_rotSpeed)*p.xy;p=vec3(rxy,p.z);
      vec2 rxz=rot(iTime*u_rotSpeed*.67)*p.xz;p=vec3(rxz.x,p.y,rxz.y);
      a+=abs(length(p)-pa);pa=length(p);
    }
    float dm=max(0.,.25-a*a*.001);a*=a*a;
    if(r>6)fade*=1.-dm;
    v+=fade;v+=vec3(s,s*s,s*s*s)*a*u_brightness*fade;
    fade*=u_distFading;s+=u_stepSize;
  }
  v=mix(vec3(length(v)),v,u_saturation)*.015;
  vec3 streamCol=vec3(0.);float time=iTime*u_flowSpeed;
  for(int il=0;il<15;il++){
    float layer=float(il);
    if(layer>=u_trailLayers)break;
    float t=time+layer*.5;
    vec2 p1=vec2(.3*sin(t*.8+layer),.2*cos(t*.6+layer*.3));
    vec2 p2=vec2(.4*sin(t*.9+layer+1.),.3*cos(t*.7+layer*.4+2.));
    float trail=streamTrail(uv,p1,p2,25.+15.*sin(layer+iTime*.4));
    streamCol+=cosmicPal(layer*.15+length(uv)*.2, u_hue)*trail*(.3+.2*sin(layer+iTime));
  }
  vec3 finalCol=v+streamCol*u_trailIntensity;
  finalCol+=cosmicPal(iTime*.1, u_hue)*u_centerGlow*exp(-3.*length(uv));
  finalCol+=.09*cosmicPal(length(uv)*.5+iTime*.2, u_hue);
  finalCol=pow(.71-exp(-finalCol*.727),vec3(.727));
  fragColor=vec4(finalCol,1.);
}
void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// â˜… Fractal - IQ palette fractal rings
const fractalShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform float u_iterations, u_fractScale, u_ringFreq, u_ringSpeed;
uniform float u_colorSpeed, u_brightness, u_falloff, u_zoom;

void mainImage(out vec4 fragColor, vec2 fragCoord){
  vec2 R=iResolution,U=(fragCoord*2.-R)/R.y*u_zoom;
  vec4 O=vec4(0.);
  float l=length(U);
  float d;
  for(int i=0;i<8;i++){
    if(float(i)>=u_iterations)break;
    U=fract(U*u_fractScale)-.5;
    d=length(U)*exp(-l);
    d=pow(abs(.08/sin(d*u_ringFreq+iTime*u_ringSpeed)),u_falloff);
    O+=d*(.5+.5*cos(6.28*(l+float(i)*.4+iTime*u_colorSpeed+vec4(.26,.42,.56,0))));
  }
  fragColor=vec4(O.rgb*u_brightness*.1,1.);
}
void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// â˜… Maze Lattice - Octahedral SDF maze (Full version - Darker/High Contrast)
const mazeLatticeShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform float u_speed, u_tubeWidth, u_patternScale, u_rotationSpeed;
uniform float u_edgeWidth, u_reflectivity, u_brightness, u_warmth;
uniform float u_vignette, u_fogDistance, u_raySteps;
uniform float u_darkness, u_contrast, u_ambient;

float map(vec3 p, float tw){
  vec3 ip=floor(p)+.5;
  p-=ip;
  vec3 q=abs(p);
  q=step(q.yzx,q.xyz)*step(q.zxy,q.xyz)*sign(p);
  q.x=fract(sin(dot(ip+q*.5,vec3(111.67,147.31,27.53)))*43758.5453);
  p.xy=abs(q.x>.333?q.x>.666?p.xz:p.yz:p.xy);
  return max(p.x,p.y)-tw;
}

float trace(vec3 ro,vec3 rd, float tw, float fogDist, float steps){
  float t=0.;
  for(int i=0;i<128;i++){
    if(float(i)>=steps)break;
    float d=map(ro+rd*t, tw);
    if(abs(d)<.002*(t*.125+1.)||t>fogDist)break;
    t+=d;
  }
  return min(t,fogDist);
}

vec3 normal(vec3 p, float tw){
  vec2 e=vec2(.005,0);
  return normalize(vec3(
    map(p+e.xyy,tw)-map(p-e.xyy,tw),
    map(p+e.yxy,tw)-map(p-e.yxy,tw),
    map(p+e.yyx,tw)-map(p-e.yyx,tw)
  ));
}

float hexTruchet(vec2 p, float scale){
  p*=scale;
  vec2 h=vec2(p.x+p.y*.577350269,p.y*1.154700538);
  vec2 f=fract(h);h-=f;
  float c=fract((h.x+h.y)/3.);
  h=c<.666?c<.333?h:h+1.:h+step(f.yx,f);
  p-=vec2(h.x-h.y*.5,h.y*.8660254);
  c=fract(cos(dot(h,vec2(41.13,289.57)))*43758.5453);
  p-=p*step(c,.5)*2.;
  p-=vec2(-1,0);c=dot(p,p);
  p-=vec2(1.5,.8660254);c=min(c,dot(p,p));
  p-=vec2(0,-1.73205);
  return sqrt(min(c,dot(p,p)));
}

float n2D(vec2 p){
  vec2 i=floor(p);p-=i;p*=p*(3.-p*2.);
  return dot(mat2(fract(sin(vec4(0,41,289,330)+dot(i,vec2(41,289)))*43758.5453))*vec2(1.-p.y,p.y),vec2(1.-p.x,p.x));
}

void mainImage(out vec4 fragColor, vec2 fragCoord){
  vec3 rd=vec3(2.*fragCoord-iResolution.xy,iResolution.y);
  rd=normalize(vec3(rd.xy,sqrt(max(rd.z*rd.z-dot(rd.xy,rd.xy)*.2,0.))));
  vec2 m=sin(vec2(1.5708,0)+iTime*u_rotationSpeed);
  rd.xy=rd.xy*mat2(m.xy,-m.y,m.x);
  rd.xz=rd.xz*mat2(m.xy,-m.y,m.x);
  vec3 ro=vec3(0,0,iTime*u_speed*4.);
  vec3 lp=ro+vec3(.2,1.,.3);

  float t=trace(ro,rd,u_tubeWidth,u_fogDistance,u_raySteps);
  vec3 sp=ro+rd*t;
  vec3 sn=normal(sp,u_tubeWidth);
  vec3 n=abs(sn);
  vec2 puv=n.x>.5?sp.yz:n.y>.5?sp.xz:sp.xy;

  // Base color with noise texture - darkened
  vec3 darkColor = vec3(.15,.05,.01) * (1.0 - u_darkness * 0.5);
  vec3 lightColor = vec3(.25,.35,.45) * (1.0 - u_darkness * 0.3);
  vec3 oCol=mix(darkColor,lightColor,n2D(puv*8.)*.66+n2D(puv*16.)*.34);
  oCol*=n2D(puv*512.)*1.0+1.2;

  // Hex truchet pattern overlay - enhanced contrast
  vec2 sc=cos(hexTruchet(puv,u_patternScale)*6.283*vec2(2,4));
  float patternMask = clamp(dot(sc,vec2(.6))+.5,0.,1.);
  patternMask = pow(patternMask, 1.0 + u_contrast); // Apply contrast
  oCol*=patternMask*.95+.05;

  // Edge highlight
  float edge=1.0-smoothstep(0.0,u_edgeWidth,abs(map(sp,u_tubeWidth)));
  oCol+=vec3(0.6,0.45,0.2)*edge*0.4;

  // Lighting with adjustable ambient
  vec3 ld=normalize(lp-sp);
  float diff=max(dot(ld,sn),0.);
  float spec=pow(max(dot(reflect(-ld,sn),-rd),0.),32.);

  // Reflection
  vec3 refl=reflect(rd,sn);
  float reflSpec=pow(max(dot(refl,ld),0.),16.)*u_reflectivity;

  // Reduced ambient for darker shadows
  vec3 ambientLight = vec3(.25,.2,.15) * u_ambient;
  vec3 col=oCol*(diff+ambientLight)+vec3(1.,.6,.2)*spec*1.5+vec3(0.5,0.6,0.8)*reflSpec;
  col*=u_brightness;

  // Darker fog - blend to near-black instead of bright colors
  vec3 darkFog = vec3(0.02, 0.02, 0.04) * (1.0 - u_darkness * 0.5);
  vec3 lightFog = vec3(0.08, 0.06, 0.04);
  vec3 bg=mix(darkFog, lightFog, -rd.y*.35+.35);
  col=mix(col,bg,smoothstep(0.,u_fogDistance-25.,t));

  // Vignette and warmth
  vec2 uv=fragCoord/iResolution;
  float vig=pow(16.*uv.x*uv.y*(1.-uv.x)*(1.-uv.y),u_vignette);
  col*=mix(vec3(1),vec3(1.2,1.1,.85),u_warmth)*vig;

  fragColor=vec4(sqrt(clamp(col,0.,1.)),1.);
}
void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// â˜… Floral Thorns - Kaleidoscopic mirror fractal
const floralThornsShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform float u_speed, u_mirrorScale, u_mirrorOffset, u_rotationDepth, u_rotationTime;
uniform float u_fractalLayers, u_glowIntensity, u_fogDepth, u_exposure, u_gamma;

vec4 tanhApprox(vec4 x){return (exp(2.0*x)-1.0)/(exp(2.0*x)+1.0);}

void mainImage(out vec4 fragColor, vec2 fragCoord){
  vec2 uv=(fragCoord-.5*iResolution)/iResolution.y;
  vec4 o=vec4(0.);
  float t=-iTime*u_speed;
  float d=0.,s=0.;
  vec3 p=vec3(0.);
  for(int i=0;i<300;i++){
    s=.007+abs(s)*.1;
    d+=s;
    o+=sin(d*u_glowIntensity+vec4(.1,u_fogDepth-p.z,.3,0.))/(abs(s)+1e-4);
    p=vec3(uv*d,d+iTime*u_speed*4.);
    p=abs(p*u_mirrorScale)-u_mirrorOffset;
    float a=u_rotationTime*t+p.z*u_rotationDepth;
    float ca=cos(a),sa=sin(a);
    vec2 rotated=vec2(ca*p.x+sa*p.y,-sa*p.x+ca*p.y);
    p=vec3(rotated,p.z);
    s=sin(1.0+p.x+p.y);
    float n=3.;
    for(int j=0;j<5;j++){
      if(n>u_fractalLayers*3.)break;
      vec3 freq=p*n;
      vec3 timeMod=vec3(0.,2.+sin(iTime*.25)*.8,2.+sin(iTime*.1)*.5);
      s+=abs(dot(1.75*sin(freq),timeMod))/n;
      n=n*2.;
    }
  }
  vec4 tone=tanhApprox(o*o/u_exposure);
  fragColor=vec4(pow(tone.r,u_gamma),pow(tone.g,u_gamma),pow(tone.b,u_gamma),1.0);
}
void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// â˜… Cosmic Distortion - Logarithmic distortion with grid and waves
// Auto-randomizes with smooth transitions (7s interval, 2s transition)
// u_autoRandomize blends between preset values (0.0) and auto-random (1.0)
const cosmicDistortionShader = `
precision highp float;
uniform vec2 iResolution;
uniform float iTime;
uniform float u_speed, u_gridScale, u_gridThreshold, u_distortion;
uniform float u_glowIntensity, u_ringFreq, u_angularFreq, u_hue;
uniform float u_saturation, u_brightness, u_orbitSpeed;
uniform float u_autoRandomize;

float hash(float n) {
    return fract(sin(n * 78.233) * 43758.5453123);
}

float seg(in vec2 p, in vec2 a, in vec2 b) {
    vec2 pa = p-a, ba = b-a;
    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );
    return length( pa - ba*h );
}

vec3 hsv2rgb(vec3 c) {
    vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

float getRandomParam(float paramId, float minVal, float range) {
    float changeInterval = 7.0;
    float transitionDuration = 2.0;

    float epoch = floor(iTime / changeInterval);
    float timeInEpoch = fract(iTime / changeInterval) * changeInterval;
    float transition = smoothstep(0.0, transitionDuration, timeInEpoch);

    float currSeed = epoch * 137.0;
    float nextSeed = (epoch + 1.0) * 137.0;

    float prevVal = hash(currSeed + paramId * 17.31);
    float currVal = hash(nextSeed + paramId * 17.31);
    float interpolated = mix(prevVal, currVal, transition);

    return minVal + interpolated * range;
}

void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    // Blend between preset values and auto-randomized values
    float autoRand = u_autoRandomize;

    float CD_SPEED         = mix(u_speed, getRandomParam(0.0, 0.15, 0.45), autoRand);
    float CD_GRIDSCALE     = mix(u_gridScale, getRandomParam(1.0, 3.0, 12.0), autoRand);
    float CD_GRIDTHRESHOLD = mix(u_gridThreshold, getRandomParam(2.0, 0.1, 0.35), autoRand);
    float CD_DISTORTION    = mix(u_distortion, getRandomParam(3.0, 0.2, 0.8), autoRand);
    float CD_GLOWINTENSITY = mix(u_glowIntensity, getRandomParam(4.0, 2.0, 5.0), autoRand);
    float CD_RINGFREQ      = mix(u_ringFreq, getRandomParam(5.0, 8.0, 20.0), autoRand);
    float CD_ANGULARFREQ   = mix(u_angularFreq, getRandomParam(6.0, 5.0, 12.0), autoRand);
    float CD_ORBITSPEED    = mix(u_orbitSpeed, getRandomParam(7.0, 0.1, 0.3), autoRand);
    float CD_HUE           = mix(u_hue, getRandomParam(8.0, 0.0, 1.0), autoRand);
    float CD_SATURATION    = mix(u_saturation, getRandomParam(9.0, 0.6, 0.6), autoRand);
    float CD_BRIGHTNESS    = mix(u_brightness, getRandomParam(10.0, 1.0, 1.8), autoRand);

    vec2 uv = (fragCoord - 0.5 * iResolution.xy) / iResolution.y;
    float t = iTime * CD_SPEED;
    float a = atan(uv.y, uv.x);
    vec2 p = cos(a + t) * vec2(cos(0.5 * t * CD_ORBITSPEED), sin(0.3 * t * CD_ORBITSPEED));

    float d1 = length(uv - p);
    float d2 = length(uv);

    vec2 uv2 = 2. * cos(log(length(uv)) * CD_DISTORTION - 0.5 * t + log(vec2(d1,d2)/(d1+d2)));

    vec2 fpos = fract(CD_GRIDSCALE * uv2) - 0.5;
    float d = max(abs(fpos.x), abs(fpos.y));
    float k = 5. / iResolution.y;
    float s = smoothstep(-k, k, CD_GRIDTHRESHOLD - d);

    // Base color with hue shift
    vec3 baseCol = hsv2rgb(vec3(CD_HUE, CD_SATURATION, 1.0));
    vec3 col = vec3(s * baseCol.r, s * baseCol.g * 0.5, (0.1-0.1 * s) * baseCol.b);

    // Glow around orbit point
    vec3 glowCol = hsv2rgb(vec3(CD_HUE + 0.1, CD_SATURATION, 1.0));
    float glowArg = -CD_GLOWINTENSITY * (length(uv - p) + length(uv));
    float coshVal = (exp(glowArg) + exp(-glowArg)) * 0.5;
    col += (1.0 / coshVal) * glowCol;

    // Ring waves
    float c = cos(CD_RINGFREQ * length(uv2) + 4. * t);
    vec3 ringCol = hsv2rgb(vec3(CD_HUE + 0.3, CD_SATURATION * 0.8, 1.0));
    col += (0.5 + 0.5 * c) * ringCol *
           exp(-9. * abs(cos(CD_ANGULARFREQ * a + t) * uv.x
                       + sin(CD_ANGULARFREQ * a + t) * uv.y
                       + 0.1 * c));

    col *= CD_BRIGHTNESS;
    fragColor = vec4(col,1.0);
}
void main() { vec4 O; mainImage(O, gl_FragCoord.xy); gl_FragColor = O; }
`;

// ============== PRESETS ==============

const presetsData = {
  0: [ // â˜… Plasma Vortex (FIRST!) - Energy Burst is first preset
    { name:"ENERGY BURST", 'pv-arms':12,'pv-spin':3,'pv-tightness':1,'pv-coresize':0.12,'pv-plasma':3,'pv-tendrils':2,'pv-noisescale':3,'pv-turbulence':1,'pv-pulserate':6,'pv-waves':4,'pv-wavespeed':4,'pv-colormode':2,'pv-hue':4,'pv-coreglow':4,'pv-bloom':0.8,'pv-zoom':1.3 },
    { name:"ELECTRIC STORM", 'pv-arms':4,'pv-spin':1,'pv-tightness':3,'pv-coresize':0.2,'pv-plasma':1.5,'pv-tendrils':0.8,'pv-noisescale':4,'pv-turbulence':0.5,'pv-pulserate':2,'pv-waves':3,'pv-wavespeed':1.5,'pv-colormode':1,'pv-hue':0,'pv-coreglow':2,'pv-bloom':0.4,'pv-zoom':1 },
    { name:"GALAXY SPIRAL", 'pv-arms':6,'pv-spin':0.5,'pv-tightness':5,'pv-coresize':0.3,'pv-plasma':1.2,'pv-tendrils':0.5,'pv-noisescale':6,'pv-turbulence':0.3,'pv-pulserate':1,'pv-waves':5,'pv-wavespeed':0.8,'pv-colormode':2,'pv-hue':1,'pv-coreglow':3,'pv-bloom':0.3,'pv-zoom':0.8 },
    { name:"PLASMA BALL", 'pv-arms':8,'pv-spin':1.5,'pv-tightness':2,'pv-coresize':0.15,'pv-plasma':2,'pv-tendrils':1.5,'pv-noisescale':3,'pv-turbulence':0.8,'pv-pulserate':4,'pv-waves':6,'pv-wavespeed':2,'pv-colormode':0,'pv-hue':0.5,'pv-coreglow':4,'pv-bloom':0.5,'pv-zoom':1.2 },
    { name:"FIRE VORTEX", 'pv-arms':3,'pv-spin':2,'pv-tightness':4,'pv-coresize':0.25,'pv-plasma':1.8,'pv-tendrils':0.6,'pv-noisescale':5,'pv-turbulence':0.7,'pv-pulserate':3,'pv-waves':4,'pv-wavespeed':2.5,'pv-colormode':1,'pv-hue':5.5,'pv-coreglow':2.5,'pv-bloom':0.6,'pv-zoom':1 },
    { name:"VOID MAELSTROM", 'pv-arms':5,'pv-spin':0.3,'pv-tightness':7,'pv-coresize':0.1,'pv-plasma':0.8,'pv-tendrils':1.2,'pv-noisescale':8,'pv-turbulence':0.2,'pv-pulserate':0.5,'pv-waves':2,'pv-wavespeed':0.5,'pv-colormode':0,'pv-hue':3,'pv-coreglow':1,'pv-bloom':0.2,'pv-zoom':1.5 },
    { name:"NEON TYPHOON", 'pv-arms':4,'pv-spin':2.5,'pv-tightness':2.5,'pv-coresize':0.18,'pv-plasma':2.5,'pv-tendrils':1,'pv-noisescale':4,'pv-turbulence':0.6,'pv-pulserate':5,'pv-waves':8,'pv-wavespeed':3,'pv-colormode':2,'pv-hue':0,'pv-coreglow':3.5,'pv-bloom':0.7,'pv-zoom':0.9 },
    { name:"COSMIC DRAIN", 'pv-arms':2,'pv-spin':0.8,'pv-tightness':8,'pv-coresize':0.4,'pv-plasma':1,'pv-tendrils':0.3,'pv-noisescale':2,'pv-turbulence':0.1,'pv-pulserate':1.5,'pv-waves':1,'pv-wavespeed':1,'pv-colormode':1,'pv-hue':2,'pv-coreglow':5,'pv-bloom':0.3,'pv-zoom':0.7 },
    { name:"AURORA SWIRL", 'pv-arms':6,'pv-spin':0.6,'pv-tightness':4,'pv-coresize':0.35,'pv-plasma':1.3,'pv-tendrils':0.4,'pv-noisescale':7,'pv-turbulence':0.4,'pv-pulserate':0.8,'pv-waves':3,'pv-wavespeed':0.6,'pv-colormode':2,'pv-hue':2.5,'pv-coreglow':2,'pv-bloom':0.25,'pv-zoom':1.1 }
  ],
  1: [ // â˜… Cosmic Mandala
    { name:"SACRED GEOMETRY", 'cm-symmetry':6,'cm-layers':5,'cm-complexity':3,'cm-ringscale':1.5,'cm-rotspeed':0.5,'cm-pulsespeed':1,'cm-pulseamt':0.3,'cm-spiral':0,'cm-glow':1.5,'cm-falloff':2,'cm-colorcycle':0.5,'cm-hue':0,'cm-saturation':1,'cm-edgeglow':0.5,'cm-bloom':0.3,'cm-zoom':1 },
    { name:"FLOWER OF LIFE", 'cm-symmetry':6,'cm-layers':7,'cm-complexity':2,'cm-ringscale':2,'cm-rotspeed':0.3,'cm-pulsespeed':0.5,'cm-pulseamt':0.2,'cm-spiral':0,'cm-glow':1.8,'cm-falloff':1.5,'cm-colorcycle':0.3,'cm-hue':0.5,'cm-saturation':0.8,'cm-edgeglow':0.8,'cm-bloom':0.4,'cm-zoom':0.8 },
    { name:"HYPNOTIC SPIRAL", 'cm-symmetry':8,'cm-layers':4,'cm-complexity':4,'cm-ringscale':1,'cm-rotspeed':1,'cm-pulsespeed':2,'cm-pulseamt':0.5,'cm-spiral':1.5,'cm-glow':2,'cm-falloff':2.5,'cm-colorcycle':1,'cm-hue':2,'cm-saturation':1.2,'cm-edgeglow':0.3,'cm-bloom':0.5,'cm-zoom':1.2 },
    { name:"NEON LOTUS", 'cm-symmetry':12,'cm-layers':6,'cm-complexity':2.5,'cm-ringscale':1.8,'cm-rotspeed':0.4,'cm-pulsespeed':1.5,'cm-pulseamt':0.4,'cm-spiral':0.5,'cm-glow':2.5,'cm-falloff':1.8,'cm-colorcycle':0.8,'cm-hue':4.2,'cm-saturation':1.5,'cm-edgeglow':1,'cm-bloom':0.5,'cm-zoom':0.9 },
    { name:"COSMIC EYE", 'cm-symmetry':3,'cm-layers':8,'cm-complexity':5,'cm-ringscale':2.5,'cm-rotspeed':0.2,'cm-pulsespeed':0.8,'cm-pulseamt':0.6,'cm-spiral':-0.5,'cm-glow':1.2,'cm-falloff':3,'cm-colorcycle':0.2,'cm-hue':1,'cm-saturation':0.9,'cm-edgeglow':0.4,'cm-bloom':0.2,'cm-zoom':1.5 },
    { name:"KALEIDOSCOPE", 'cm-symmetry':16,'cm-layers':3,'cm-complexity':6,'cm-ringscale':1.2,'cm-rotspeed':0.8,'cm-pulsespeed':3,'cm-pulseamt':0.7,'cm-spiral':0,'cm-glow':1.8,'cm-falloff':2,'cm-colorcycle':1.5,'cm-hue':0,'cm-saturation':1.3,'cm-edgeglow':0.6,'cm-bloom':0.4,'cm-zoom':1.1 },
    { name:"VOID PORTAL", 'cm-symmetry':5,'cm-layers':9,'cm-complexity':3.5,'cm-ringscale':3,'cm-rotspeed':0.15,'cm-pulsespeed':0.3,'cm-pulseamt':0.15,'cm-spiral':2,'cm-glow':0.8,'cm-falloff':4,'cm-colorcycle':0.1,'cm-hue':3.5,'cm-saturation':0.5,'cm-edgeglow':1.5,'cm-bloom':0.1,'cm-zoom':2 },
    { name:"ELECTRIC BLOOM", 'cm-symmetry':8,'cm-layers':5,'cm-complexity':4.5,'cm-ringscale':1.3,'cm-rotspeed':0.6,'cm-pulsespeed':4,'cm-pulseamt':0.8,'cm-spiral':0.3,'cm-glow':3,'cm-falloff':1.5,'cm-colorcycle':2,'cm-hue':5,'cm-saturation':1.8,'cm-edgeglow':0.2,'cm-bloom':0.6,'cm-zoom':0.7 },
    { name:"MEDITATION", 'cm-symmetry':6,'cm-layers':10,'cm-complexity':1.5,'cm-ringscale':2.2,'cm-rotspeed':0.1,'cm-pulsespeed':0.2,'cm-pulseamt':0.1,'cm-spiral':0,'cm-glow':1,'cm-falloff':2.5,'cm-colorcycle':0.05,'cm-hue':2.5,'cm-saturation':0.6,'cm-edgeglow':0.3,'cm-bloom':0.15,'cm-zoom':0.6 }
  ],
  2: [ // â˜… Dark Transit
    { name:"LOW TECH", 'dt-speed':4,'dt-radius':4,'dt-scoops':0.25,'dt-detail':0.22,'dt-orb':1,'dt-brightness':1,'dt-saturation':1,'dt-bgdark':0 },
    { name:"WARP CORE", 'dt-speed':6,'dt-radius':3,'dt-scoops':0.3,'dt-detail':0.3,'dt-orb':1.5,'dt-brightness':1.2,'dt-saturation':1.2,'dt-bgdark':0 },
    { name:"DEEP TUNNEL", 'dt-speed':2,'dt-radius':5,'dt-scoops':0.15,'dt-detail':0.15,'dt-orb':0.5,'dt-brightness':0.8,'dt-saturation':0.8,'dt-bgdark':0.2 },
    { name:"NEON PIPE", 'dt-speed':5,'dt-radius':3.5,'dt-scoops':0.4,'dt-detail':0.25,'dt-orb':0.8,'dt-brightness':1.5,'dt-saturation':1.5,'dt-bgdark':0 },
    { name:"VOID RUN", 'dt-speed':8,'dt-radius':4.5,'dt-scoops':0.2,'dt-detail':0.1,'dt-orb':0.3,'dt-brightness':0.6,'dt-saturation':0.6,'dt-bgdark':0.5 },
    { name:"CYBER CHASE", 'dt-speed':7,'dt-radius':3,'dt-scoops':0.35,'dt-detail':0.35,'dt-orb':1.2,'dt-brightness':1.3,'dt-saturation':1.4,'dt-bgdark':0 },
    { name:"SLOW DRIFT", 'dt-speed':1.5,'dt-radius':6,'dt-scoops':0.1,'dt-detail':0.08,'dt-orb':0.2,'dt-brightness':0.7,'dt-saturation':0.5,'dt-bgdark':0.3 },
    { name:"ELECTRIC TUBE", 'dt-speed':4.5,'dt-radius':2.5,'dt-scoops':0.5,'dt-detail':0.4,'dt-orb':2,'dt-brightness':1.8,'dt-saturation':1.6,'dt-bgdark':0 },
    { name:"HYPERSPACE", 'dt-speed':10,'dt-radius':4,'dt-scoops':0.2,'dt-detail':0.2,'dt-orb':1,'dt-brightness':1,'dt-saturation':1,'dt-bgdark':0 }
  ],
  3: [ // â˜… Neon Grid
    { name:"RETROWAVE", 'ng-speed':1,'ng-gridsize':0.1,'ng-linethick':0.02,'ng-glow':1.5,'ng-pulse':2,'ng-depth':1,'ng-hue':0.85,'ng-saturation':1,'ng-bgdark':0,'ng-scanlines':0.5,'ng-chromatic':0.5 },
    { name:"CYBER CITY", 'ng-speed':1.5,'ng-gridsize':0.15,'ng-linethick':0.015,'ng-glow':2,'ng-pulse':3,'ng-depth':0.8,'ng-hue':0.55,'ng-saturation':1.2,'ng-bgdark':0,'ng-scanlines':0.8,'ng-chromatic':1 },
    { name:"TRON LEGACY", 'ng-speed':0.8,'ng-gridsize':0.08,'ng-linethick':0.01,'ng-glow':2.5,'ng-pulse':1,'ng-depth':1.2,'ng-hue':0.5,'ng-saturation':0.8,'ng-bgdark':0,'ng-scanlines':0,'ng-chromatic':0 },
    { name:"NEON HIGHWAY", 'ng-speed':2,'ng-gridsize':0.2,'ng-linethick':0.025,'ng-glow':1.8,'ng-pulse':4,'ng-depth':0.6,'ng-hue':0.0,'ng-saturation':1.5,'ng-bgdark':0,'ng-scanlines':0.3,'ng-chromatic':0.8 },
    { name:"VOID PLANE", 'ng-speed':0.5,'ng-gridsize':0.12,'ng-linethick':0.008,'ng-glow':1,'ng-pulse':0.5,'ng-depth':2,'ng-hue':0.7,'ng-saturation':0.5,'ng-bgdark':0.5,'ng-scanlines':0,'ng-chromatic':0 },
    { name:"ELECTRIC DREAM", 'ng-speed':1.2,'ng-gridsize':0.06,'ng-linethick':0.03,'ng-glow':3,'ng-pulse':5,'ng-depth':0.5,'ng-hue':0.15,'ng-saturation':1.8,'ng-bgdark':0,'ng-scanlines':1,'ng-chromatic':1.5 },
    { name:"MATRIX RAIN", 'ng-speed':1.8,'ng-gridsize':0.05,'ng-linethick':0.012,'ng-glow':2,'ng-pulse':2,'ng-depth':1,'ng-hue':0.35,'ng-saturation':1,'ng-bgdark':0,'ng-scanlines':0.6,'ng-chromatic':0.3 },
    { name:"SUNSET GRID", 'ng-speed':0.6,'ng-gridsize':0.18,'ng-linethick':0.02,'ng-glow':1.2,'ng-pulse':1.5,'ng-depth':1.5,'ng-hue':0.08,'ng-saturation':1.3,'ng-bgdark':0.1,'ng-scanlines':0.2,'ng-chromatic':0.6 },
    { name:"DEEP WEB", 'ng-speed':0.3,'ng-gridsize':0.25,'ng-linethick':0.005,'ng-glow':0.8,'ng-pulse':0.8,'ng-depth':3,'ng-hue':0.6,'ng-saturation':0.4,'ng-bgdark':0.8,'ng-scanlines':0,'ng-chromatic':0 }
  ],
  4: [ // â˜… Electric Arcs
    { name:"LIGHTNING STORM", 'ea-arcs':5,'ea-speed':2,'ea-thickness':0.02,'ea-glow':1.5,'ea-branch':0.8,'ea-jitter':0.3,'ea-hue':0.6,'ea-saturation':0.8,'ea-bgdark':0,'ea-pulse':3,'ea-spread':0.3 },
    { name:"PLASMA CHAMBER", 'ea-arcs':8,'ea-speed':3,'ea-thickness':0.015,'ea-glow':2,'ea-branch':0.5,'ea-jitter':0.2,'ea-hue':0.8,'ea-saturation':1,'ea-bgdark':0,'ea-pulse':5,'ea-spread':0.25 },
    { name:"TESLA COIL", 'ea-arcs':3,'ea-speed':4,'ea-thickness':0.03,'ea-glow':2.5,'ea-branch':1.2,'ea-jitter':0.5,'ea-hue':0.55,'ea-saturation':0.7,'ea-bgdark':0,'ea-pulse':8,'ea-spread':0.15 },
    { name:"NEON STRIKE", 'ea-arcs':4,'ea-speed':2.5,'ea-thickness':0.025,'ea-glow':1.8,'ea-branch':0.6,'ea-jitter':0.25,'ea-hue':0.9,'ea-saturation':1.2,'ea-bgdark':0,'ea-pulse':4,'ea-spread':0.35 },
    { name:"VOID SPARKS", 'ea-arcs':6,'ea-speed':1,'ea-thickness':0.01,'ea-glow':1,'ea-branch':0.3,'ea-jitter':0.15,'ea-hue':0.7,'ea-saturation':0.5,'ea-bgdark':0.5,'ea-pulse':1,'ea-spread':0.4 },
    { name:"CYBER PULSE", 'ea-arcs':7,'ea-speed':3.5,'ea-thickness':0.018,'ea-glow':2.2,'ea-branch':0.9,'ea-jitter':0.35,'ea-hue':0.5,'ea-saturation':1.5,'ea-bgdark':0,'ea-pulse':6,'ea-spread':0.28 },
    { name:"STATIC FIELD", 'ea-arcs':8,'ea-speed':0.5,'ea-thickness':0.008,'ea-glow':0.8,'ea-branch':0.4,'ea-jitter':0.4,'ea-hue':0.65,'ea-saturation':0.6,'ea-bgdark':0.3,'ea-pulse':0.5,'ea-spread':0.5 },
    { name:"ENERGY WEB", 'ea-arcs':6,'ea-speed':1.5,'ea-thickness':0.012,'ea-glow':1.3,'ea-branch':1,'ea-jitter':0.2,'ea-hue':0.45,'ea-saturation':0.9,'ea-bgdark':0.1,'ea-pulse':2,'ea-spread':0.32 },
    { name:"FIRE BOLTS", 'ea-arcs':4,'ea-speed':2.8,'ea-thickness':0.022,'ea-glow':2,'ea-branch':0.7,'ea-jitter':0.3,'ea-hue':0.05,'ea-saturation':1.3,'ea-bgdark':0,'ea-pulse':4,'ea-spread':0.22 }
  ],
  5: [ // Neon Spokes
    { name:"NEON TUNNEL", 'ns-speed':3,'ns-zoom':1.1,'ns-iterations':40,'ns-complexity':.2,'ns-stepsize':.6,'ns-saturation':.6,'ns-exposure':1000 },
    { name:"HYPERSPACE", 'ns-speed':6,'ns-zoom':1.5,'ns-iterations':60,'ns-complexity':.15,'ns-stepsize':.4,'ns-saturation':.8,'ns-exposure':800 },
    { name:"CRYSTAL MAZE", 'ns-speed':1.5,'ns-zoom':.8,'ns-iterations':50,'ns-complexity':.3,'ns-stepsize':.7,'ns-saturation':.4,'ns-exposure':1200 },
    { name:"RAINBOW RUSH", 'ns-speed':4,'ns-zoom':1.2,'ns-iterations':45,'ns-complexity':.25,'ns-stepsize':.5,'ns-saturation':1.2,'ns-exposure':900 },
    { name:"VOID SPOKES", 'ns-speed':2,'ns-zoom':2,'ns-iterations':30,'ns-complexity':.1,'ns-stepsize':.8,'ns-saturation':.3,'ns-exposure':1500 },
    { name:"ELECTRIC BLUE", 'ns-speed':3.5,'ns-zoom':1,'ns-iterations':55,'ns-complexity':.18,'ns-stepsize':.55,'ns-saturation':.5,'ns-exposure':1100 },
    { name:"FIRE SPIRAL", 'ns-speed':5,'ns-zoom':1.3,'ns-iterations':35,'ns-complexity':.35,'ns-stepsize':.45,'ns-saturation':1.5,'ns-exposure':700 },
    { name:"SLOW DRIFT", 'ns-speed':.8,'ns-zoom':.7,'ns-iterations':70,'ns-complexity':.4,'ns-stepsize':.9,'ns-saturation':.7,'ns-exposure':1300 },
    { name:"WARP DRIVE", 'ns-speed':8,'ns-zoom':1.8,'ns-iterations':25,'ns-complexity':.12,'ns-stepsize':.35,'ns-saturation':1,'ns-exposure':600 }
  ],
  6: [ // Crystal Lattice
    { name:"EMERALD GLOW", 'cl-speed':1,'cl-pathcurve':.15,'cl-stepscale':.6,'cl-swirl':.4,'cl-swirlfreq':.15,'cl-shapesize':.28,'cl-shapemod':.5,'cl-glow':1.2,'cl-colorr':.3,'cl-colorg':1.3,'cl-colorb':1.83,'cl-exposure':50000 },
    { name:"RUBY PULSE", 'cl-speed':.8,'cl-pathcurve':.2,'cl-stepscale':.55,'cl-swirl':.5,'cl-swirlfreq':.12,'cl-shapesize':.32,'cl-shapemod':.6,'cl-glow':1.4,'cl-colorr':0,'cl-colorg':3.5,'cl-colorb':4,'cl-exposure':45000 },
    { name:"DEEP VOID", 'cl-speed':.5,'cl-pathcurve':.08,'cl-stepscale':.7,'cl-swirl':.2,'cl-swirlfreq':.1,'cl-shapesize':.22,'cl-shapemod':.35,'cl-glow':.8,'cl-colorr':4,'cl-colorg':4.2,'cl-colorb':4.5,'cl-exposure':60000 },
    { name:"NEON FLOW", 'cl-speed':1.2,'cl-pathcurve':.18,'cl-stepscale':.5,'cl-swirl':.6,'cl-swirlfreq':.2,'cl-shapesize':.26,'cl-shapemod':.55,'cl-glow':1.5,'cl-colorr':1.57,'cl-colorg':3.14,'cl-colorb':0,'cl-exposure':40000 },
    { name:"BLOOD MOON", 'cl-speed':.7,'cl-pathcurve':.25,'cl-stepscale':.5,'cl-swirl':.8,'cl-swirlfreq':.18,'cl-shapesize':.35,'cl-shapemod':.8,'cl-glow':1,'cl-colorr':0,'cl-colorg':5,'cl-colorb':5.5,'cl-exposure':55000 },
    { name:"ICE CRYSTAL", 'cl-speed':.4,'cl-pathcurve':.1,'cl-stepscale':.65,'cl-swirl':.3,'cl-swirlfreq':.08,'cl-shapesize':.24,'cl-shapemod':.4,'cl-glow':1,'cl-colorr':2.8,'cl-colorg':2.5,'cl-colorb':1,'cl-exposure':50000 },
    { name:"SOLAR FLARE", 'cl-speed':1.5,'cl-pathcurve':.2,'cl-stepscale':.45,'cl-swirl':.7,'cl-swirlfreq':.25,'cl-shapesize':.3,'cl-shapemod':.7,'cl-glow':1.8,'cl-colorr':5.8,'cl-colorg':.5,'cl-colorb':0,'cl-exposure':35000 },
    { name:"GHOST GRID", 'cl-speed':.6,'cl-pathcurve':.12,'cl-stepscale':.7,'cl-swirl':.35,'cl-swirlfreq':.14,'cl-shapesize':.2,'cl-shapemod':.3,'cl-glow':.7,'cl-colorr':3.14,'cl-colorg':3.14,'cl-colorb':3.14,'cl-exposure':65000 },
    { name:"HYPERCUBE", 'cl-speed':1,'cl-pathcurve':.3,'cl-stepscale':.4,'cl-swirl':1,'cl-swirlfreq':.3,'cl-shapesize':.38,'cl-shapemod':1,'cl-glow':1.3,'cl-colorr':0,'cl-colorg':2.09,'cl-colorb':4.19,'cl-exposure':42000 }
  ],
  7: [ // Rainbow Nebula
    { name:"COSMIC BLOOM", 'rn-speed':4,'rn-turbulence':.8,'rn-iterations':2,'rn-scale':5,'rn-detail':.08,'rn-saturation':1.5,'rn-brightness':.05,'rn-hue':1,'rn-exposure':1000 },
    { name:"AURORA WAVE", 'rn-speed':2,'rn-turbulence':1.2,'rn-iterations':2.5,'rn-scale':7,'rn-detail':.06,'rn-saturation':2,'rn-brightness':.07,'rn-hue':2.5,'rn-exposure':800 },
    { name:"VOID STORM", 'rn-speed':6,'rn-turbulence':1.5,'rn-iterations':1.5,'rn-scale':4,'rn-detail':.1,'rn-saturation':.8,'rn-brightness':.03,'rn-hue':4,'rn-exposure':1500 },
    { name:"FIRE NEBULA", 'rn-speed':3,'rn-turbulence':.6,'rn-iterations':3,'rn-scale':6,'rn-detail':.05,'rn-saturation':1.8,'rn-brightness':.06,'rn-hue':5.5,'rn-exposure':900 },
    { name:"ICE GALAXY", 'rn-speed':1.5,'rn-turbulence':.9,'rn-iterations':2.2,'rn-scale':8,'rn-detail':.07,'rn-saturation':1.2,'rn-brightness':.04,'rn-hue':3.2,'rn-exposure':1200 },
    { name:"PSYCHEDELIC", 'rn-speed':5,'rn-turbulence':1.8,'rn-iterations':3.5,'rn-scale':3,'rn-detail':.12,'rn-saturation':2.5,'rn-brightness':.08,'rn-hue':0,'rn-exposure':600 },
    { name:"DEEP SPACE", 'rn-speed':1,'rn-turbulence':.4,'rn-iterations':1.8,'rn-scale':10,'rn-detail':.04,'rn-saturation':.6,'rn-brightness':.02,'rn-hue':4.5,'rn-exposure':2000 },
    { name:"PLASMA BURST", 'rn-speed':8,'rn-turbulence':1,'rn-iterations':2.8,'rn-scale':4.5,'rn-detail':.09,'rn-saturation':2.2,'rn-brightness':.1,'rn-hue':1.5,'rn-exposure':500 },
    { name:"NEON DREAMS", 'rn-speed':3.5,'rn-turbulence':1.3,'rn-iterations':2.3,'rn-scale':5.5,'rn-detail':.075,'rn-saturation':1.7,'rn-brightness':.055,'rn-hue':2,'rn-exposure':1100 }
  ],
  8: [ // Inferno Fire
    { name:"CAMPFIRE", 'fire-height':1,'fire-width':1.2,'fire-intensity':2,'fire-timescale':.5,'fire-sparks':100,'fire-smoke':.8,'fire-noise':5 },
    { name:"INFERNO", 'fire-height':1.8,'fire-width':2,'fire-intensity':4,'fire-timescale':.8,'fire-sparks':150,'fire-smoke':1,'fire-noise':6 },
    { name:"CANDLELIGHT", 'fire-height':.5,'fire-width':.5,'fire-intensity':1.5,'fire-timescale':.3,'fire-sparks':30,'fire-smoke':.3,'fire-noise':4 },
    { name:"WILDFIRE", 'fire-height':1.5,'fire-width':2.5,'fire-intensity':3.5,'fire-timescale':1,'fire-sparks':180,'fire-smoke':1.2,'fire-noise':7 },
    { name:"EMBER GLOW", 'fire-height':.7,'fire-width':1,'fire-intensity':1.2,'fire-timescale':.2,'fire-sparks':50,'fire-smoke':.5,'fire-noise':3 },
    { name:"TORCH", 'fire-height':1.3,'fire-width':.8,'fire-intensity':2.5,'fire-timescale':.6,'fire-sparks':80,'fire-smoke':.6,'fire-noise':5 },
    { name:"BONFIRE", 'fire-height':1.2,'fire-width':1.8,'fire-intensity':3,'fire-timescale':.7,'fire-sparks':120,'fire-smoke':.9,'fire-noise':6 },
    { name:"HELLFIRE", 'fire-height':2,'fire-width':2.8,'fire-intensity':5,'fire-timescale':1.2,'fire-sparks':200,'fire-smoke':1.5,'fire-noise':8 },
    { name:"GHOST FLAME", 'fire-height':1,'fire-width':1.5,'fire-intensity':1.8,'fire-timescale':.4,'fire-sparks':60,'fire-smoke':0,'fire-noise':4 }
  ],
  9: [ // Wormhole
    { name:"COSMIC DRIFT", 'wh-speed':2,'wh-sway':0.8,'wh-twist':1,'wh-starStrength':1,'wh-starDensity':4,'wh-starSize':0.06,'wh-twinkle':0.2,'wh-tunnelRadius':4,'wh-caveNoise':0.5,'wh-wallGlow':0.5,'wh-hueShift':0,'wh-saturation':1.5,'wh-colorCycle':0,'wh-exposure':2,'wh-bloom':0.4,'wh-vignette':0.35,'wh-grain':0.1 },
    { name:"HYPERDRIVE", 'wh-speed':5,'wh-sway':0.2,'wh-twist':0.5,'wh-starStrength':2,'wh-starDensity':3,'wh-starSize':0.1,'wh-twinkle':0.1,'wh-tunnelRadius':3,'wh-caveNoise':0.2,'wh-wallGlow':0.2,'wh-hueShift':3.5,'wh-saturation':1,'wh-colorCycle':0,'wh-exposure':2.5,'wh-bloom':0.6,'wh-vignette':0.5,'wh-grain':0.05 },
    { name:"NEBULA DREAM", 'wh-speed':1,'wh-sway':1.5,'wh-twist':1.5,'wh-starStrength':0.5,'wh-starDensity':6,'wh-starSize':0.04,'wh-twinkle':0.3,'wh-tunnelRadius':5,'wh-caveNoise':2,'wh-wallGlow':1,'wh-hueShift':2,'wh-saturation':2,'wh-colorCycle':0.1,'wh-exposure':1.5,'wh-bloom':0.5,'wh-vignette':0.3,'wh-grain':0.15 },
    { name:"VOID TERROR", 'wh-speed':1.5,'wh-sway':2,'wh-twist':2,'wh-starStrength':0.2,'wh-starDensity':8,'wh-starSize':0.02,'wh-twinkle':0.4,'wh-tunnelRadius':3,'wh-caveNoise':3,'wh-wallGlow':0.1,'wh-hueShift':4,'wh-saturation':0.5,'wh-colorCycle':0,'wh-exposure':1,'wh-bloom':0.2,'wh-vignette':0.8,'wh-grain':0.3 },
    { name:"PURPLE COSMOS", 'wh-speed':2.5,'wh-sway':0.6,'wh-twist':1.2,'wh-starStrength':0.8,'wh-starDensity':5,'wh-starSize':0.07,'wh-twinkle':0.15,'wh-tunnelRadius':5,'wh-caveNoise':1,'wh-wallGlow':0.3,'wh-hueShift':2.8,'wh-saturation':2,'wh-colorCycle':0,'wh-exposure':2.2,'wh-bloom':0.45,'wh-vignette':0.4,'wh-grain':0.08 },
    { name:"STAR TUNNEL", 'wh-speed':3,'wh-sway':0.4,'wh-twist':0.8,'wh-starStrength':1.5,'wh-starDensity':3.5,'wh-starSize':0.08,'wh-twinkle':0.25,'wh-tunnelRadius':4.5,'wh-caveNoise':0.3,'wh-wallGlow':0.4,'wh-hueShift':0.5,'wh-saturation':1.2,'wh-colorCycle':0.05,'wh-exposure':1.8,'wh-bloom':0.35,'wh-vignette':0.3,'wh-grain':0.12 },
    { name:"DEEP SPACE", 'wh-speed':0.8,'wh-sway':1,'wh-twist':1.3,'wh-starStrength':0.3,'wh-starDensity':7,'wh-starSize':0.03,'wh-twinkle':0.35,'wh-tunnelRadius':6,'wh-caveNoise':1.5,'wh-wallGlow':0.8,'wh-hueShift':5,'wh-saturation':0.8,'wh-colorCycle':0,'wh-exposure':1.2,'wh-bloom':0.25,'wh-vignette':0.25,'wh-grain':0.2 },
    { name:"RAINBOW WARP", 'wh-speed':2.2,'wh-sway':0.7,'wh-twist':1.1,'wh-starStrength':1.2,'wh-starDensity':4.5,'wh-starSize':0.055,'wh-twinkle':0.2,'wh-tunnelRadius':4,'wh-caveNoise':0.6,'wh-wallGlow':0.6,'wh-hueShift':0,'wh-saturation':1.8,'wh-colorCycle':0.2,'wh-exposure':2,'wh-bloom':0.4,'wh-vignette':0.35,'wh-grain':0.1 },
    { name:"ELECTRIC VOID", 'wh-speed':4,'wh-sway':0.3,'wh-twist':0.6,'wh-starStrength':2.5,'wh-starDensity':2.5,'wh-starSize':0.12,'wh-twinkle':0.08,'wh-tunnelRadius':3.5,'wh-caveNoise':0.15,'wh-wallGlow':0.15,'wh-hueShift':3,'wh-saturation':1.3,'wh-colorCycle':0,'wh-exposure':2.8,'wh-bloom':0.7,'wh-vignette':0.6,'wh-grain':0.04 }
  ],
  10: [ // Neon Lines
    { name:"FLOW", 'nl-speed':1,'nl-lineCount':10,'nl-lineWidth':0.02,'nl-glow':1.5,'nl-waveAmp':0.5,'nl-waveFreq':3,'nl-pulse':2,'nl-trail':0.5,'nl-hue':0.6,'nl-saturation':1,'nl-bgdark':0 },
    { name:"CYBER RAIN", 'nl-speed':1.5,'nl-lineCount':15,'nl-lineWidth':0.015,'nl-glow':2,'nl-waveAmp':0.3,'nl-waveFreq':5,'nl-pulse':3,'nl-trail':0.8,'nl-hue':0.35,'nl-saturation':1.2,'nl-bgdark':0 },
    { name:"AURORA", 'nl-speed':0.5,'nl-lineCount':8,'nl-lineWidth':0.03,'nl-glow':1.8,'nl-waveAmp':0.8,'nl-waveFreq':2,'nl-pulse':1,'nl-trail':0.3,'nl-hue':0.45,'nl-saturation':1.5,'nl-bgdark':0 },
    { name:"NEON STORM", 'nl-speed':2,'nl-lineCount':20,'nl-lineWidth':0.01,'nl-glow':2.5,'nl-waveAmp':0.6,'nl-waveFreq':6,'nl-pulse':4,'nl-trail':1,'nl-hue':0.8,'nl-saturation':0.9,'nl-bgdark':0 },
    { name:"FIRE TRAILS", 'nl-speed':1.2,'nl-lineCount':12,'nl-lineWidth':0.025,'nl-glow':2,'nl-waveAmp':0.4,'nl-waveFreq':4,'nl-pulse':2.5,'nl-trail':0.6,'nl-hue':0.05,'nl-saturation':1.3,'nl-bgdark':0 },
    { name:"DEEP BLUE", 'nl-speed':0.8,'nl-lineCount':6,'nl-lineWidth':0.035,'nl-glow':1.2,'nl-waveAmp':0.7,'nl-waveFreq':2.5,'nl-pulse':1.5,'nl-trail':0.4,'nl-hue':0.55,'nl-saturation':0.8,'nl-bgdark':0.3 },
    { name:"LASER SHOW", 'nl-speed':2.5,'nl-lineCount':18,'nl-lineWidth':0.008,'nl-glow':3,'nl-waveAmp':0.35,'nl-waveFreq':7,'nl-pulse':5,'nl-trail':1.5,'nl-hue':0.9,'nl-saturation':1.1,'nl-bgdark':0 },
    { name:"GENTLE WAVES", 'nl-speed':0.4,'nl-lineCount':5,'nl-lineWidth':0.04,'nl-glow':1,'nl-waveAmp':1,'nl-waveFreq':1.5,'nl-pulse':0.5,'nl-trail':0.2,'nl-hue':0.7,'nl-saturation':0.7,'nl-bgdark':0.1 },
    { name:"MATRIX", 'nl-speed':1.8,'nl-lineCount':16,'nl-lineWidth':0.012,'nl-glow':2.2,'nl-waveAmp':0.25,'nl-waveFreq':8,'nl-pulse':3.5,'nl-trail':1.2,'nl-hue':0.33,'nl-saturation':1,'nl-bgdark':0 }
  ],
  11: [ // Cyber Waves
    { name:"OCEAN", 'cw-speed':1,'cw-waveHeight':0.5,'cw-waveScale':1,'cw-gridSize':0.1,'cw-gridGlow':1.5,'cw-hue':0.55,'cw-saturation':1,'cw-perspective':0,'cw-fogDensity':1,'cw-scanlines':0.3,'cw-chromatic':0.5 },
    { name:"TRON SEA", 'cw-speed':1.5,'cw-waveHeight':0.3,'cw-waveScale':1.5,'cw-gridSize':0.08,'cw-gridGlow':2.5,'cw-hue':0.5,'cw-saturation':0.8,'cw-perspective':0.5,'cw-fogDensity':0.8,'cw-scanlines':0,'cw-chromatic':0 },
    { name:"FIRE OCEAN", 'cw-speed':1.2,'cw-waveHeight':0.8,'cw-waveScale':0.8,'cw-gridSize':0.12,'cw-gridGlow':2,'cw-hue':0.05,'cw-saturation':1.3,'cw-perspective':-0.5,'cw-fogDensity':1.2,'cw-scanlines':0.4,'cw-chromatic':0.8 },
    { name:"DEEP VOID", 'cw-speed':0.5,'cw-waveHeight':0.2,'cw-waveScale':2,'cw-gridSize':0.15,'cw-gridGlow':0.8,'cw-hue':0.7,'cw-saturation':0.5,'cw-perspective':1,'cw-fogDensity':2,'cw-scanlines':0,'cw-chromatic':0 },
    { name:"NEON SURF", 'cw-speed':2,'cw-waveHeight':1,'cw-waveScale':0.6,'cw-gridSize':0.06,'cw-gridGlow':3,'cw-hue':0.85,'cw-saturation':1.5,'cw-perspective':-1,'cw-fogDensity':0.5,'cw-scanlines':0.6,'cw-chromatic':1.2 },
    { name:"CYBER STORM", 'cw-speed':2.5,'cw-waveHeight':1.5,'cw-waveScale':1.2,'cw-gridSize':0.05,'cw-gridGlow':2.8,'cw-hue':0.6,'cw-saturation':1.2,'cw-perspective':0,'cw-fogDensity':0.6,'cw-scanlines':0.8,'cw-chromatic':1.5 },
    { name:"CALM WATERS", 'cw-speed':0.3,'cw-waveHeight':0.15,'cw-waveScale':2.5,'cw-gridSize':0.2,'cw-gridGlow':1,'cw-hue':0.52,'cw-saturation':0.6,'cw-perspective':2,'cw-fogDensity':1.5,'cw-scanlines':0.1,'cw-chromatic':0.2 },
    { name:"MATRIX OCEAN", 'cw-speed':1.8,'cw-waveHeight':0.4,'cw-waveScale':1.8,'cw-gridSize':0.04,'cw-gridGlow':2.2,'cw-hue':0.35,'cw-saturation':1,'cw-perspective':0.3,'cw-fogDensity':0.7,'cw-scanlines':0.5,'cw-chromatic':0.6 },
    { name:"SUNSET WAVES", 'cw-speed':0.8,'cw-waveHeight':0.6,'cw-waveScale':0.9,'cw-gridSize':0.1,'cw-gridGlow':1.8,'cw-hue':0.08,'cw-saturation':1.4,'cw-perspective':-0.3,'cw-fogDensity':1,'cw-scanlines':0.2,'cw-chromatic':0.4 }
  ],
  12: [ // Spiral
    { name:"COSMIC", 'sp-arms':5,'sp-twist':3,'sp-scale':1,'sp-speed':1,'sp-pulse':0.5,'sp-hue':0.5,'sp-noise':0.3,'sp-vignette':0.4,'sp-sharpness':1,'sp-turbulence':0,'sp-glow':1 },
    { name:"PLASMA", 'sp-arms':3,'sp-twist':5,'sp-scale':0.8,'sp-speed':1.5,'sp-pulse':0.8,'sp-hue':0.08,'sp-noise':0.6,'sp-vignette':0.3,'sp-sharpness':0.5,'sp-turbulence':0.3,'sp-glow':1 },
    { name:"VORTEX", 'sp-arms':8,'sp-twist':8,'sp-scale':1.2,'sp-speed':0.8,'sp-pulse':0.2,'sp-hue':0.7,'sp-noise':0.1,'sp-vignette':0.6,'sp-sharpness':2,'sp-turbulence':0,'sp-glow':1 },
    { name:"NEBULA", 'sp-arms':2,'sp-twist':2,'sp-scale':0.6,'sp-speed':0.3,'sp-pulse':0.9,'sp-hue':0.9,'sp-noise':0.8,'sp-vignette':0.2,'sp-sharpness':0.4,'sp-turbulence':0.5,'sp-glow':1 },
    { name:"HYPERDRIVE", 'sp-arms':12,'sp-twist':10,'sp-scale':1.5,'sp-speed':2,'sp-pulse':0.1,'sp-hue':0.55,'sp-noise':0.05,'sp-vignette':0.8,'sp-sharpness':4,'sp-turbulence':0,'sp-glow':1 },
    { name:"DREAMSCAPE", 'sp-arms':2,'sp-twist':1.5,'sp-scale':0.5,'sp-speed':0.15,'sp-pulse':0.95,'sp-hue':0.85,'sp-noise':0.9,'sp-vignette':0.15,'sp-sharpness':0.3,'sp-turbulence':0.7,'sp-glow':1 }
  ],
  13: [ // Starfield
    { name:"COSMIC STREAMS", 'sf-volSteps':18,'sf-stepSize':0.15,'sf-iterations':15,'sf-brightness':0.002,'sf-distFading':0.78,'sf-saturation':0.92,'sf-trailLayers':8,'sf-trailIntensity':0.8,'sf-flowSpeed':0.6,'sf-rotSpeed':0.03,'sf-centerGlow':0.4,'sf-hue':0 },
    { name:"DEEP SPACE", 'sf-volSteps':25,'sf-stepSize':0.12,'sf-iterations':20,'sf-brightness':0.001,'sf-distFading':0.85,'sf-saturation':0.7,'sf-trailLayers':3,'sf-trailIntensity':0.3,'sf-flowSpeed':0.2,'sf-rotSpeed':0.01,'sf-centerGlow':0.2,'sf-hue':0.5 },
    { name:"WARP DRIVE", 'sf-volSteps':12,'sf-stepSize':0.25,'sf-iterations':8,'sf-brightness':0.006,'sf-distFading':0.5,'sf-saturation':0.6,'sf-trailLayers':15,'sf-trailIntensity':1.5,'sf-flowSpeed':2,'sf-rotSpeed':0.08,'sf-centerGlow':0.6,'sf-hue':0 },
    { name:"THE VOID", 'sf-volSteps':30,'sf-stepSize':0.08,'sf-iterations':25,'sf-brightness':0.0008,'sf-distFading':0.95,'sf-saturation':0.3,'sf-trailLayers':0,'sf-trailIntensity':0,'sf-flowSpeed':0.1,'sf-rotSpeed':0.005,'sf-centerGlow':0.1,'sf-hue':0.3 },
    { name:"SUPERNOVA", 'sf-volSteps':20,'sf-stepSize':0.2,'sf-iterations':18,'sf-brightness':0.008,'sf-distFading':0.6,'sf-saturation':1,'sf-trailLayers':12,'sf-trailIntensity':1.2,'sf-flowSpeed':1.2,'sf-rotSpeed':0.06,'sf-centerGlow':1,'sf-hue':0.7 },
    { name:"NORTHERN LIGHTS", 'sf-volSteps':22,'sf-stepSize':0.1,'sf-iterations':12,'sf-brightness':0.0015,'sf-distFading':0.88,'sf-saturation':0.85,'sf-trailLayers':15,'sf-trailIntensity':0.6,'sf-flowSpeed':0.25,'sf-rotSpeed':0.015,'sf-centerGlow':0.3,'sf-hue':0.25 }
  ],
  14: [ // Fractal
    { name:"CLASSIC", 'fr-iterations':4,'fr-fractScale':1.5,'fr-ringFreq':8,'fr-ringSpeed':1,'fr-colorSpeed':0.4,'fr-brightness':1.2,'fr-falloff':1.2,'fr-zoom':1 },
    { name:"HYPNOTIC", 'fr-iterations':6,'fr-fractScale':1.8,'fr-ringFreq':12,'fr-ringSpeed':0.5,'fr-colorSpeed':0.2,'fr-brightness':1.5,'fr-falloff':1,'fr-zoom':0.8 },
    { name:"COSMIC WEB", 'fr-iterations':8,'fr-fractScale':1.3,'fr-ringFreq':6,'fr-ringSpeed':2,'fr-colorSpeed':0.6,'fr-brightness':2,'fr-falloff':1.5,'fr-zoom':1.2 },
    { name:"MINIMAL", 'fr-iterations':2,'fr-fractScale':2,'fr-ringFreq':4,'fr-ringSpeed':0.3,'fr-colorSpeed':0.1,'fr-brightness':0.8,'fr-falloff':0.8,'fr-zoom':1.5 },
    { name:"ELECTRIC STORM", 'fr-iterations':7,'fr-fractScale':1.4,'fr-ringFreq':16,'fr-ringSpeed':3,'fr-colorSpeed':0.8,'fr-brightness':2.5,'fr-falloff':0.6,'fr-zoom':0.6 },
    { name:"ZEN INFINITY", 'fr-iterations':5,'fr-fractScale':1.6,'fr-ringFreq':5,'fr-ringSpeed':0.15,'fr-colorSpeed':0.05,'fr-brightness':1,'fr-falloff':1.8,'fr-zoom':1.8 }
  ],
  15: [ // Maze Lattice (Full version - Darker/High Contrast)
    { name:"DARK CLASSIC", 'ml-speed':0.25,'ml-tubeWidth':0.2,'ml-patternScale':6,'ml-rotationSpeed':0.25,'ml-edgeWidth':0.034,'ml-reflectivity':0.25,'ml-brightness':1.0,'ml-warmth':0.4,'ml-vignette':0.15,'ml-fogDistance':100,'ml-raySteps':64,'ml-darkness':0.6,'ml-contrast':0.5,'ml-ambient':0.6 },
    { name:"ABYSS", 'ml-speed':0.15,'ml-tubeWidth':0.18,'ml-patternScale':8,'ml-rotationSpeed':0.12,'ml-edgeWidth':0.02,'ml-reflectivity':0.15,'ml-brightness':0.8,'ml-warmth':0.2,'ml-vignette':0.2,'ml-fogDistance':70,'ml-raySteps':80,'ml-darkness':0.9,'ml-contrast':0.8,'ml-ambient':0.3 },
    { name:"SHADOW HALLS", 'ml-speed':0.2,'ml-tubeWidth':0.25,'ml-patternScale':5,'ml-rotationSpeed':0.18,'ml-edgeWidth':0.04,'ml-reflectivity':0.35,'ml-brightness':0.9,'ml-warmth':0.35,'ml-vignette':0.18,'ml-fogDistance':90,'ml-raySteps':72,'ml-darkness':0.7,'ml-contrast':0.6,'ml-ambient':0.5 },
    { name:"VOID WALK", 'ml-speed':0.1,'ml-tubeWidth':0.22,'ml-patternScale':10,'ml-rotationSpeed':0.08,'ml-edgeWidth':0.025,'ml-reflectivity':0.2,'ml-brightness':0.7,'ml-warmth':0.15,'ml-vignette':0.25,'ml-fogDistance':50,'ml-raySteps':96,'ml-darkness':1.0,'ml-contrast':1.0,'ml-ambient':0.2 },
    { name:"OBSIDIAN TEMPLE", 'ml-speed':0.12,'ml-tubeWidth':0.28,'ml-patternScale':7,'ml-rotationSpeed':0.05,'ml-edgeWidth':0.045,'ml-reflectivity':0.5,'ml-brightness':1.1,'ml-warmth':0.6,'ml-vignette':0.2,'ml-fogDistance':120,'ml-raySteps':72,'ml-darkness':0.5,'ml-contrast':0.7,'ml-ambient':0.7 },
    { name:"MIDNIGHT RUN", 'ml-speed':0.5,'ml-tubeWidth':0.15,'ml-patternScale':4,'ml-rotationSpeed':0.45,'ml-edgeWidth':0.06,'ml-reflectivity':0.4,'ml-brightness':1.2,'ml-warmth':0.1,'ml-vignette':0.22,'ml-fogDistance':150,'ml-raySteps':56,'ml-darkness':0.65,'ml-contrast':0.55,'ml-ambient':0.55 },
    { name:"DARK MIRROR", 'ml-speed':0.18,'ml-tubeWidth':0.2,'ml-patternScale':6,'ml-rotationSpeed':0.15,'ml-edgeWidth':0.03,'ml-reflectivity':0.9,'ml-brightness':0.95,'ml-warmth':0.3,'ml-vignette':0.16,'ml-fogDistance':85,'ml-raySteps':88,'ml-darkness':0.75,'ml-contrast':0.65,'ml-ambient':0.45 },
    { name:"DEEP ABYSS", 'ml-speed':0.06,'ml-tubeWidth':0.16,'ml-patternScale':12,'ml-rotationSpeed':0.02,'ml-edgeWidth':0.015,'ml-reflectivity':0.1,'ml-brightness':0.6,'ml-warmth':0.1,'ml-vignette':0.35,'ml-fogDistance':40,'ml-raySteps':128,'ml-darkness':1.0,'ml-contrast':1.2,'ml-ambient':0.15 },
    { name:"BRIGHT (LEGACY)", 'ml-speed':0.25,'ml-tubeWidth':0.2,'ml-patternScale':6,'ml-rotationSpeed':0.25,'ml-edgeWidth':0.034,'ml-reflectivity':0.25,'ml-brightness':1.4,'ml-warmth':0.6,'ml-vignette':0.125,'ml-fogDistance':120,'ml-raySteps':64,'ml-darkness':0,'ml-contrast':0,'ml-ambient':1.0 }
  ],
  16: [ // Floral Thorns
    { name:"DEFAULT", 'ft-speed':1,'ft-mirrorScale':0.25,'ft-mirrorOffset':0.5,'ft-rotationDepth':0.2,'ft-rotationTime':0.02,'ft-fractalLayers':6,'ft-glowIntensity':0.75,'ft-fogDepth':0.9,'ft-exposure':50000000,'ft-gamma':0.45 },
    { name:"NEON BLOOM", 'ft-speed':1.5,'ft-mirrorScale':0.3,'ft-mirrorOffset':0.6,'ft-rotationDepth':0.3,'ft-rotationTime':0.03,'ft-fractalLayers':7,'ft-glowIntensity':1.2,'ft-fogDepth':0.7,'ft-exposure':70000000,'ft-gamma':0.5 },
    { name:"SLOW DRIFT", 'ft-speed':0.4,'ft-mirrorScale':0.2,'ft-mirrorOffset':0.4,'ft-rotationDepth':0.1,'ft-rotationTime':0.01,'ft-fractalLayers':5,'ft-glowIntensity':0.6,'ft-fogDepth':1.2,'ft-exposure':40000000,'ft-gamma':0.42 },
    { name:"CHAOS", 'ft-speed':2,'ft-mirrorScale':0.35,'ft-mirrorOffset':0.7,'ft-rotationDepth':0.4,'ft-rotationTime':0.05,'ft-fractalLayers':8,'ft-glowIntensity':1,'ft-fogDepth':0.6,'ft-exposure':60000000,'ft-gamma':0.48 },
    { name:"CYBER LOTUS", 'ft-speed':0.8,'ft-mirrorScale':0.4,'ft-mirrorOffset':0.3,'ft-rotationDepth':0.15,'ft-rotationTime':0.008,'ft-fractalLayers':8,'ft-glowIntensity':0.9,'ft-fogDepth':1,'ft-exposure':30000000,'ft-gamma':0.4 },
    { name:"FEVER DREAM", 'ft-speed':2.5,'ft-mirrorScale':0.18,'ft-mirrorOffset':0.8,'ft-rotationDepth':0.5,'ft-rotationTime':0.07,'ft-fractalLayers':7,'ft-glowIntensity':1.5,'ft-fogDepth':0.5,'ft-exposure':90000000,'ft-gamma':0.55 }
  ],
  17: [ // Cosmic Distortion
    { name:"DEFAULT", 'cd-speed':1,'cd-gridScale':4,'cd-gridThreshold':0.25,'cd-distortion':0.25,'cd-glowIntensity':2.5,'cd-ringFreq':10,'cd-angularFreq':9,'cd-orbitSpeed':1,'cd-hue':0.05,'cd-saturation':1,'cd-brightness':1 },
    { name:"NEON PULSE", 'cd-speed':1.5,'cd-gridScale':6,'cd-gridThreshold':0.3,'cd-distortion':0.3,'cd-glowIntensity':3,'cd-ringFreq':15,'cd-angularFreq':12,'cd-orbitSpeed':1.5,'cd-hue':0.6,'cd-saturation':1.3,'cd-brightness':1.2 },
    { name:"DEEP VOID", 'cd-speed':0.5,'cd-gridScale':3,'cd-gridThreshold':0.2,'cd-distortion':0.4,'cd-glowIntensity':2,'cd-ringFreq':8,'cd-angularFreq':6,'cd-orbitSpeed':0.5,'cd-hue':0.75,'cd-saturation':0.8,'cd-brightness':0.8 },
    { name:"FIRE GRID", 'cd-speed':1.2,'cd-gridScale':5,'cd-gridThreshold':0.35,'cd-distortion':0.2,'cd-glowIntensity':3.5,'cd-ringFreq':12,'cd-angularFreq':10,'cd-orbitSpeed':1.2,'cd-hue':0.02,'cd-saturation':1.5,'cd-brightness':1.3 },
    { name:"OCEAN WAVE", 'cd-speed':0.8,'cd-gridScale':4.5,'cd-gridThreshold':0.28,'cd-distortion':0.35,'cd-glowIntensity':2.2,'cd-ringFreq':6,'cd-angularFreq':5,'cd-orbitSpeed':0.8,'cd-hue':0.55,'cd-saturation':1.1,'cd-brightness':1 },
    { name:"CYBER MATRIX", 'cd-speed':2,'cd-gridScale':8,'cd-gridThreshold':0.15,'cd-distortion':0.15,'cd-glowIntensity':2.8,'cd-ringFreq':20,'cd-angularFreq':15,'cd-orbitSpeed':2,'cd-hue':0.35,'cd-saturation':1.2,'cd-brightness':1.1 },
    { name:"SLOW COSMOS", 'cd-speed':0.3,'cd-gridScale':2,'cd-gridThreshold':0.4,'cd-distortion':0.5,'cd-glowIntensity':1.8,'cd-ringFreq':5,'cd-angularFreq':4,'cd-orbitSpeed':0.3,'cd-hue':0.85,'cd-saturation':0.9,'cd-brightness':0.9 },
    { name:"ELECTRIC STORM", 'cd-speed':2.5,'cd-gridScale':7,'cd-gridThreshold':0.22,'cd-distortion':0.28,'cd-glowIntensity':4,'cd-ringFreq':18,'cd-angularFreq':14,'cd-orbitSpeed':2.5,'cd-hue':0.15,'cd-saturation':1.4,'cd-brightness':1.4 }
  ]
};

const shaderNames = ["PLASMA VORTEX", "COSMIC MANDALA", "DARK TRANSIT", "NEON GRID", "ELECTRIC ARCS", "NEON SPOKES", "CRYSTAL LATTICE", "RAINBOW NEBULA", "INFERNO FIRE", "WORMHOLE", "NEON LINES", "CYBER WAVES", "SPIRAL", "STARFIELD", "FRACTAL", "MAZE LATTICE", "FLORAL THORNS", "COSMIC DISTORTION"];
const shaderSources = [plasmaVortexShader, cosmicMandalaShader, darkTransitShader, neonGridShader, electricArcsShader, neonSpokesShader, crystalLatticeShader, rainbowNebulaShader, infernoFireShader, wormholeShader, neonLinesShader, cyberWavesShader, spiralShader, starfieldShader, fractalShader, mazeLatticeShader, floralThornsShader, cosmicDistortionShader];

// ============== WEBGL SETUP ==============

const canvas = document.getElementById('glCanvas');
const gl = canvas.getContext('webgl', { antialias: true });

const vertexSrc = `attribute vec2 a_position; void main() { gl_Position = vec4(a_position, 0.0, 1.0); }`;

function compileShader(src, type) {
  const s = gl.createShader(type);
  gl.shaderSource(s, src);
  gl.compileShader(s);
  if (!gl.getShaderParameter(s, gl.COMPILE_STATUS)) {
    console.error('Shader error:', gl.getShaderInfoLog(s));
  }
  return s;
}

let currentShader = 17;
let programs = [];
let uniformsMap = [];

shaderSources.forEach((fragSrc, idx) => {
  const vs = compileShader(vertexSrc, gl.VERTEX_SHADER);
  const fs = compileShader(fragSrc, gl.FRAGMENT_SHADER);
  const prog = gl.createProgram();
  gl.attachShader(prog, vs);
  gl.attachShader(prog, fs);
  gl.linkProgram(prog);
  programs.push(prog);
  
  const unis = {};
  gl.useProgram(prog);
  const numUniforms = gl.getProgramParameter(prog, gl.ACTIVE_UNIFORMS);
  for (let i = 0; i < numUniforms; i++) {
    const info = gl.getActiveUniform(prog, i);
    unis[info.name] = gl.getUniformLocation(prog, info.name);
  }
  uniformsMap.push(unis);
});

const posBuf = gl.createBuffer();
gl.bindBuffer(gl.ARRAY_BUFFER, posBuf);
gl.bufferData(gl.ARRAY_BUFFER, new Float32Array([-1,-1, 3,-1, -1,3]), gl.STATIC_DRAW);

function setupAttributes(prog) {
  const aPos = gl.getAttribLocation(prog, 'a_position');
  gl.enableVertexAttribArray(aPos);
  gl.vertexAttribPointer(aPos, 2, gl.FLOAT, false, 0, 0);
}

let mouse = { x: 0, y: 0, down: false };
canvas.addEventListener('mousedown', e => { mouse.down = true; });
canvas.addEventListener('mouseup', e => { mouse.down = false; });
canvas.addEventListener('mousemove', e => {
  const rect = canvas.getBoundingClientRect();
  mouse.x = e.clientX - rect.left;
  mouse.y = rect.height - (e.clientY - rect.top);
});

const resBadge = document.getElementById('res-badge');
function resize() {
  const dpr = Math.min(window.devicePixelRatio || 1, 2);
  const w = canvas.clientWidth * dpr;
  const h = canvas.clientHeight * dpr;
  if (canvas.width !== w || canvas.height !== h) {
    canvas.width = w;
    canvas.height = h;
    gl.viewport(0, 0, w, h);
    resBadge.textContent = Math.round(w) + 'Ã—' + Math.round(h);
  }
}

let isPaused = false;
document.addEventListener('keydown', e => {
  if (e.code === 'Space') { isPaused = !isPaused; e.preventDefault(); }
});

// ============== COSMIC DISTORTION AUTO-RANDOMIZE STATE ==============
// Manages blend between preset mode (0.0) and auto-randomize mode (1.0)
let cdAutoRandomize = 1.0; // Start in auto-randomize mode (default)
let cdAutoRandomizeTarget = 1.0;
let cdTransitionStart = 0;
let cdTransitionDuration = 2.0; // 2 second transitions

function updateCdAutoRandomize(now) {
  if (cdAutoRandomize !== cdAutoRandomizeTarget) {
    const elapsed = (now - cdTransitionStart) / 1000;
    const t = Math.min(elapsed / cdTransitionDuration, 1.0);
    // Smooth easing
    const eased = t < 0.5 ? 2 * t * t : 1 - Math.pow(-2 * t + 2, 2) / 2;
    const startVal = cdAutoRandomizeTarget === 1.0 ? 0.0 : 1.0;
    cdAutoRandomize = startVal + (cdAutoRandomizeTarget - startVal) * eased;
    if (t >= 1.0) {
      cdAutoRandomize = cdAutoRandomizeTarget;
    }
  }
}

function transitionToAutoRandomize() {
  if (cdAutoRandomizeTarget !== 1.0) {
    cdAutoRandomizeTarget = 1.0;
    cdTransitionStart = performance.now();
  }
}

function transitionToPreset() {
  if (cdAutoRandomizeTarget !== 0.0) {
    cdAutoRandomizeTarget = 0.0;
    cdTransitionStart = performance.now();
  }
}

// ============== SLIDER SYSTEM ==============

const sliderConfigs = {
  0: ['pv-arms','pv-spin','pv-tightness','pv-coresize','pv-plasma','pv-tendrils','pv-noisescale','pv-turbulence','pv-pulserate','pv-waves','pv-wavespeed','pv-colormode','pv-hue','pv-coreglow','pv-bloom','pv-zoom'],
  1: ['cm-symmetry','cm-layers','cm-complexity','cm-ringscale','cm-rotspeed','cm-pulsespeed','cm-pulseamt','cm-spiral','cm-glow','cm-falloff','cm-colorcycle','cm-hue','cm-saturation','cm-edgeglow','cm-bloom','cm-zoom'],
  2: ['dt-speed','dt-radius','dt-scoops','dt-detail','dt-orb','dt-brightness','dt-saturation','dt-bgdark'],
  3: ['ng-speed','ng-gridsize','ng-linethick','ng-glow','ng-pulse','ng-depth','ng-hue','ng-saturation','ng-bgdark','ng-scanlines','ng-chromatic'],
  4: ['ea-arcs','ea-speed','ea-thickness','ea-glow','ea-branch','ea-jitter','ea-hue','ea-saturation','ea-bgdark','ea-pulse','ea-spread'],
  5: ['ns-speed','ns-zoom','ns-iterations','ns-complexity','ns-stepsize','ns-saturation','ns-exposure'],
  6: ['cl-speed','cl-pathcurve','cl-stepscale','cl-swirl','cl-swirlfreq','cl-shapesize','cl-shapemod','cl-glow','cl-colorr','cl-colorg','cl-colorb','cl-exposure'],
  7: ['rn-speed','rn-turbulence','rn-iterations','rn-scale','rn-detail','rn-saturation','rn-brightness','rn-hue','rn-exposure'],
  8: ['fire-height','fire-width','fire-intensity','fire-timescale','fire-sparks','fire-smoke','fire-noise'],
  9: ['wh-speed','wh-sway','wh-twist','wh-starStrength','wh-starDensity','wh-starSize','wh-twinkle','wh-tunnelRadius','wh-caveNoise','wh-wallGlow','wh-hueShift','wh-saturation','wh-colorCycle','wh-exposure','wh-bloom','wh-vignette','wh-grain'],
  10: ['nl-speed','nl-lineCount','nl-lineWidth','nl-glow','nl-waveAmp','nl-waveFreq','nl-pulse','nl-trail','nl-hue','nl-saturation','nl-bgdark'],
  11: ['cw-speed','cw-waveHeight','cw-waveScale','cw-gridSize','cw-gridGlow','cw-hue','cw-saturation','cw-perspective','cw-fogDensity','cw-scanlines','cw-chromatic'],
  12: ['sp-arms','sp-twist','sp-scale','sp-speed','sp-pulse','sp-hue','sp-noise','sp-vignette','sp-sharpness','sp-turbulence','sp-glow'],
  13: ['sf-volSteps','sf-stepSize','sf-iterations','sf-brightness','sf-distFading','sf-saturation','sf-trailLayers','sf-trailIntensity','sf-flowSpeed','sf-rotSpeed','sf-centerGlow','sf-hue'],
  14: ['fr-iterations','fr-fractScale','fr-ringFreq','fr-ringSpeed','fr-colorSpeed','fr-brightness','fr-falloff','fr-zoom'],
  15: ['ml-speed','ml-tubeWidth','ml-patternScale','ml-rotationSpeed','ml-edgeWidth','ml-reflectivity','ml-brightness','ml-warmth','ml-vignette','ml-fogDistance','ml-raySteps','ml-darkness','ml-contrast','ml-ambient'],
  16: ['ft-speed','ft-mirrorScale','ft-mirrorOffset','ft-rotationDepth','ft-rotationTime','ft-fractalLayers','ft-glowIntensity','ft-fogDepth','ft-exposure','ft-gamma'],
  17: ['cd-speed','cd-gridScale','cd-gridThreshold','cd-distortion','cd-glowIntensity','cd-ringFreq','cd-angularFreq','cd-orbitSpeed','cd-hue','cd-saturation','cd-brightness']
};

const uniformNames = {
  'cm-symmetry':'u_symmetry','cm-layers':'u_layers','cm-complexity':'u_complexity','cm-ringscale':'u_ringscale',
  'cm-rotspeed':'u_rotspeed','cm-pulsespeed':'u_pulsespeed','cm-pulseamt':'u_pulseamt','cm-spiral':'u_spiral',
  'cm-glow':'u_glow','cm-falloff':'u_falloff','cm-colorcycle':'u_colorcycle','cm-hue':'u_hue','cm-saturation':'u_saturation',
  'cm-edgeglow':'u_edgeglow','cm-bloom':'u_bloom','cm-zoom':'u_zoom',
  'pv-arms':'u_arms','pv-spin':'u_spin','pv-tightness':'u_tightness','pv-coresize':'u_coresize',
  'pv-plasma':'u_plasma','pv-tendrils':'u_tendrils','pv-noisescale':'u_noisescale','pv-turbulence':'u_turbulence',
  'pv-pulserate':'u_pulserate','pv-waves':'u_waves','pv-wavespeed':'u_wavespeed',
  'pv-colormode':'u_colormode','pv-hue':'u_hue','pv-coreglow':'u_coreglow','pv-bloom':'u_bloom','pv-zoom':'u_zoom',
  'dt-speed':'u_speed','dt-radius':'u_radius','dt-scoops':'u_scoops','dt-detail':'u_detail',
  'dt-orb':'u_orb','dt-brightness':'u_brightness','dt-saturation':'u_saturation','dt-bgdark':'u_bgdark',
  'ng-speed':'u_speed','ng-gridsize':'u_gridsize','ng-linethick':'u_linethick','ng-glow':'u_glow',
  'ng-pulse':'u_pulse','ng-depth':'u_depth','ng-hue':'u_hue','ng-saturation':'u_saturation',
  'ng-bgdark':'u_bgdark','ng-scanlines':'u_scanlines','ng-chromatic':'u_chromatic',
  'ea-arcs':'u_arcs','ea-speed':'u_speed','ea-thickness':'u_thickness','ea-glow':'u_glow',
  'ea-branch':'u_branch','ea-jitter':'u_jitter','ea-hue':'u_hue','ea-saturation':'u_saturation',
  'ea-bgdark':'u_bgdark','ea-pulse':'u_pulse','ea-spread':'u_spread',
  'ns-speed':'u_speed','ns-zoom':'u_zoom','ns-iterations':'u_iterations','ns-complexity':'u_complexity',
  'ns-stepsize':'u_stepsize','ns-saturation':'u_saturation','ns-exposure':'u_exposure',
  'cl-speed':'u_speed','cl-pathcurve':'u_pathCurve','cl-stepscale':'u_stepScale',
  'cl-swirl':'u_swirl','cl-swirlfreq':'u_swirlFreq',
  'cl-shapesize':'u_shapeSize','cl-shapemod':'u_shapeMod',
  'cl-glow':'u_glow','cl-colorr':'u_colorR','cl-colorg':'u_colorG','cl-colorb':'u_colorB','cl-exposure':'u_exposure',
  'rn-speed':'u_speed','rn-turbulence':'u_turbulence','rn-iterations':'u_iterations','rn-scale':'u_scale',
  'rn-detail':'u_detail','rn-saturation':'u_saturation','rn-brightness':'u_brightness','rn-hue':'u_hue','rn-exposure':'u_exposure',
  'fire-height':'u_flameHeight','fire-width':'u_flameWidth','fire-intensity':'u_flameIntensity',
  'fire-timescale':'u_timeScale','fire-sparks':'u_sparkCount','fire-smoke':'u_smokeOpacity','fire-noise':'u_noiseOctaves',
  'wh-speed':'u_speed','wh-sway':'u_sway','wh-twist':'u_twist','wh-starStrength':'u_starStrength',
  'wh-starDensity':'u_starDensity','wh-starSize':'u_starSize','wh-twinkle':'u_twinkle',
  'wh-tunnelRadius':'u_tunnelRadius','wh-caveNoise':'u_caveNoise','wh-wallGlow':'u_wallGlow',
  'wh-hueShift':'u_hueShift','wh-saturation':'u_saturation','wh-colorCycle':'u_colorCycle',
  'wh-exposure':'u_exposure','wh-bloom':'u_bloom','wh-vignette':'u_vignette','wh-grain':'u_grain',
  'nl-speed':'u_speed','nl-lineCount':'u_lineCount','nl-lineWidth':'u_lineWidth','nl-glow':'u_glow',
  'nl-waveAmp':'u_waveAmp','nl-waveFreq':'u_waveFreq','nl-pulse':'u_pulse','nl-trail':'u_trail',
  'nl-hue':'u_hue','nl-saturation':'u_saturation','nl-bgdark':'u_bgdark',
  'cw-speed':'u_speed','cw-waveHeight':'u_waveHeight','cw-waveScale':'u_waveScale',
  'cw-gridSize':'u_gridSize','cw-gridGlow':'u_gridGlow','cw-hue':'u_hue','cw-saturation':'u_saturation',
  'cw-perspective':'u_perspective','cw-fogDensity':'u_fogDensity','cw-scanlines':'u_scanlines','cw-chromatic':'u_chromatic',
  // Spiral
  'sp-arms':'u_arms','sp-twist':'u_twist','sp-scale':'u_scale','sp-speed':'u_speed','sp-pulse':'u_pulse',
  'sp-hue':'u_hue','sp-noise':'u_noise','sp-vignette':'u_vignette','sp-sharpness':'u_sharpness','sp-turbulence':'u_turbulence','sp-glow':'u_glow',
  // Starfield
  'sf-volSteps':'u_volSteps','sf-stepSize':'u_stepSize','sf-iterations':'u_iterations','sf-brightness':'u_brightness',
  'sf-distFading':'u_distFading','sf-saturation':'u_saturation','sf-trailLayers':'u_trailLayers','sf-trailIntensity':'u_trailIntensity',
  'sf-flowSpeed':'u_flowSpeed','sf-rotSpeed':'u_rotSpeed','sf-centerGlow':'u_centerGlow','sf-hue':'u_hue',
  // Fractal
  'fr-iterations':'u_iterations','fr-fractScale':'u_fractScale','fr-ringFreq':'u_ringFreq','fr-ringSpeed':'u_ringSpeed',
  'fr-colorSpeed':'u_colorSpeed','fr-brightness':'u_brightness','fr-falloff':'u_falloff','fr-zoom':'u_zoom',
  // Maze Lattice
  'ml-speed':'u_speed','ml-tubeWidth':'u_tubeWidth','ml-patternScale':'u_patternScale','ml-rotationSpeed':'u_rotationSpeed',
  'ml-edgeWidth':'u_edgeWidth','ml-reflectivity':'u_reflectivity','ml-brightness':'u_brightness','ml-warmth':'u_warmth',
  'ml-vignette':'u_vignette','ml-fogDistance':'u_fogDistance','ml-raySteps':'u_raySteps',
  'ml-darkness':'u_darkness','ml-contrast':'u_contrast','ml-ambient':'u_ambient',
  // Floral Thorns
  'ft-speed':'u_speed','ft-mirrorScale':'u_mirrorScale','ft-mirrorOffset':'u_mirrorOffset','ft-rotationDepth':'u_rotationDepth',
  'ft-rotationTime':'u_rotationTime','ft-fractalLayers':'u_fractalLayers','ft-glowIntensity':'u_glowIntensity',
  'ft-fogDepth':'u_fogDepth','ft-exposure':'u_exposure','ft-gamma':'u_gamma',
  // Cosmic Distortion
  'cd-speed':'u_speed','cd-gridScale':'u_gridScale','cd-gridThreshold':'u_gridThreshold','cd-distortion':'u_distortion',
  'cd-glowIntensity':'u_glowIntensity','cd-ringFreq':'u_ringFreq','cd-angularFreq':'u_angularFreq','cd-orbitSpeed':'u_orbitSpeed',
  'cd-hue':'u_hue','cd-saturation':'u_saturation','cd-brightness':'u_brightness'
};

function updateSlider(id) {
  const el = document.getElementById(id);
  if (!el) return;
  const val = document.getElementById('val-' + id);
  const fill = document.getElementById('fill-' + id);
  const v = parseFloat(el.value);
  const t = (v - parseFloat(el.min)) / (parseFloat(el.max) - parseFloat(el.min));
  if (fill) fill.style.width = (t * 100) + '%';
  if (val) {
    if (id.includes('iterations') || id.includes('sparks') || id.includes('symmetry') || id.includes('layers') || id.includes('arms') || id.includes('volSteps') || id.includes('trailLayers') || id.includes('fogDistance') || id.includes('fractalLayers') || id.includes('ringFreq') || id.includes('raySteps')) {
      val.textContent = Math.round(v);
    } else if (id === 'ft-exposure') {
      val.textContent = v.toExponential(1);
    } else if (id === 'sf-brightness') {
      val.textContent = v.toFixed(4);
    } else if (id === 'sf-rotSpeed') {
      val.textContent = v.toFixed(3);
    } else {
      val.textContent = v.toFixed(2);
    }
  }
}

Object.values(sliderConfigs).flat().forEach(id => {
  const el = document.getElementById(id);
  if (el) {
    el.addEventListener('input', () => updateSlider(id));
    updateSlider(id);
  }
});

// ============== PRESET SYSTEM ==============

let currentPresetIndex = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];
const presetNameEl = document.getElementById('current-preset');
const shaderTypeEl = document.getElementById('shader-type');

function buildPresetButtons() {
  for (let s = 0; s < 18; s++) {
    const container = document.getElementById('presets-' + s);
    if (!container) continue;
    container.innerHTML = '';
    presetsData[s].forEach((preset, idx) => {
      const btn = document.createElement('button');
      btn.className = 'preset-btn' + (idx === 0 ? ' active' : '');
      btn.textContent = preset.name;
      btn.addEventListener('click', () => applyPreset(s, idx));
      container.appendChild(btn);
    });
  }
}

function applyPreset(shader, index) {
  const preset = presetsData[shader][index];
  currentPresetIndex[shader] = index;

  // For Cosmic Distortion, transition from auto-randomize to preset mode
  if (shader === 17) {
    transitionToPreset();
  }

  Object.keys(preset).forEach(key => {
    if (key === 'name') return;
    const el = document.getElementById(key);
    if (el) {
      el.value = preset[key];
      updateSlider(key);
    }
  });

  const container = document.getElementById('presets-' + shader);
  if (container) {
    container.querySelectorAll('.preset-btn').forEach((btn, i) => {
      btn.classList.toggle('active', i === index);
    });
  }

  presetNameEl.textContent = preset.name;
}

// ============== SHADER SWITCHING ==============

const shaderDropdown = document.getElementById('shader-dropdown');
const controlSections = document.querySelectorAll('.controls-section');

function switchShader(index) {
  currentShader = index;

  shaderDropdown.value = index;
  controlSections.forEach((sec, i) => sec.classList.toggle('active', i === index));

  shaderTypeEl.textContent = shaderNames[index];
  presetNameEl.textContent = presetsData[index][currentPresetIndex[index]].name;

  gl.useProgram(programs[index]);
  setupAttributes(programs[index]);
}

shaderDropdown.addEventListener('change', (e) => {
  switchShader(parseInt(e.target.value));
});

// ============== EXPORT ==============

function generateExportCode() {
  const idx = currentShader;
  const name = shaderNames[idx];
  const preset = presetsData[idx][currentPresetIndex[idx]].name;

  // Special export for Cosmic Distortion with Buffer A randomization
  if (idx === 17) {
    return generateCosmicDistortionExport();
  }

  let code = `// ${name} - Exported from Shader Lab Pro 2.6.0
// Preset: ${preset}
// These presets were created using Shader Lab Pro
//
// Visit this site to edit this code and its presets:
// https://shader-labs-pro-plus.netlify.app
//
// Ready to paste into Shadertoy!

`;

  // Add #defines for all current slider values
  sliderConfigs[idx].forEach(id => {
    const el = document.getElementById(id);
    if (el) {
      const v = parseFloat(el.value);
      const defName = id.toUpperCase().replace(/-/g, '_');
      code += `#define ${defName} ${v.toFixed(4)}\n`;
    }
  });

  code += '\n';

  // Get the shader source and convert for Shadertoy
  let shaderCode = shaderSources[idx];

  // Remove the WebGL wrapper parts
  shaderCode = shaderCode.replace(/precision highp float;\n?/g, '');
  shaderCode = shaderCode.replace(/void main\(\) \{ vec4 O; mainImage\(O, gl_FragCoord\.xy\); gl_FragColor = O; \}\n?/g, '');

  // Build uniform to define mapping, sorted by length (longest first to avoid partial replacements)
  const replacements = [];
  sliderConfigs[idx].forEach(id => {
    const uniName = uniformNames[id];
    const defName = id.toUpperCase().replace(/-/g, '_');
    replacements.push({ uni: uniName, def: defName });
  });

  // Sort by uniform name length descending (replace longer names first)
  replacements.sort((a, b) => b.uni.length - a.uni.length);

  // Remove uniform lines
  shaderCode = shaderCode.replace(/uniform float [^;]+;\n?/g, '');
  shaderCode = shaderCode.replace(/uniform vec2 iResolution;\n?/g, '');
  shaderCode = shaderCode.replace(/uniform vec4 iMouse;\n?/g, '');
  shaderCode = shaderCode.replace(/uniform float iTime;\n?/g, '');

  // Replace uniform usages with #define names using word boundaries
  replacements.forEach(({ uni, def }) => {
    const regex = new RegExp('\\b' + uni.replace(/[.*+?^${}()|[\]\\]/g, '\\$&') + '\\b', 'g');
    shaderCode = shaderCode.replace(regex, def);
  });

  // Clean up extra newlines
  shaderCode = shaderCode.replace(/\n{3,}/g, '\n\n');
  shaderCode = shaderCode.trim();

  code += shaderCode;

  return code;
}

// Special export for Cosmic Distortion with Buffer A transition technique
function generateCosmicDistortionExport() {
  const bufferA = `// COSMIC DISTORTION - Buffer A
// Auto-randomizes with smooth transitions (7s interval, 2s transition)
// Exported from Shader Lab Pro 2.6.0
//
// Visit this site to edit this code and its presets:
// https://shader-labs-pro-plus.netlify.app
//
// SETUP: Create Buffer A with this code, then set iChannel0 -> Buffer A in Image tab

float hash(float n) {
    return fract(sin(n * 78.233) * 43758.5453123);
}

void mainImage(out vec4 fragColor, in vec2 fragCoord) {
    float changeInterval = 7.0;
    float transitionDuration = 2.0;

    float epoch = floor(iTime / changeInterval);
    float timeInEpoch = fract(iTime / changeInterval) * changeInterval;
    float transition = smoothstep(0.0, transitionDuration, timeInEpoch);

    float currSeed = epoch * 137.0;
    float nextSeed = (epoch + 1.0) * 137.0;

    int id = int(fragCoord.x);

    if (fragCoord.y < 1.0 && id < 11) {
        float prevVal = hash(currSeed + float(id) * 17.31);
        float currVal = hash(nextSeed + float(id) * 17.31);
        float interpolated = mix(prevVal, currVal, transition);
        fragColor = vec4(interpolated, 0.0, 0.0, 1.0);
    } else {
        fragColor = vec4(0.0);
    }
}`;

  const imageCode = `// COSMIC DISTORTION - Image (Main)
// Auto-randomizes with smooth transitions (7s interval, 2s transition)
// Exported from Shader Lab Pro 2.6.0
//
// Visit this site to edit this code and its presets:
// https://shader-labs-pro-plus.netlify.app
//
// SETUP: Set iChannel0 -> Buffer A

float seg(in vec2 p, in vec2 a, in vec2 b) {
    vec2 pa = p-a, ba = b-a;
    float h = clamp( dot(pa,ba)/dot(ba,ba), 0.0, 1.0 );
    return length( pa - ba*h );
}

vec3 hsv2rgb(vec3 c) {
    vec4 K = vec4(1.0, 2.0/3.0, 1.0/3.0, 3.0);
    vec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);
    return c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);
}

void mainImage( out vec4 fragColor, in vec2 fragCoord )
{
    // Read interpolated random values from Buffer A
    float CD_SPEED         = 0.15 + texelFetch(iChannel0, ivec2(0,0), 0).r * 0.45;
    float CD_GRIDSCALE     = 3.0  + texelFetch(iChannel0, ivec2(1,0), 0).r * 12.0;
    float CD_GRIDTHRESHOLD = 0.1  + texelFetch(iChannel0, ivec2(2,0), 0).r * 0.35;
    float CD_DISTORTION    = 0.2  + texelFetch(iChannel0, ivec2(3,0), 0).r * 0.8;
    float CD_GLOWINTENSITY = 2.0  + texelFetch(iChannel0, ivec2(4,0), 0).r * 5.0;
    float CD_RINGFREQ      = 8.0  + texelFetch(iChannel0, ivec2(5,0), 0).r * 20.0;
    float CD_ANGULARFREQ   = 5.0  + texelFetch(iChannel0, ivec2(6,0), 0).r * 12.0;
    float CD_ORBITSPEED    = 0.1  + texelFetch(iChannel0, ivec2(7,0), 0).r * 0.3;
    float CD_HUE           = texelFetch(iChannel0, ivec2(8,0), 0).r;
    float CD_SATURATION    = 0.6  + texelFetch(iChannel0, ivec2(9,0), 0).r * 0.6;
    float CD_BRIGHTNESS    = 1.0  + texelFetch(iChannel0, ivec2(10,0), 0).r * 1.8;

    vec2 uv = (fragCoord - 0.5 * iResolution.xy) / iResolution.y;
    float t = iTime * CD_SPEED;
    float a = atan(uv.y, uv.x);
    vec2 p = cos(a + t) * vec2(cos(0.5 * t * CD_ORBITSPEED), sin(0.3 * t * CD_ORBITSPEED));

    float d1 = length(uv - p);
    float d2 = length(uv);

    vec2 uv2 = 2. * cos(log(length(uv)) * CD_DISTORTION - 0.5 * t + log(vec2(d1,d2)/(d1+d2)));

    vec2 fpos = fract(CD_GRIDSCALE * uv2) - 0.5;
    float d = max(abs(fpos.x), abs(fpos.y));
    float k = 5. / iResolution.y;
    float s = smoothstep(-k, k, CD_GRIDTHRESHOLD - d);

    vec3 baseCol = hsv2rgb(vec3(CD_HUE, CD_SATURATION, 1.0));
    vec3 col = vec3(s * baseCol.r, s * baseCol.g * 0.5, (0.1-0.1 * s) * baseCol.b);

    vec3 glowCol = hsv2rgb(vec3(CD_HUE + 0.1, CD_SATURATION, 1.0));
    float glowArg = -CD_GLOWINTENSITY * (length(uv - p) + length(uv));
    float coshVal = (exp(glowArg) + exp(-glowArg)) * 0.5;
    col += (1.0 / coshVal) * glowCol;

    float c = cos(CD_RINGFREQ * length(uv2) + 4. * t);
    vec3 ringCol = hsv2rgb(vec3(CD_HUE + 0.3, CD_SATURATION * 0.8, 1.0));
    col += (0.5 + 0.5 * c) * ringCol *
           exp(-9. * abs(cos(CD_ANGULARFREQ * a + t) * uv.x
                       + sin(CD_ANGULARFREQ * a + t) * uv.y
                       + 0.1 * c));

    col *= CD_BRIGHTNESS;
    fragColor = vec4(col, 1.0);
}`;

  return `${bufferA}

// ============================================================
// ============================================================

${imageCode}`;
}

const modal = document.getElementById('export-modal');
const codePreview = document.getElementById('code-preview');
const copyBtn = document.getElementById('modal-copy');

document.getElementById('export-btn').addEventListener('click', () => {
  codePreview.textContent = generateExportCode();
  modal.classList.add('active');
});

document.getElementById('modal-close').addEventListener('click', () => modal.classList.remove('active'));
document.getElementById('modal-cancel').addEventListener('click', () => modal.classList.remove('active'));
modal.addEventListener('click', (e) => { if (e.target === modal) modal.classList.remove('active'); });

copyBtn.addEventListener('click', () => {
  navigator.clipboard.writeText(codePreview.textContent).then(() => {
    copyBtn.textContent = 'Copied!';
    copyBtn.classList.add('copy-success');
    setTimeout(() => {
      copyBtn.textContent = 'Copy to Clipboard';
      copyBtn.classList.remove('copy-success');
    }, 2000);
  });
});

// ============== RANDOMIZE ==============

function randomizeShader() {
  const sliders = sliderConfigs[currentShader];
  if (!sliders) return;

  // For Cosmic Distortion, transition to auto-randomize mode
  if (currentShader === 17) {
    transitionToAutoRandomize();
    // Clear active preset since we're switching to auto-randomize mode
    const container = document.getElementById('presets-' + currentShader);
    if (container) {
      container.querySelectorAll('.preset-btn').forEach(btn => {
        btn.classList.remove('active');
      });
    }
    presetNameEl.textContent = 'Auto-Random';
    return; // Don't randomize sliders - shader does it internally
  }

  sliders.forEach(id => {
    const el = document.getElementById(id);
    if (!el) return;

    const min = parseFloat(el.min);
    const max = parseFloat(el.max);
    const step = parseFloat(el.step) || 0.01;

    // Generate random value within range
    let randomVal = min + Math.random() * (max - min);

    // Snap to step
    randomVal = Math.round(randomVal / step) * step;

    // Clamp to range (in case of floating point errors)
    randomVal = Math.max(min, Math.min(max, randomVal));

    el.value = randomVal;
    updateSlider(id);
  });

  // Clear active preset since we're now using random values
  const container = document.getElementById('presets-' + currentShader);
  if (container) {
    container.querySelectorAll('.preset-btn').forEach(btn => {
      btn.classList.remove('active');
    });
  }
  presetNameEl.textContent = 'Random';
}

document.getElementById('randomize-btn').addEventListener('click', randomizeShader);

// ============== RENDER ==============

let lastTime = performance.now();
let accTime = 0;
const fpsEl = document.getElementById('fps');
let fpsAccum = 0, fpsFrames = 0;

function render(now) {
  const dt = (now - lastTime) * 0.001;
  lastTime = now;
  if (!isPaused) accTime += dt;

  // Update Cosmic Distortion auto-randomize transition
  updateCdAutoRandomize(now);

  resize();

  const prog = programs[currentShader];
  const unis = uniformsMap[currentShader];

  gl.useProgram(prog);
  setupAttributes(prog);

  if (unis.iResolution) gl.uniform2f(unis.iResolution, canvas.width, canvas.height);
  if (unis.iTime) gl.uniform1f(unis.iTime, accTime);
  if (unis.iMouse) gl.uniform4f(unis.iMouse, mouse.x, mouse.y, mouse.down ? 1 : 0, 0);

  // Pass auto-randomize blend value for Cosmic Distortion (shader 17)
  if (currentShader === 17 && unis.u_autoRandomize) {
    gl.uniform1f(unis.u_autoRandomize, cdAutoRandomize);
  }

  sliderConfigs[currentShader].forEach(id => {
    const el = document.getElementById(id);
    const uniName = uniformNames[id];
    if (el && unis[uniName]) {
      gl.uniform1f(unis[uniName], parseFloat(el.value));
    }
  });

  gl.drawArrays(gl.TRIANGLES, 0, 3);
  
  fpsAccum += 1 / Math.max(dt, 0.001);
  fpsFrames++;
  if (fpsFrames >= 10) {
    fpsEl.textContent = (fpsAccum / fpsFrames).toFixed(0);
    fpsAccum = 0;
    fpsFrames = 0;
  }
  
  requestAnimationFrame(render);
}

// ============== INIT ==============

buildPresetButtons();
switchShader(17);
applyPreset(0, 0);
requestAnimationFrame(render);

// ============== AUDIO ==============

const bgm = document.getElementById('bgm');
const audioToggle = document.getElementById('audio-toggle');
const volumeSlider = document.getElementById('volume-slider');
const audioControls = document.getElementById('audio-controls');
let audioPlaying = false;
let audioLoaded = false;

// Check if audio file exists
bgm.addEventListener('canplaythrough', () => {
  audioLoaded = true;
  audioControls.style.display = 'flex';
});

bgm.addEventListener('error', () => {
  audioControls.style.display = 'none';
});

// Start muted at 40% volume (ready when unmuted)
bgm.volume = 0.4;
bgm.muted = true;

audioToggle.addEventListener('click', () => {
  if (!audioLoaded) return;
  
  if (audioPlaying) {
    bgm.muted = true;
    audioToggle.textContent = 'ðŸ”‡';
    audioToggle.classList.remove('playing');
  } else {
    bgm.muted = false;
    bgm.volume = parseFloat(volumeSlider.value);
    bgm.play().catch(() => {});
    audioToggle.textContent = 'ðŸ”Š';
    audioToggle.classList.add('playing');
  }
  audioPlaying = !audioPlaying;
});

volumeSlider.addEventListener('input', () => {
  bgm.volume = parseFloat(volumeSlider.value);
  if (bgm.volume === 0) {
    audioToggle.textContent = 'ðŸ”‡';
  } else if (audioPlaying) {
    audioToggle.textContent = 'ðŸ”Š';
  }
});

// Preload audio (muted)
bgm.play().catch(() => {});
</script>
</body>
</html>
